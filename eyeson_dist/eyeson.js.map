{"version":3,"sources":["webpack://eyeson/webpack/universalModuleDefinition","webpack://eyeson/webpack/bootstrap","webpack://eyeson/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/createClass.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/inherits.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/get.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/typeof.js","webpack://eyeson/./node_modules/@babel/runtime/regenerator/index.js","webpack://eyeson/./node_modules/screenfull/dist/screenfull.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://eyeson/./node_modules/sdp/sdp.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://eyeson/./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack://eyeson/./node_modules/platform/platform.js","webpack://eyeson/./node_modules/sip.js/dist/sip.js","webpack://eyeson/./node_modules/actioncable/lib/assets/compiled/action_cable.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://eyeson/(webpack)/buildin/module.js","webpack://eyeson/(webpack)/buildin/global.js","webpack://eyeson/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://eyeson/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://eyeson/./src/Logger.js","webpack://eyeson/./src/ComApi.js","webpack://eyeson/./src/utils/throttle.js","webpack://eyeson/./src/events/BaseEvent.js","webpack://eyeson/./src/events/PlaybackEvents.js","webpack://eyeson/./src/events/PublicEvent.js","webpack://eyeson/./src/events/AnnotationEvents.js","webpack://eyeson/./src/events/StfuEvent.js","webpack://eyeson/./src/events/IgnoreEvent.js","webpack://eyeson/./src/events/ForwardEvent.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/utils.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://eyeson/./src/LocalStorage.js","webpack://eyeson/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://eyeson/./src/FullscreenHelper.js","webpack://eyeson/./src/FeatureDetector.js","webpack://eyeson/./src/NinjaStream.js","webpack://eyeson/./src/utils/StreamHelpers.js","webpack://eyeson/./src/DeviceManager.js","webpack://eyeson/./src/MediaStreamBuilder.js","webpack://eyeson/./src/events/ChangeLocalStreamEvent.js","webpack://eyeson/./src/events/PodiumEvent.js","webpack://eyeson/./src/events/SnapshotEvent.js","webpack://eyeson/./src/events/SetLayerEvent.js","webpack://eyeson/./src/events/SendChatEvent.js","webpack://eyeson/./src/events/SetLayoutEvent.js","webpack://eyeson/./src/SipMessageWhitelist.js","webpack://eyeson/./src/PodiumFacade.js","webpack://eyeson/./src/SipMessageTransformer.js","webpack://eyeson/./src/SessionDescriptionHandler.js","webpack://eyeson/./src/SipConnection.js","webpack://eyeson/./src/events/RoomReceivedEvent.js","webpack://eyeson/./src/events/FetchRoomEvent.js","webpack://eyeson/./src/events/DeleteFileEvent.js","webpack://eyeson/./src/events/UploadFileEvent.js","webpack://eyeson/./src/events/ReceiveChatEvent.js","webpack://eyeson/./src/events/StopYouTubeEvent.js","webpack://eyeson/./src/events/StartStreamEvent.js","webpack://eyeson/./src/events/ChangeStreamEvent.js","webpack://eyeson/./src/events/ToggleCameraEvent.js","webpack://eyeson/./src/events/StartYouTubeEvent.js","webpack://eyeson/./src/events/StopFacebookEvent.js","webpack://eyeson/./src/events/AcceptSessionEvent.js","webpack://eyeson/./src/events/StartFacebookEvent.js","webpack://eyeson/./src/events/StopRecordingEvent.js","webpack://eyeson/./src/events/VoiceActivityEvent.js","webpack://eyeson/./src/events/StartRecordingEvent.js","webpack://eyeson/./src/events/ScreenCaptureEvent.js","webpack://eyeson/./src/events/StartPresentingEvent.js","webpack://eyeson/./src/events/StopPresentingEvent.js","webpack://eyeson/./src/events/StopBroadcastsEvent.js","webpack://eyeson/./src/events/ClearFrontLayerEvent.js","webpack://eyeson/./src/events/PublishBroadcastEvent.js","webpack://eyeson/./src/events/RequestGuestUserEvent.js","webpack://eyeson/./src/events/HandleStreamOfferEvent.js","webpack://eyeson/./src/events/HandleStreamAnswerEvent.js","webpack://eyeson/./src/events/ParticipantListUpdateEvent.js","webpack://eyeson/./src/utils/scale.js","webpack://eyeson/./src/utils/debounce.js","webpack://eyeson/./src/CanvasMixer.js","webpack://eyeson/./src/events/MixerEvents.js","webpack://eyeson/./src/EventHandler.js","webpack://eyeson/./src/SDPModifiers.js","webpack://eyeson/./src/ConferenceSession.js","webpack://eyeson/./src/ConnectionMonitor.js","webpack://eyeson/./src/ActionCableConnection.js","webpack://eyeson/./src/eyeson.js","webpack://eyeson/./src/utils/GiphyApi.js","webpack://eyeson/./src/utils/YouTubeApi.js","webpack://eyeson/./src/utils/FacebookApi.js","webpack://eyeson/./src/SoundMeter.js","webpack://eyeson/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_typeof","assertThisInitialized","self","subClass","superClass","constructor","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","superPropBase","_get","receiver","Reflect","base","desc","getOwnPropertyDescriptor","_typeof2","obj","iterator","document","isCommonjs","fn","val","fnMap","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","element","Promise","resolve","reject","onFullScreenEntered","this","off","on","documentElement","requestFullscreen","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","onerror","event","eventName","addEventListener","removeEventListener","raw","defineProperties","Boolean","fullscreenElement","isEnabled","fullscreenEnabled","asyncGeneratorStep","gen","_next","_throw","arg","info","done","then","args","arguments","apply","err","undefined","SDPUtils","Math","random","toString","substr","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","parts","candidate","foundation","substring","component","parseInt","protocol","toLowerCase","priority","ip","address","port","type","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","concat","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","isNaN","sctpPort","fmt","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","version","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","slice","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","charAt","ReferenceError","arrayWithoutHoles","iterableToArray","nonIterableSpread","dtlsRole","trackId","_initialTrackId","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","min","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","find","remoteCandidate","addRemoteCandidate","makeError","e","Error","code","NotSupportedError","InvalidStateError","InvalidAccessError","OperationError","edgeVersion","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","fireAddTrack","pc","streams","trackEvent","Event","setTimeout","_dispatchEvent","RTCPeerConnection","config","_eventTarget","createDocumentFragment","method","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","iceServers","hasTurn","server","urls","url","console","warn","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","enabled","removeTrack","sender","stop","splice","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","sdpMid","cand","serializedCandidate","assign","toJSON","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","_transceive","send","recv","encodings","receive","isIceLite","rejected","remoteIceParameters","remoteDtlsParameters","start","_updateSignalingState","receiverList","iceOptions","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","isNewTrack","nativeTrack","removeTrackFromStreamAndFireEvent","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","addIceCandidate","candidateString","getStats","selector","MediaStreamTrack","senderOrReceiver","promises","all","allStats","results","Map","stats","stat","set","ortcObjectName","nativeGetstats","nativeStats","mapStats","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","methods","nativeMethod","objectTypes","freeExports","freeModule","nodeType","freeGlobal","global","maxSafeInteger","pow","reOpera","objectProto","capitalize","string","String","format","test","forOwn","getClassOf","qualify","replace","reduce","array","accumulator","each","platform","ua","context","isCustomContext","nav","navigator","userAgent","data","isSpecialCasedOS","likeChrome","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","doc","opera","operamini","operaClass","arch","prerelease","useFeatures","layout","result","guess","RegExp","pattern","exec","label","guesses","getName","product","getProduct","manufacturer","getManufacturer","os","cleanupOS","getOS","unshift","parseFloat","runtime","flash","system","Capabilities","phantom","major","minor","patch","documentMode","toFixed","lang","System","getProperty","require","process","browser","versions","electron","node","nw","appMinorVersion","external","family","architecture","cpuClass","pkg","title","SIP","LoggerFactory","EventEmitter","C","Exceptions","Timers","timers","Transport","SessionDescriptionHandler","DigestAuthentication","Utils","Grammar","Web","Modifiers","Simple","defer","deferred","promise","reducePromises","acc","augment","override","proto","defaultOptions","overridingOptions","optionsOverride","options","winner","loser","isDeprecated","logger","defaultValue","str_utf8_length","encodeURIComponent","generateFakeSDP","body","isFunction","isDecimal","num","createRandomToken","size","token","newTag","UA","TAG_LENGTH","newUUID","hostType","host","host_type","normalizeTarget","domain","target_array","target_user","target_domain","URI","escapeUser","user","decodeURIComponent","headerize","exceptions","hname","sipErrorCause","status_code","cause","SIP_ERROR_CAUSES","causes","SIP_FAILURE_CODE","getReasonPhrase","specific","REASON_PHRASE","getReasonHeaderValue","reason","getCancelReason","buildStatusLine","getRandomTestNetIP","from","to","floor","levels","level","builtinEnabled","connector","loggers","getLogger","Logger","category","print","content","Date","targetName","NodeEventEmitter","_events","_maxListeners","isObject","isUndefined","defaultMaxListeners","setMaxListeners","emit","er","handler","len","listeners","Array","addListener","listener","newListener","warned","trace","once","fired","g","removeListener","list","position","removeAllListeners","listenerCount","evlistener","emitter","USER_AGENT","SIPS","CONNECTION_ERROR","REQUEST_TIMEOUT","INTERNAL_ERROR","BUSY","REJECTED","REDIRECTED","UNAVAILABLE","NOT_FOUND","ADDRESS_INCOMPLETE","INCOMPATIBLE_SDP","AUTHENTICATION_ERROR","DIALOG_ERROR","WEBRTC_NOT_SUPPORTED","WEBRTC_ERROR","CANCELED","NO_ANSWER","EXPIRES","NO_ACK","NO_PRACK","USER_DENIED_MEDIA_ACCESS","BAD_MEDIA_DESCRIPTION","RTP_TIMEOUT","supported","UNSUPPORTED","SUPPORTED","REQUIRED","ACK","BYE","CANCEL","INFO","INVITE","MESSAGE","NOTIFY","OPTIONS","REGISTER","UPDATE","SUBSCRIBE","PUBLISH","REFER","PRACK","100","180","181","182","183","199","200","202","204","300","301","302","305","380","400","401","402","403","404","405","406","407","408","410","412","413","414","415","416","417","420","421","422","423","428","429","430","433","436","437","438","439","440","469","470","478","480","481","482","483","484","485","486","487","488","489","491","493","494","500","501","502","503","504","505","513","580","600","603","604","606","OPTION_TAGS","answermode","eventlist","explicitsub","gin","gruu","histinfo","ice","norefersub","nosub","outbound","path","policy","precondition","pref","privacy","replaces","tdialog","timer","uui","dtmfType","RTP","exception","ConfigurationError","message","status","GetDescriptionError","RenegotiationError","MethodParameterError","TransportError","SessionDescriptionHandlerError","T1","T2","T4","TIMER_B","TIMER_D","TIMER_F","TIMER_H","TIMER_I","TIMER_J","TIMER_K","TIMER_L","TIMER_M","TIMER_N","PROVISIONAL_RESPONSE_INTERVAL","connect","connectPromise","overrideEvent","isConnected","msg","sendPromise","onMessage","disconnect","disconnectPromise","afterConnected","waitForConnected","Parser","getHeader","headerStart","partialEnd","match","parseHeader","headerEnd","header","hcolonIndex","headerName","headerValue","addHeader","getHeaders","via","via_branch","branch","setHeader","from_tag","getParam","to_tag","offset","headers","call_id","cseq","IncomingResponse","refer_to","parseMessage","firstLine","contentLength","bodyStart","reason_phrase","IncomingRequest","ruri","hasHeader","OutgoingRequest","IncomingMessage","getSupportedHeader","allowUnregistered","configuration","hackAllowUnregisteredOptionTags","optionTags","optionTagSet","contact","pub_gruu","temp_gruu","rel100","extraSupported","optionTag","registered","unique","extraHeaders","to_uri","from_uri","statusCode","reasonPhrase","route_set","usePreloadedRoute","transport","sip_uri","MAX_FORWARDS","to_displayName","toRaw","NameAddrHeader","from_displayName","displayName","sipjsId","regexp","userAgentString","contentType","log","server_transaction","reply","onSuccess","onFailure","rr","vias","response","v","hasParam","receiveResponse","reply_sl","scheme","normal","setParam","_normal","_raw","aor","deleteParam","clearParams","deleteHeader","clearHeaders","_toString","uriString","friendlyName","name_addr_header","STATUS_TRYING","STATUS_PROCEEDING","STATUS_CALLING","STATUS_ACCEPTED","STATUS_COMPLETED","STATUS_TERMINATED","STATUS_CONFIRMED","NON_INVITE_CLIENT","NON_INVITE_SERVER","INVITE_CLIENT","INVITE_SERVER","buildViaHeader","request_sender","hackViaTcp","viaHost","forceRport","NonInviteClientTransaction","newTransaction","stateChanged","F","timer_F","onTransportError","clearTimeout","K","destroyTransaction","debug","onRequestTimeout","timer_K","InviteClientTransaction","tr","cancel","extraHeadersString","cancel_request","B","timer_B","D","M","timer_M","timer_D","sendACK","ack","reverse","ackSender","RequestSender","applicant","onRequestTransportError","transaction","AckClientTransaction","NonInviteServerTransaction","last_response","timer_J","transportError","J","InviteServerTransaction","resendProvisionalTimer","timer_H","timer_I","timer_L","clearInterval","L","H","I","resend_provisional","setInterval","Transactions","checkTransaction","transactions","ist","nist","Dialog","STATUS_EARLY","owner","uac_pending_reply","uas_pending_reply","local_tag","remote_tag","remote_seqnum","local_uri","remote_uri","remote_target","invite_seqnum","local_seqnum","pracked","dialogs","update","terminate","sessionDescriptionHandler","createRequest","dialog","checkInDialogRequest","retryAfter","sendRequest","receiveRequest","reattempt","reattemptTimer","clientTransaction","onDialogError","Session","getReattemptTimeout","credentials","challenged","staled","STATUS_USER_CLOSED","challenge","authorization_header_name","stale","authenticationFactory","authenticate","RegisterContext","registrar","registrarServer","expires","registerExpires","instanceId","ClientContext","registrationTimer","registrationExpiredTimer","onTransportDisconnected","register","ALLOWED_METHODS","closeHeaders","closeWithHeaders","contacts","unregistered","registrationFailure","registered_before","onTransportConnected","unregister","modifiers","hasDescription","holdModifier","setDescription","sessionDescription","sendDtmf","tones","originalTarget","localIdentity","remoteIdentity","cancel_reason","applicants","ServerContext","assertedIdentity","progress","minCode","maxCode","events","accept","InviteServerContext","InviteClientContext","ReferServerContext","ReferClientContext","DTMF","STATUS_NULL","STATUS_INVITE_SENT","STATUS_1XX_RECEIVED","STATUS_INVITE_RECEIVED","STATUS_WAITING_FOR_ANSWER","STATUS_ANSWERED","STATUS_WAITING_FOR_PRACK","STATUS_WAITING_FOR_ACK","STATUS_CANCELED","STATUS_ANSWERED_WAITING_FOR_PRACK","STATUS_EARLY_MEDIA","sessionDescriptionHandlerFactory","pendingReinvite","earlyDialogs","SessionDescriptionHandlerMissing","hasOffer","hasAnswer","ackTimer","expiresTimer","invite2xxTimer","userNoAnswerTimer","rel1xxTimer","prackTimer","startTime","endTime","local_hold","early_sdp","dtmf","dtmfs","sendDTMF","timeout","duration","interToneGap","bye","terminated","refer","referContext","receiveNonInviteResponse","errorListener","sessions","createDialog","early","early_dialog","dia","hold","sendReinvite","unhold","reinvite","receiveReinvite","sessionDescriptionHandlerOptions","setACKTimer","receiveReinviteResponse","onInfo","tone","reg_tone","reg_duration","init_incoming","followRefer","passedOptions","inviteOptions","receiveNotify","acceptAndTerminate","setInvite2xxTimer","invite2xxRetransmission","canceled","accepted","replacee","contentDisp","set100rel","h","renderbody","rendertype","noAnswerTimeout","isCanceled","do100rel","rel1xxRetransmission","setupSessionDescriptionHandler","descriptionCreationSucceeded","descriptionCreationFailed","confirmSession","sessionDescriptionHandlerFactoryOptions","inviteWithoutSdp","anonymous","received_100","receiveInviteResponse","invite","session","cancelReason","earlyDialog","earlyMedia","modifers","search","messageBody","activeAfterTransfer","referTo","referredSession","findSession","tag","Contact","referredBy","targetSession","sendNotify","referFailed","MIN_DURATION","MAX_DURATION","abs","DEFAULT_DURATION","MIN_INTER_TONE_GAP","DEFAULT_INTER_TONE_GAP","originator","Subscription","requestedExpires","N","sub_duration","errorCodes","subscribe","refresh","timer_fire","earlySubscriptions","INVALID_EXPIRES_HEADER","EXPIRES_HEADER_MISSING","unsubscribe","terminateDialog","subscriptions","createConfirmedDialog","sub_state","sub","setExpiresTimeout","max","matchEvent","REASON_200","PublishContext","Number","unpublishOnClose","pubRequestBody","pubRequestExpires","pubRequestEtag","publish_refresh_timer","publish","publishers","sendPublishRequest","unpublish","reqOptions","minExpires","STATUS_INIT","STATUS_STARTING","STATUS_READY","STATUS_NOT_READY","CONFIGURATION_ERROR","NETWORK_ERROR","ACCEPTED_BODY_TYPES","checkAuthenticationFactory","Function","initialize","selfEmit","cache","nict","ict","transactionsCount","count","nictTransactionsCount","nistTransactionsCount","ictTransactionsCount","istTransactionsCount","loadConfig","registerContext","autostart","isRegistered","pub","req","subscription","publisher","transactionsListener","chrome","app","environListener","transportConstructor","transportOptions","setTransportListeners","autostop","hostportParams","saveCredentials","realm","getCredentials","onTransportReceiveMsg","sanityCheck","earlySubscription","replacedDialog","ruriMatches","content_type","findDialog","findEarlySubscription","replaces_to_tag","replaces_from_tag","early_only","allowLegacyNotifications","allowOutOfDialogRefers","checked_value","settings","custom","hackIpInContact","hackWssInTransport","constraints","peerConnectionOptions","contactName","contactTransport","defaultFactory","aliasUnderscored","underscored","hasParameter","configCheck","getConfigurationCheck","authorizationUser","skeleton","eval","STATUS_CONNECTING","STATUS_OPEN","STATUS_CLOSING","STATUS_CLOSED","WebSocket","ws","connectionPromise","connectDeferredResolve","connectionTimeout","disconnectionPromise","disconnectDeferredResolve","boundOnOpen","boundOnMessage","boundOnClose","boundOnError","reconnectionAttempts","reconnectTimer","keepAliveInterval","keepAliveDebounceTimeout","statusAssert","force","onError","traceSip","statusTransition","stopSendingKeepAlives","ws_uri","getNextWsServer","disposeWs","onOpen","onClose","startSendingKeepAlives","reconnect","clearKeepAliveTimeout","fromCharCode","Uint8Array","noAvailableServers","resetServerErrorStatus","maxReconnectionAttempts","isError","reconnectionTimeout","wsServers","wsServer","candidates","weight","sendKeepAlive","keepAliveDebounce","upperBound","lowerBound","observer","dtmfSender","shouldAcquireMedia","CONTENT_TYPE","DIRECTION","NULL","SENDRECV","SENDONLY","RECVONLY","INACTIVE","isArray","WebRTC","getUserMedia","mediaDevices","iceGatheringDeferred","iceGatheringTimeout","iceGatheringTimer","initPeerConnection","checkAndDefaultConstraints","peerConnection","resetIceGatheringComplete","newConstraints","acquire","createOfferOrAnswer","RTCOfferOptions","_this","alwaysAcquireMediaFirst","modifiedDescription","disableAudioFallback","stripVideo","hasBrowserGetSenderSupport","senders","hasBrowserTrackSupport","audioTracks","createDTMFSender","insertDTMF","methodName","createRTCSessionDescriptionInit","waitForIceGatheringComplete","localDescription","setDirection","addDefaultIceCheckingTimeout","iceCheckingTimeout","addDefaultIceServers","rtcConfiguration","defaultConstraints","audio","video","trackAdded","triggerIceGatheringComplete","stateEvent","where","offerState","isIceGatheringComplete","directionChanged","isIceGatheringDeferred","SessionDescriptionHandlerObserver","requests","responses","fromTag","mandatoryHeaders","md5","cnonce","nc","ncHex","nonce","opaque","qop","updateNcHex","calculateResponse","ha1","ha2","auth_params","hex","CryptoJS","C_lib","lib","WordArray","Hasher","C_algo","algo","T","sin","MD5","extend","_doReset","_hash","init","_doProcessBlock","offset_i","M_offset_i","words","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","a","b","FF","GG","HH","II","_doFinalize","_data","dataWords","nBitsTotal","_nDataBytes","nBitsLeft","sigBytes","nBitsTotalH","nBitsTotalL","_process","hash","H_i","x","_createHelper","HmacMD5","_createHmacHelper","subtype","Base","overrides","mixIn","$super","properties","propertyName","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","nBytes","rcache","m_w","m_z","mask","_r","C_enc","enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","charCodeAt","Utf8","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_append","doFlush","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","processedWords","cfg","messageUpdate","finalize","hasher","HMAC","input","startRule","peg$SyntaxError","expected","found","location","captureStackTrace","child","parent","ctor","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","escapedParts","classEscape","inverted","any","other","ch","descriptions","sort","describeExpected","describeFound","SyntaxError","peg$result","peg$FAILED","peg$startRuleIndices","Name_Addr_Header","Record_Route","Request_Response","SIP_URI","Subscription_State","Supported","Require","Via","absoluteURI","Call_ID","Content_Disposition","Content_Length","Content_Type","CSeq","From","Max_Forwards","Min_SE","Proxy_Authenticate","quoted_string","Refer_To","Replaces","Session_Expires","stun_URI","To","turn_URI","uuid","WWW_Authenticate","sipfrag","Referred_By","peg$startRuleIndex","peg$consts","peg$literalExpectation","peg$classExpectation","contents","uri_params","uri_headers","uri_scheme","ttl","maddr","hvalue","sip_version","multi_header","peg$currPos","q","delta_seconds","cseq_value","event_type","forwards","min_expires","qop_value","rack_value","head","tail","rseq_value","retry_after","via_ttl_value","via_maddr","via_received","received","response_port","rport","via_protocol","via_transport","via_sent_by_port","deltaSeconds","endpoint","refresher","peg$bytecode","peg$decode","peg$savedPos","peg$posDetailsCache","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$buildStructuredError","bc","peg$parseRule","ips","ends","stack","pop","stripPayload","payload","current_media_desc","media_descs","stripped","rtpmap","stripTcpCandidates","stripTelephoneEvent","cleanJitsiSdpImageattr","stripG722","stripRtpPayload","descriptionRegExp","groupRegExp","midLineToRemove_1","groupLine","section","groupRegExpReplace","stripMediaDescription","addMidLines","mlines_1","elem","STATUS_NEW","STATUS_CONNECTED","remote","browserUa","isSafari","isFirefox","setupSession","destination","checkRegistration","autoplay","local","volume","hangup","mute","unmute","toggleMute","setupRemoteMedia","remoteStream","srcObject","play","setupLocalMedia","localStream","cleanupMedia","pause","onProgress","onAccepted","onEnded","onFailed","destroyMedia","toplevel","getPrefixedProperty","capitalizedName","prefixedNames","open","ActionCable","INTERNAL","createConsumer","ref","getConfig","default_mount_path","Consumer","createWebSocketURL","querySelector","getAttribute","createElement","href","startDebugging","debugging","stopDebugging","messages","now","me","ConnectionMonitor","secondsSince","connection","visibilityDidChange","reconnectAttempts","pollInterval","staleThreshold","isRunning","startedAt","stoppedAt","startPolling","getPollInterval","stopPolling","recordPing","pingedAt","recordConnect","disconnectedAt","recordDisconnect","poll","pollTimeout","reconnectIfStale","interval","round","connectionIsStale","disconnectedRecently","reopen","visibilityState","isOpen","getTime","time","number","message_types","protocols","supportedProtocols","Connection","consumer","monitor","reopenDelay","webSocket","isActive","getState","uninstallEventHandlers","installEventHandlers","ref1","allowReconnect","error1","getProtocol","isState","isProtocolSupported","readyState","identifier","welcome","reload","ping","confirmation","notify","rejection","notifyAll","willAttemptReconnect","Subscriptions","channelName","mixin","channel","add","ensureActiveConnection","sendCommand","remove","forget","findAll","callbackName","command","perform","_setPrototypeOf","webpackPolyfill","deprecate","paths","children","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","mark","awrap","async","iter","skipTempReset","prev","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","_arr","_n","_d","_e","_s","_i","arr2","ComApi","users","_handleError","fetch","Request","ok","json","form","namespace","fd","FormData","formKey","File","append","_objectToFormData","_request","formData","userId","cachedUser","apiUser","extendedUser","addUserAttributes","largeAvatarUrl","avatar","apiId","sipId","sip","largeAvatar","_post","email","player_url","playerUrl","stream_url","streamUrl","_put","playback","play_id","func","wait","previous","later","leading","remaining","trailing","BaseEvent","StartPlaybackEvent","_api","startPlayback","StopPlaybackEvent","stopPlayback","PublicEvent","_src","deleteProperty","StartAnnotationEvent","annotationLoop","createAnnotation","annotation","StopAnnotationEvent","stopAnnotation","StfuEvent","_rtConnection","IgnoreEvent","ForwardEvent","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","wrapPeerConnectionEvent","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","cb","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","disableLog","bool","disableWarnings","deprecated","oldMethod","newMethod","detectBrowser","mozGetUserMedia","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","supportsUnifiedPlan","RTCRtpTransceiver","compactObject","isObj","isEmptyObject","filterStats","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","walkStats","resultSet","has","endsWith","shimGetUserMedia","browserDetails","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","origGetUserMedia","cs","DOMException","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","_ontrackpoly","te","shimGetSendersWithDtmf","shimSenderWithDtmf","_dtmf","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","shimGetStats","origGetStats","onSucc","onErr","fixChromeStats_","standardReport","report","standardStats","timestamp","names","makeMapStats","successCallbackWrapper_","shimSenderReceiverGetStats","origGetReceivers","receivers","srcElement","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replaceExternalStreamId","alreadyExists","oldStream","methodObj","origSetLocalDescription","origLocalDescription","streamid","shimPeerConnection","RTCIceCandidate","nativeAddIceCandidate","fixNegotiationNeeded","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","validTurn","startsWith","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","origCreateOffer","origCreateAnswer","successCallback","failureCallback","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","addTransceiver","videoTransceiver","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","sdpSemantics","canSendMMS","remoteMMS","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","byteLength","origCreateDataChannel","createDataChannel","dataChannel","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","removeAllowExtmapMixed","nativeSRD","fallbackStorage","hasLocalStorage","shimChrome","shimFirefox","shimEdge","shimSafari","logging","adapter","commonShim","browserShim","adapterFactory","FullscreenHelper","onChange","hasSupport","canMix","canPip","hasPipSupport","canSFU","isPhone","inIframe","canUseEyeson","canFullscreen","hasMobileDevice","canToggleCamera","canPresentFiles","canScreenCapture","canAdjustSettings","canAdjustDeviceSettings","isExperimentalBrowser","isWebView","hasGetUserMedia","hasPeerConnection","isRecentBrowser","hasGetDisplayMedia","isChrome","isRecentChrome","isFF","isRecentFF","isEdge","isRecentEdge","isRecentSafari","hasCaptureStream","HTMLMediaElement","hasCanvasCaptureSupport","hasSenders","hasTrackOnUnmute","hasWebpSupport","canChangeAudioOutput","canChangeMicrophone","isTestSuite","canChangeCamera","isIOSDevice","requiresLowerConstraints","browserName","txt","browserVersion","webkitSupportsPresentationMode","isAndroidDevice","isIPhone","isAndroidPhone","isAndroid","isMobile","top","isTouchDevice","maxTouchPoints","canLiveStreamToFacebook","canDisplayTooltips","stopsDeviceActivityIndicatorOnDisable","supportsBlurOnSVG","SVGElement","blur","localStorage","setItem","canGet","getItem","safariWithoutVP8","canShare","share","NinjaStream","_stream","createStream","canvas","getContext","fillRect","captureStream","FeatureDetector","store","load","defaultValueParam","storedValue","CanvasMedia","CanvasCaptureMediaStream","CanvasCaptureMediaStreamTrack","hasAudio","hasVideo","disableAudio","enableAudio","stopTrack","stopStream","isScreenTrack","isCanvasTrack","isCameraTrack","getScreenTracks","getCameraTracks","stopCamera","disableCamera","enableCamera","toggleCamera","getCanvasTracks","isScreenStream","isCanvasStream","isCameraStream","isCanvasPresentationStream","isPresentationStream","hasCameraVideo","requestFrame","DeviceManager","sinkId","eco","cameras","speakers","microphones","terminationInProgress","getSinkId","setStream","handleError","verifyStream","storeConstraints","adjustAudioTrack","watchForNewDevices","fetchDevices","getConstraints","ondevicechange","LocalStorage","videoConstraints","audioConstraints","res","optionsParam","getDevices","determineConstraintsForDevices","videoDeviceId","device","audioDeviceId","MediaStreamBuilder","screen","existingStream","getMediaStream","addNinjaTrack","addCanvasTrack","addScreenTrack","adjustVideoTrack","audioStream","fetchInputDevices","getMobileConstraints","vTrack","canvasStream","canvasTrack","screenStream","screenTrack","fillerTrack","ChangeLocalStreamEvent","_session","adjustedStream","locallyChanged","adjustMediaStreamTracks","PodiumEvent","hasPresenter","scanMessageForLocalStreamOptimization","isSource","isPresenter","hasDesktopSources","SnapshotEvent","takeSnapshot","SetLayerEvent","setLayer","SendChatEvent","SetLayoutEvent","setLayout","PodiumFacade","src","psrc","asrc","vsrc","dsrc","sources","presenterIdx","audioSources","videoSources","desktopSources","userSourceIndex","Set","presenter","source","SipMessageTransformer","opts","stamp","sourceUpdate","voiceActivity","source_update","voice_activity","podium","solo","isSolo","hasAudioPosition","hasVideoPosition","hasMedia","hasVideoSources","hasMutedVideoPeers","cid","RTCConstraints","remoteDescriptionUpdate","peerConnectionClosed","stopAllTracks","buildPeerConnectionOptions","onIceCompleted","resolveIceCompleted","rejectIceCompleted","handleOntrack","gotIceCandidate","handleNegotiation","startIceCheckingTimer","onunmute","handleUnmute","handleAccept","iceCheckingTimer","tmp","stunServers","turnServers","urlWithoutProtocol","credential","sdpModifiers","modifier","getLocalStream","audioTrack","videoTrack","audioSender","videoSender","rtp","factoryOptions","SipConnection","room","_room","uaOptions","adjustUserAgentOptions","transformer","WHITELIST","transformedMessage","RoomReceived","rtData","ready","links","_eyeson","_connection","connectionStatus","startSipConnection","FetchRoomEvent","getRoom","DeleteFileEvent","deleteFile","file","UploadFileEvent","uploadFile","addFile","ReceiveChatEvent","getUser","forwardMessage","ts","created_at","StopYouTubeEvent","stopBroadcast","StartStreamEvent","ChangeStreamEvent","canvasMixer","errror","ToggleCameraEvent","StartYouTubeEvent","startBroadcast","StopFacebookEvent","AcceptSessionEvent","getRemoteStream","StartFacebookEvent","StopRecordingEvent","stopRecording","VoiceActivityEvent","StartRecordingEvent","startRecording","ScreenCaptureEvent","StartPresentingEvent","presentationStream","StopPresentingEvent","StopBroadcastsEvent","stopAllBroadcasts","ClearFrontLayerEvent","clearFrontLayer","PublishBroadcastEvent","publishBroadcast","RequestGuestUserEvent","api","requestUser","access_key","HandleStreamOfferEvent","HandleStreamAnswerEvent","ParticipantListUpdateEvent","initial","addition","del","playing","toFixedNumber","scale","ratio","immediate","callNow","FPS_INTERVAL","CAMERA_SMALL","CAMERA_MEDIUM","CAMERA_LARGE","CAMERA_NONE","defaultTrack","bindVideoToStream","setAttribute","CanvasMixer","xPos","camSize","draw","onRedraw","setCamera","drawFrame","calcSizesAndPositions","bouncedDraw","debounce","errorCallback","redrawCallback","camera","horizontal","vertical","cameraStream","redrawQueued","cameraPosition","cameraSizeInWords","fitScreen","sourceAspectRatio","targetAspectRatio","y","fitImage","small","medium","large","none","scaledCam","sizes","camPosition","positions","active","t0","performance","t1","clearRect","drawImage","imgData","createImageData","putImageData","StartMixerEvent","changeStream","UpdateMixerEvent","EventHandler","_monitor","destroy","silenced","stfu","chat","snapshot","send_chat","set_layer","set_layout","fetch_room","room_ready","RoomReceivedEvent","room_setup","memberlist","upload_file","delete_file","request_stfu","stream_offer","stop_youtube","stream_answer","start_youtube","change_stream","toggle_camera","stop_facebook","stop_playback","playback_update","start_playback","start_stream","start_facebook","stop_recording","start_screen_capture","StartScreenCaptureEvent","stop_broadcasts","start_recording","stop_presenting","start_presenting","stop_annotation","start_annotation","publish_broadcast","clear_front_layer","request_guest_user","voice_activity_raw","start_mixer","update_mixer","capture_error","options_update","ext_not_installed","broadcasts_update","facebook_logged_in","facebook_published","presentation_ended","handle_youtube_error","handle_facebook_error","status_update_youtube","recording","ext_cancel","ext_installed","message_status","moderator_info","con","mon","ses","onEvent","_rtData","eyeson","SDPModifiers","splitSDP","tLineIdx","findIndex","ConferenceSession","defaultRTCConstraints","startAttempts","maxStartAttempts","endSession","handleExit","initSession","handleFailed","restartSession","tryRecoveryFrom","terminateSession","adjustVideoPodium","buildSessionOptions","sipSession","startSession","handleTermination","observe","sdpWrapper","sfu","sfuLine","Forbidden","NotFoundError","NotAllowedError","NotReadableError","1006","failure","recovery","condition","prevIceState","onOffline","handleIceStateChange","handleConnectionStateChange","addEventListeners","errorHandler","currentTarget","currentIceState","ActionCableConnection","onMessageHandler","onReceived","offMessage","onConnected","onDisconnected","cable","disconnectTimestamp","handleReconnect","core","eventHandler","updateStatus","joinSession","mediaOptions","setMonitor","broadcasts","keepRoomAlive","prepareConnection","comApi","counter","rtConnection","websocket","pollingFallbackInterval","youtube","client","onReceive","offEvent","joinOnConnect","throttledSend","_throttledSend","throttle","GiphyApi","roomUrl","query","staff","staffGifs","rej","img","images","original_mp4","mp4_size","largerGifs","API_URL","YouTubeApi","apiKey","clientId","activated","broadcastId","activate","getStream","deactivate","startStream","insertStream","insertBroadcast","createLiveStream","cleanupBroadcast","initGoogleApi","gapi","ga","onload","handleClientLoad","appendChild","initClient","scope","auth2","getAuthInstance","signIn","prompt","toDateString","snippet","getDefaultTitle","scheduledStartTime","toISOString","privacyStatus","cdn","resolution","ingestionType","broadcastStatus","resp","bindBroadcast","waitForStatus","transitionBroadcast","getBroadcast","items","liveStreamingDetails","concurrentViewers","responseBody","ingestionInfo","ingestionAddress","streamName","desiredStatus","intervalCnt","statusObj","streamStatus","lifeCycleStatus","health","healthStatus","errors","deleteableBroadcastStates","listBroadcast","deleteBroadcast","LOAD_ERRORS","FacebookApi","facebook","permalLinkUrl","sendStop","loggedIn","fetchLink","streamPublished","initFacebookApi","js","fjs","FB","fbAsyncInit","appId","xfbml","autoLogAppEvents","AppEvents","logPageView","getElementsByTagName","getElementById","parentNode","insertBefore","ui","display","phase","broadcast_data","login","getError","error_message","secure_stream_url","authResponse","userID","permalink_url","SoundMeter","instant","intervalCounter","silenceDuration","offUpdate","AudioContext","webkitAudioContext","onstatechange","script","createScriptProcessor","onaudioprocess","inputBuffer","getChannelData","sum","current","sqrt","mic","createMediaStreamSource","audioMeterInterval","readInterval","readAudioLevel","updateInterval","audioLevel","diff"],"mappings":"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","file":"eyeson.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"eyeson\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"eyeson\"] = factory();\n\telse\n\t\troot[\"eyeson\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","module.exports = require(\"regenerator-runtime\");\n","/*!\n* screenfull\n* v5.0.0 - 2019-09-09\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tPromise.resolve(element[fn.requestFullscreen]()).catch(reject);\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tPromise.resolve(document[fn.exitFullscreen]()).catch(reject);\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","/*!\n * Platform.js <https://mths.be/platform>\n * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>\n * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>\n * Available under MIT license <https://mths.be/mit>\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': 'Edge' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Waterfox',\n      'WebPositive',\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chrome',\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : '8');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n       * \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    define(function() {\n      return platform;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n","/*!\n * \n *  SIP version 0.11.6\n *  Copyright (c) 2014-2018 Junction Networks, Inc <http://www.onsip.com>\n *  Homepage: https://sipjs.com\n *  License: https://sipjs.com/license/\n * \n * \n *  ~~~SIP.js contains substantial portions of JsSIP under the following license~~~\n *  Homepage: http://jssip.net\n *  Copyright (c) 2012-2013 José Luis Millán - Versatica <http://www.versatica.com>\n * \n *  Permission is hereby granted, free of charge, to any person obtaining\n *  a copy of this software and associated documentation files (the\n *  \"Software\"), to deal in the Software without restriction, including\n *  without limitation the rights to use, copy, modify, merge, publish,\n *  distribute, sublicense, and/or sell copies of the Software, and to\n *  permit persons to whom the Software is furnished to do so, subject to\n *  the following conditions:\n * \n *  The above copyright notice and this permission notice shall be\n *  included in all copies or substantial portions of the Software.\n * \n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * \n *  ~~~ end JsSIP license ~~~\n * \n * \n * \n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SIP\"] = factory();\n\telse\n\t\troot[\"SIP\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = __webpack_require__(1)(__webpack_require__(40));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * @name SIP\n * @namespace\n */\n\nmodule.exports = function (environment) {\n    var pkg = __webpack_require__(2), version = pkg.version, title = pkg.title;\n    var SIP = Object.defineProperties({}, {\n        version: {\n            get: function () { return version; }\n        },\n        name: {\n            get: function () { return title; }\n        }\n    });\n    __webpack_require__(3)(SIP, environment);\n    SIP.LoggerFactory = __webpack_require__(4)(environment.console);\n    SIP.EventEmitter = __webpack_require__(5)();\n    SIP.C = __webpack_require__(7)(SIP.name, SIP.version);\n    SIP.Exceptions = __webpack_require__(8);\n    SIP.Timers = __webpack_require__(9)(environment.timers);\n    SIP.Transport = __webpack_require__(10)(SIP);\n    __webpack_require__(11)(SIP);\n    __webpack_require__(12)(SIP);\n    __webpack_require__(13)(SIP);\n    __webpack_require__(14)(SIP);\n    __webpack_require__(15)(SIP);\n    __webpack_require__(16)(SIP);\n    __webpack_require__(18)(SIP);\n    __webpack_require__(19)(SIP);\n    SIP.SessionDescriptionHandler = __webpack_require__(20)(SIP.EventEmitter);\n    __webpack_require__(21)(SIP);\n    __webpack_require__(22)(SIP);\n    __webpack_require__(23)(SIP);\n    __webpack_require__(25)(SIP);\n    __webpack_require__(26)(SIP);\n    __webpack_require__(27)(SIP, environment);\n    __webpack_require__(32)(SIP);\n    SIP.DigestAuthentication = __webpack_require__(33)(SIP.Utils);\n    SIP.Grammar = __webpack_require__(36)(SIP);\n    SIP.Web = {\n        Modifiers: __webpack_require__(38)(SIP),\n        Simple: __webpack_require__(39)(SIP)\n    };\n    return SIP;\n};\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module) {\n\nmodule.exports = {\"name\":\"sip.js\",\"title\":\"SIP.js\",\"description\":\"A simple, intuitive, and powerful JavaScript signaling library\",\"version\":\"0.11.6\",\"main\":\"dist/sip.js\",\"browser\":{\"./src/environment.js\":\"./src/environment_browser.js\"},\"homepage\":\"https://sipjs.com\",\"author\":\"OnSIP <developer@onsip.com> (https://sipjs.com/aboutus/)\",\"contributors\":[{\"url\":\"https://github.com/onsip/SIP.js/blob/master/THANKS.md\"}],\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/onsip/SIP.js.git\"},\"keywords\":[\"sip\",\"websocket\",\"webrtc\",\"library\",\"javascript\"],\"devDependencies\":{\"awesome-typescript-loader\":\"^5.2.1\",\"eslint\":\"^5.4.0\",\"jasmine-core\":\"^3.2.1\",\"karma\":\"^3.0.0\",\"karma-chrome-launcher\":\"^2.2.0\",\"karma-cli\":\"^1.0.1\",\"karma-jasmine\":\"^1.1.0\",\"karma-jasmine-html-reporter\":\"^1.3.1\",\"karma-mocha-reporter\":\"^2.2.5\",\"karma-webpack\":\"^3.0.0\",\"pegjs\":\"^0.10.0\",\"pegjs-loader\":\"^0.5.4\",\"typescript\":\"^3.0.3\",\"webpack\":\"^4.19.0\",\"webpack-cli\":\"^3.0.8\"},\"engines\":{\"node\":\">=6.0\"},\"license\":\"MIT\",\"scripts\":{\"prebuild\":\"eslint src/*.js src/**/*.js\",\"build-dev\":\"webpack --progress --env.buildType dev\",\"build-prod\":\"webpack --progress --env.buildType prod\",\"copy-dist-files\":\"cp dist/sip.js dist/sip-$npm_package_version.js && cp dist/sip.min.js  dist/sip-$npm_package_version.min.js\",\"build\":\"npm run build-dev && npm run build-prod && npm run copy-dist-files\",\"browserTest\":\"sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run\",\"commandLineTest\":\"karma start --reporters mocha --browsers ChromeHeadless --single-run\",\"buildAndTest\":\"npm run build && npm run commandLineTest\",\"buildAndBrowserTest\":\"npm run build && npm run browserTest\"},\"dependencies\":{\"crypto-js\":\"^3.1.9-1\"},\"optionalDependencies\":{\"promiscuous\":\"^0.6.0\"}};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Utils\n */\nmodule.exports = function (SIP, environment) {\n    var Utils;\n    Utils = {\n        Promise: environment.Promise,\n        defer: function defer() {\n            var deferred = {};\n            deferred.promise = new Utils.Promise(function (resolve, reject) {\n                deferred.resolve = resolve;\n                deferred.reject = reject;\n            });\n            return deferred;\n        },\n        reducePromises: function reducePromises(arr, val) {\n            return arr.reduce(function (acc, fn) {\n                acc = acc.then(fn);\n                return acc;\n            }, SIP.Utils.Promise.resolve(val));\n        },\n        augment: function (object, constructor, args, override) {\n            var idx, proto;\n            // Add public properties from constructor's prototype onto object\n            proto = constructor.prototype;\n            for (idx in proto) {\n                if (override || object[idx] === undefined) {\n                    object[idx] = proto[idx];\n                }\n            }\n            // Construct the object as though it were just created by constructor\n            constructor.apply(object, args);\n        },\n        defaultOptions: function (defaultOptions, overridingOptions) {\n            defaultOptions = defaultOptions || {};\n            overridingOptions = overridingOptions || {};\n            return Object.assign({}, defaultOptions, overridingOptions);\n        },\n        optionsOverride: function (options, winner, loser, isDeprecated, logger, defaultValue) {\n            if (isDeprecated && options[loser]) {\n                logger.warn(loser + ' is deprecated, please use ' + winner + ' instead');\n            }\n            if (options[winner] && options[loser]) {\n                logger.warn(winner + ' overriding ' + loser);\n            }\n            options[winner] = options[winner] || options[loser] || defaultValue;\n        },\n        str_utf8_length: function (string) {\n            return encodeURIComponent(string).replace(/%[A-F\\d]{2}/g, 'U').length;\n        },\n        generateFakeSDP: function (body) {\n            if (!body) {\n                return;\n            }\n            var start = body.indexOf('o=');\n            var end = body.indexOf('\\r\\n', start);\n            return 'v=0\\r\\n' + body.slice(start, end) + '\\r\\ns=-\\r\\nt=0 0\\r\\nc=IN IP4 0.0.0.0';\n        },\n        isFunction: function (fn) {\n            if (fn !== undefined) {\n                return Object.prototype.toString.call(fn) === '[object Function]';\n            }\n            else {\n                return false;\n            }\n        },\n        isDecimal: function (num) {\n            return !isNaN(num) && (parseFloat(num) === parseInt(num, 10));\n        },\n        createRandomToken: function (size, base) {\n            var i, r, token = '';\n            base = base || 32;\n            for (i = 0; i < size; i++) {\n                r = Math.random() * base | 0;\n                token += r.toString(base);\n            }\n            return token;\n        },\n        newTag: function () {\n            return SIP.Utils.createRandomToken(SIP.UA.C.TAG_LENGTH);\n        },\n        // http://stackoverflow.com/users/109538/broofa\n        newUUID: function () {\n            var UUID = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n                return v.toString(16);\n            });\n            return UUID;\n        },\n        hostType: function (host) {\n            if (!host) {\n                return;\n            }\n            else {\n                host = SIP.Grammar.parse(host, 'host');\n                if (host !== -1) {\n                    return host.host_type;\n                }\n            }\n        },\n        /**\n        * Normalize SIP URI.\n        * NOTE: It does not allow a SIP URI without username.\n        * Accepts 'sip', 'sips' and 'tel' URIs and convert them into 'sip'.\n        * Detects the domain part (if given) and properly hex-escapes the user portion.\n        * If the user portion has only 'tel' number symbols the user portion is clean of 'tel' visual separators.\n        * @private\n        * @param {String} target\n        * @param {String} [domain]\n        */\n        normalizeTarget: function (target, domain) {\n            var uri, target_array, target_user, target_domain;\n            // If no target is given then raise an error.\n            if (!target) {\n                return;\n                // If a SIP.URI instance is given then return it.\n            }\n            else if (target instanceof SIP.URI) {\n                return target;\n                // If a string is given split it by '@':\n                // - Last fragment is the desired domain.\n                // - Otherwise append the given domain argument.\n            }\n            else if (typeof target === 'string') {\n                target_array = target.split('@');\n                switch (target_array.length) {\n                    case 1:\n                        if (!domain) {\n                            return;\n                        }\n                        target_user = target;\n                        target_domain = domain;\n                        break;\n                    case 2:\n                        target_user = target_array[0];\n                        target_domain = target_array[1];\n                        break;\n                    default:\n                        target_user = target_array.slice(0, target_array.length - 1).join('@');\n                        target_domain = target_array[target_array.length - 1];\n                }\n                // Remove the URI scheme (if present).\n                target_user = target_user.replace(/^(sips?|tel):/i, '');\n                // Remove 'tel' visual separators if the user portion just contains 'tel' number symbols.\n                if (/^[\\-\\.\\(\\)]*\\+?[0-9\\-\\.\\(\\)]+$/.test(target_user)) {\n                    target_user = target_user.replace(/[\\-\\.\\(\\)]/g, '');\n                }\n                // Build the complete SIP URI.\n                target = SIP.C.SIP + ':' + SIP.Utils.escapeUser(target_user) + '@' + target_domain;\n                // Finally parse the resulting URI.\n                uri = SIP.URI.parse(target);\n                return uri;\n            }\n            else {\n                return;\n            }\n        },\n        /**\n        * Hex-escape a SIP URI user.\n        * @private\n        * @param {String} user\n        */\n        escapeUser: function (user) {\n            // Don't hex-escape ':' (%3A), '+' (%2B), '?' (%3F\"), '/' (%2F).\n            return encodeURIComponent(decodeURIComponent(user)).replace(/%3A/ig, ':').replace(/%2B/ig, '+').replace(/%3F/ig, '?').replace(/%2F/ig, '/');\n        },\n        headerize: function (string) {\n            var exceptions = {\n                'Call-Id': 'Call-ID',\n                'Cseq': 'CSeq',\n                'Min-Se': 'Min-SE',\n                'Rack': 'RAck',\n                'Rseq': 'RSeq',\n                'Www-Authenticate': 'WWW-Authenticate'\n            }, name = string.toLowerCase().replace(/_/g, '-').split('-'), hname = '', parts = name.length, part;\n            for (part = 0; part < parts; part++) {\n                if (part !== 0) {\n                    hname += '-';\n                }\n                hname += name[part].charAt(0).toUpperCase() + name[part].substring(1);\n            }\n            if (exceptions[hname]) {\n                hname = exceptions[hname];\n            }\n            return hname;\n        },\n        sipErrorCause: function (status_code) {\n            var cause;\n            for (cause in SIP.C.SIP_ERROR_CAUSES) {\n                if (SIP.C.SIP_ERROR_CAUSES[cause].indexOf(status_code) !== -1) {\n                    return SIP.C.causes[cause];\n                }\n            }\n            return SIP.C.causes.SIP_FAILURE_CODE;\n        },\n        getReasonPhrase: function getReasonPhrase(code, specific) {\n            return specific || SIP.C.REASON_PHRASE[code] || '';\n        },\n        getReasonHeaderValue: function getReasonHeaderValue(code, reason) {\n            reason = SIP.Utils.getReasonPhrase(code, reason);\n            return 'SIP;cause=' + code + ';text=\"' + reason + '\"';\n        },\n        getCancelReason: function getCancelReason(code, reason) {\n            if (code && code < 200 || code > 699) {\n                throw new TypeError('Invalid status_code: ' + code);\n            }\n            else if (code) {\n                return SIP.Utils.getReasonHeaderValue(code, reason);\n            }\n        },\n        buildStatusLine: function buildStatusLine(code, reason) {\n            code = code || null;\n            reason = reason || null;\n            // Validate code and reason values\n            if (!code || (code < 100 || code > 699)) {\n                throw new TypeError('Invalid status_code: ' + code);\n            }\n            else if (reason && typeof reason !== 'string' && !(reason instanceof String)) {\n                throw new TypeError('Invalid reason_phrase: ' + reason);\n            }\n            reason = Utils.getReasonPhrase(code, reason);\n            return 'SIP/2.0 ' + code + ' ' + reason + '\\r\\n';\n        },\n        /**\n        * Generate a random Test-Net IP (http://tools.ietf.org/html/rfc5735)\n        * @private\n        */\n        getRandomTestNetIP: function () {\n            function getOctet(from, to) {\n                return Math.floor(Math.random() * (to - from + 1) + from);\n            }\n            return '192.0.2.' + getOctet(1, 254);\n        }\n    };\n    SIP.Utils = Utils;\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar levels = {\n    'error': 0,\n    'warn': 1,\n    'log': 2,\n    'debug': 3\n};\nmodule.exports = function (console) {\n    var LoggerFactory = function () {\n        var logger, level = 2, builtinEnabled = true, connector = null;\n        this.loggers = {};\n        logger = this.getLogger('sip.loggerfactory');\n        Object.defineProperties(this, {\n            builtinEnabled: {\n                get: function () { return builtinEnabled; },\n                set: function (value) {\n                    if (typeof value === 'boolean') {\n                        builtinEnabled = value;\n                    }\n                    else {\n                        logger.error('invalid \"builtinEnabled\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            },\n            level: {\n                get: function () { return level; },\n                set: function (value) {\n                    if (value >= 0 && value <= 3) {\n                        level = value;\n                    }\n                    else if (value > 3) {\n                        level = 3;\n                    }\n                    else if (levels.hasOwnProperty(value)) {\n                        level = levels[value];\n                    }\n                    else {\n                        logger.error('invalid \"level\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            },\n            connector: {\n                get: function () { return connector; },\n                set: function (value) {\n                    if (value === null || value === \"\" || value === undefined) {\n                        connector = null;\n                    }\n                    else if (typeof value === 'function') {\n                        connector = value;\n                    }\n                    else {\n                        logger.error('invalid \"connector\" parameter value: ' + JSON.stringify(value));\n                    }\n                }\n            }\n        });\n    };\n    LoggerFactory.prototype.print = function (target, category, label, content) {\n        if (typeof content === 'string') {\n            var prefix = [new Date(), category];\n            if (label) {\n                prefix.push(label);\n            }\n            content = prefix.concat(content).join(' | ');\n        }\n        target.call(console, content);\n    };\n    function Logger(logger, category, label) {\n        this.logger = logger;\n        this.category = category;\n        this.label = label;\n    }\n    Object.keys(levels).forEach(function (targetName) {\n        Logger.prototype[targetName] = function (content) {\n            this.logger[targetName](this.category, this.label, content);\n        };\n        LoggerFactory.prototype[targetName] = function (category, label, content) {\n            if (this.level >= levels[targetName]) {\n                if (this.builtinEnabled) {\n                    this.print(console[targetName], category, label, content);\n                }\n                if (this.connector) {\n                    this.connector(targetName, category, label, content);\n                }\n            }\n        };\n    });\n    LoggerFactory.prototype.getLogger = function (category, label) {\n        var logger;\n        if (label && this.level === 3) {\n            return new Logger(this, category, label);\n        }\n        else if (this.loggers[category]) {\n            return this.loggers[category];\n        }\n        else {\n            logger = new Logger(this, category);\n            this.loggers[category] = logger;\n            return logger;\n        }\n    };\n    return LoggerFactory;\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar NodeEventEmitter = __webpack_require__(6).EventEmitter;\nmodule.exports = function () {\n    // Don't use `new SIP.EventEmitter()` for inheriting.\n    // Use Object.create(SIP.EventEmitter.prototoype);\n    function EventEmitter() {\n        NodeEventEmitter.call(this);\n    }\n    EventEmitter.prototype = Object.create(NodeEventEmitter.prototype, {\n        constructor: {\n            value: EventEmitter,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n    return EventEmitter;\n};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Constants\n */\n/**\n * SIP Constants.\n * @augments SIP\n */\nmodule.exports = function (name, version) {\n    return {\n        USER_AGENT: name + '/' + version,\n        // SIP scheme\n        SIP: 'sip',\n        SIPS: 'sips',\n        // End and Failure causes\n        causes: {\n            // Generic error causes\n            CONNECTION_ERROR: 'Connection Error',\n            REQUEST_TIMEOUT: 'Request Timeout',\n            SIP_FAILURE_CODE: 'SIP Failure Code',\n            INTERNAL_ERROR: 'Internal Error',\n            // SIP error causes\n            BUSY: 'Busy',\n            REJECTED: 'Rejected',\n            REDIRECTED: 'Redirected',\n            UNAVAILABLE: 'Unavailable',\n            NOT_FOUND: 'Not Found',\n            ADDRESS_INCOMPLETE: 'Address Incomplete',\n            INCOMPATIBLE_SDP: 'Incompatible SDP',\n            AUTHENTICATION_ERROR: 'Authentication Error',\n            DIALOG_ERROR: 'Dialog Error',\n            // Session error causes\n            WEBRTC_NOT_SUPPORTED: 'WebRTC Not Supported',\n            WEBRTC_ERROR: 'WebRTC Error',\n            CANCELED: 'Canceled',\n            NO_ANSWER: 'No Answer',\n            EXPIRES: 'Expires',\n            NO_ACK: 'No ACK',\n            NO_PRACK: 'No PRACK',\n            USER_DENIED_MEDIA_ACCESS: 'User Denied Media Access',\n            BAD_MEDIA_DESCRIPTION: 'Bad Media Description',\n            RTP_TIMEOUT: 'RTP Timeout'\n        },\n        supported: {\n            UNSUPPORTED: 'none',\n            SUPPORTED: 'supported',\n            REQUIRED: 'required'\n        },\n        SIP_ERROR_CAUSES: {\n            REDIRECTED: [300, 301, 302, 305, 380],\n            BUSY: [486, 600],\n            REJECTED: [403, 603],\n            NOT_FOUND: [404, 604],\n            UNAVAILABLE: [480, 410, 408, 430],\n            ADDRESS_INCOMPLETE: [484],\n            INCOMPATIBLE_SDP: [488, 606],\n            AUTHENTICATION_ERROR: [401, 407]\n        },\n        // SIP Methods\n        ACK: 'ACK',\n        BYE: 'BYE',\n        CANCEL: 'CANCEL',\n        INFO: 'INFO',\n        INVITE: 'INVITE',\n        MESSAGE: 'MESSAGE',\n        NOTIFY: 'NOTIFY',\n        OPTIONS: 'OPTIONS',\n        REGISTER: 'REGISTER',\n        UPDATE: 'UPDATE',\n        SUBSCRIBE: 'SUBSCRIBE',\n        PUBLISH: 'PUBLISH',\n        REFER: 'REFER',\n        PRACK: 'PRACK',\n        /* SIP Response Reasons\n         * DOC: http://www.iana.org/assignments/sip-parameters\n         * Copied from https://github.com/versatica/OverSIP/blob/master/lib/oversip/sip/constants.rb#L7\n         */\n        REASON_PHRASE: {\n            100: 'Trying',\n            180: 'Ringing',\n            181: 'Call Is Being Forwarded',\n            182: 'Queued',\n            183: 'Session Progress',\n            199: 'Early Dialog Terminated',\n            200: 'OK',\n            202: 'Accepted',\n            204: 'No Notification',\n            300: 'Multiple Choices',\n            301: 'Moved Permanently',\n            302: 'Moved Temporarily',\n            305: 'Use Proxy',\n            380: 'Alternative Service',\n            400: 'Bad Request',\n            401: 'Unauthorized',\n            402: 'Payment Required',\n            403: 'Forbidden',\n            404: 'Not Found',\n            405: 'Method Not Allowed',\n            406: 'Not Acceptable',\n            407: 'Proxy Authentication Required',\n            408: 'Request Timeout',\n            410: 'Gone',\n            412: 'Conditional Request Failed',\n            413: 'Request Entity Too Large',\n            414: 'Request-URI Too Long',\n            415: 'Unsupported Media Type',\n            416: 'Unsupported URI Scheme',\n            417: 'Unknown Resource-Priority',\n            420: 'Bad Extension',\n            421: 'Extension Required',\n            422: 'Session Interval Too Small',\n            423: 'Interval Too Brief',\n            428: 'Use Identity Header',\n            429: 'Provide Referrer Identity',\n            430: 'Flow Failed',\n            433: 'Anonymity Disallowed',\n            436: 'Bad Identity-Info',\n            437: 'Unsupported Certificate',\n            438: 'Invalid Identity Header',\n            439: 'First Hop Lacks Outbound Support',\n            440: 'Max-Breadth Exceeded',\n            469: 'Bad Info Package',\n            470: 'Consent Needed',\n            478: 'Unresolvable Destination',\n            480: 'Temporarily Unavailable',\n            481: 'Call/Transaction Does Not Exist',\n            482: 'Loop Detected',\n            483: 'Too Many Hops',\n            484: 'Address Incomplete',\n            485: 'Ambiguous',\n            486: 'Busy Here',\n            487: 'Request Terminated',\n            488: 'Not Acceptable Here',\n            489: 'Bad Event',\n            491: 'Request Pending',\n            493: 'Undecipherable',\n            494: 'Security Agreement Required',\n            500: 'Internal Server Error',\n            501: 'Not Implemented',\n            502: 'Bad Gateway',\n            503: 'Service Unavailable',\n            504: 'Server Time-out',\n            505: 'Version Not Supported',\n            513: 'Message Too Large',\n            580: 'Precondition Failure',\n            600: 'Busy Everywhere',\n            603: 'Decline',\n            604: 'Does Not Exist Anywhere',\n            606: 'Not Acceptable'\n        },\n        /* SIP Option Tags\n         * DOC: http://www.iana.org/assignments/sip-parameters/sip-parameters.xhtml#sip-parameters-4\n         */\n        OPTION_TAGS: {\n            '100rel': true,\n            199: true,\n            answermode: true,\n            'early-session': true,\n            eventlist: true,\n            explicitsub: true,\n            'from-change': true,\n            'geolocation-http': true,\n            'geolocation-sip': true,\n            gin: true,\n            gruu: true,\n            histinfo: true,\n            ice: true,\n            join: true,\n            'multiple-refer': true,\n            norefersub: true,\n            nosub: true,\n            outbound: true,\n            path: true,\n            policy: true,\n            precondition: true,\n            pref: true,\n            privacy: true,\n            'recipient-list-invite': true,\n            'recipient-list-message': true,\n            'recipient-list-subscribe': true,\n            replaces: true,\n            'resource-priority': true,\n            'sdp-anat': true,\n            'sec-agree': true,\n            tdialog: true,\n            timer: true,\n            uui: true // RFC 7433\n        },\n        dtmfType: {\n            INFO: 'info',\n            RTP: 'rtp'\n        }\n    };\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Exceptions\n */\n/**\n * SIP Exceptions.\n * @augments SIP\n */\nmodule.exports = {\n    ConfigurationError: (function () {\n        var exception = function (parameter, value) {\n            this.code = 1;\n            this.name = 'CONFIGURATION_ERROR';\n            this.parameter = parameter;\n            this.value = value;\n            this.message = (!this.value) ? 'Missing parameter: ' + this.parameter : 'Invalid value ' + JSON.stringify(this.value) + ' for parameter \"' + this.parameter + '\"';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    InvalidStateError: (function () {\n        var exception = function (status) {\n            this.code = 2;\n            this.name = 'INVALID_STATE_ERROR';\n            this.status = status;\n            this.message = 'Invalid status: ' + status;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    NotSupportedError: (function () {\n        var exception = function (message) {\n            this.code = 3;\n            this.name = 'NOT_SUPPORTED_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    // Deprecated\n    GetDescriptionError: (function () {\n        var exception = function (message) {\n            this.code = 4;\n            this.name = 'GET_DESCRIPTION_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    RenegotiationError: (function () {\n        var exception = function (message) {\n            this.code = 5;\n            this.name = 'RENEGOTIATION_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    MethodParameterError: (function () {\n        var exception = function (method, parameter, value) {\n            this.code = 6;\n            this.name = 'METHOD_PARAMETER_ERROR';\n            this.method = method;\n            this.parameter = parameter;\n            this.value = value;\n            this.message = (!this.value) ? 'Missing parameter: ' + this.parameter : 'Invalid value ' + JSON.stringify(this.value) + ' for parameter \"' + this.parameter + '\"';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    TransportError: (function () {\n        var exception = function (message) {\n            this.code = 7;\n            this.name = 'TRANSPORT_ERROR';\n            this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n    SessionDescriptionHandlerError: (function () {\n        var exception = function (method, error, message) {\n            this.code = 8;\n            this.name = 'SESSION_DESCRIPTION_HANDLER_ERROR';\n            this.method = method;\n            this.error = error;\n            this.message = message || 'Error with Session Description Handler';\n        };\n        exception.prototype = new Error();\n        return exception;\n    }()),\n};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP TIMERS\n */\n/**\n * @augments SIP\n */\nvar T1 = 500, T2 = 4000, T4 = 5000;\nmodule.exports = function (timers) {\n    var Timers = {\n        T1: T1,\n        T2: T2,\n        T4: T4,\n        TIMER_B: 64 * T1,\n        TIMER_D: 0 * T1,\n        TIMER_F: 64 * T1,\n        TIMER_H: 64 * T1,\n        TIMER_I: 0 * T1,\n        TIMER_J: 0 * T1,\n        TIMER_K: 0 * T4,\n        TIMER_L: 64 * T1,\n        TIMER_M: 64 * T1,\n        TIMER_N: 64 * T1,\n        PROVISIONAL_RESPONSE_INTERVAL: 60000 // See RFC 3261 Section 13.3.1.1\n    };\n    ['setTimeout', 'clearTimeout', 'setInterval', 'clearInterval']\n        .forEach(function (name) {\n        // can't just use timers[name].bind(timers) since it bypasses jasmine's\n        // clock-mocking\n        Timers[name] = function () {\n            return timers[name].apply(timers, arguments);\n        };\n    });\n    return Timers;\n};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* eslint-disable */\n/**\n * @fileoverview Transport\n */\n/* Transport\n * @class Abstract transport layer parent class\n * @param {Logger} logger\n * @param {Object} [options]\n */\nmodule.exports = function (SIP) {\n    var Transport = function (logger, options) { };\n    Transport.prototype = Object.create(SIP.EventEmitter.prototype, {\n        /**\n        * Returns the promise designated by the child layer then emits a connected event. Automatically emits an event upon resolution, unless overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of connectPromise\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        connect: { writable: true, value: function connect(options) {\n                options = options || {};\n                return this.connectPromise(options).then(function (data) { !data.overrideEvent && this.emit('connected'); }.bind(this));\n            } },\n        /**\n        * Called by connect, must return a promise\n        * promise must resolve to an object. object supports 1 parameter: overrideEvent - Boolean\n        * @abstract\n        * @private\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        connectPromise: { writable: true, value: function connectPromise(options) { } },\n        /**\n        * Returns true if the transport is connected\n        * @abstract\n        * @returns {Boolean}\n        */\n        isConnected: { writable: true, value: function isConnected() { } },\n        /**\n        * Sends a message then emits a 'messageSent' event. Automatically emits an event upon resolution, unless data.overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of sendPromise\n        * @param {SIP.OutgoingRequest|String} msg\n        * @param {Object} options\n        * @returns {Promise}\n        */\n        send: { writable: true, value: function send(msg, options) {\n                options = options || {};\n                return this.sendPromise(msg).then(function (data) { !data.overrideEvent && this.emit('messageSent', data.msg); }.bind(this));\n            } },\n        /**\n        * Called by send, must return a promise\n        * promise must resolve to an object. object supports 2 parameters: msg - string (mandatory) and overrideEvent - Boolean (optional)\n        * @abstract\n        * @private\n        * @param {SIP.OutgoingRequest|String} msg\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        sendPromise: { writable: true, value: function sendPromise(msg, options) { } },\n        /**\n        * To be called when a message is received\n        * @abstract\n        * @param {Event} e\n        */\n        onMessage: { writable: true, value: function onMessage(e) { } },\n        /**\n        * Returns the promise designated by the child layer then emits a disconnected event. Automatically emits an event upon resolution, unless overrideEvent is set. If you override the event in this fashion, you should emit it in your implementation of disconnectPromise\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        disconnect: { writable: true, value: function disconnect(options) {\n                options = options || {};\n                return this.disconnectPromise(options).then(function (data) { !data.overrideEvent && this.emit('disconnected'); }.bind(this));\n            } },\n        /**\n        * Called by disconnect, must return a promise\n        * promise must resolve to an object. object supports 1 parameter: overrideEvent - Boolean\n        * @abstract\n        * @private\n        * @param {Object} [options]\n        * @returns {Promise}\n        */\n        disconnectPromise: { writable: true, value: function disconnectPromise(options) { } },\n        afterConnected: { writable: true, value: function afterConnected(callback) {\n                if (this.isConnected()) {\n                    callback();\n                }\n                else {\n                    this.once('connected', callback);\n                }\n            } },\n        /**\n         * Returns a promise which resolves once the UA is connected. DEPRECATION WARNING: just use afterConnected()\n         * @returns {Promise}\n         */\n        waitForConnected: { writable: true, value: function waitForConnected() {\n                console.warn(\"DEPRECATION WARNING Transport.waitForConnected(): use afterConnected() instead\");\n                return new SIP.Utils.Promise(function (resolve) {\n                    this.afterConnected(resolve);\n                }.bind(this));\n            } },\n    });\n    return Transport;\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Message Parser\n */\n/**\n * Extract and parse every header of a SIP message.\n * @augments SIP\n * @namespace\n */\nmodule.exports = function (SIP) {\n    var Parser;\n    function getHeader(data, headerStart) {\n        var \n        // 'start' position of the header.\n        start = headerStart, \n        // 'end' position of the header.\n        end = 0, \n        // 'partial end' position of the header.\n        partialEnd = 0;\n        //End of message.\n        if (data.substring(start, start + 2).match(/(^\\r\\n)/)) {\n            return -2;\n        }\n        while (end === 0) {\n            // Partial End of Header.\n            partialEnd = data.indexOf('\\r\\n', start);\n            // 'indexOf' returns -1 if the value to be found never occurs.\n            if (partialEnd === -1) {\n                return partialEnd;\n            }\n            if (!data.substring(partialEnd + 2, partialEnd + 4).match(/(^\\r\\n)/) && data.charAt(partialEnd + 2).match(/(^\\s+)/)) {\n                // Not the end of the message. Continue from the next position.\n                start = partialEnd + 2;\n            }\n            else {\n                end = partialEnd;\n            }\n        }\n        return end;\n    }\n    function parseHeader(message, data, headerStart, headerEnd) {\n        var header, idx, length, parsed, hcolonIndex = data.indexOf(':', headerStart), headerName = data.substring(headerStart, hcolonIndex).trim(), headerValue = data.substring(hcolonIndex + 1, headerEnd).trim();\n        // If header-field is well-known, parse it.\n        switch (headerName.toLowerCase()) {\n            case 'via':\n            case 'v':\n                message.addHeader('via', headerValue);\n                if (message.getHeaders('via').length === 1) {\n                    parsed = message.parseHeader('Via');\n                    if (parsed) {\n                        message.via = parsed;\n                        message.via_branch = parsed.branch;\n                    }\n                }\n                else {\n                    parsed = 0;\n                }\n                break;\n            case 'from':\n            case 'f':\n                message.setHeader('from', headerValue);\n                parsed = message.parseHeader('from');\n                if (parsed) {\n                    message.from = parsed;\n                    message.from_tag = parsed.getParam('tag');\n                }\n                break;\n            case 'to':\n            case 't':\n                message.setHeader('to', headerValue);\n                parsed = message.parseHeader('to');\n                if (parsed) {\n                    message.to = parsed;\n                    message.to_tag = parsed.getParam('tag');\n                }\n                break;\n            case 'record-route':\n                parsed = SIP.Grammar.parse(headerValue, 'Record_Route');\n                if (parsed === -1) {\n                    parsed = undefined;\n                    break;\n                }\n                length = parsed.length;\n                for (idx = 0; idx < length; idx++) {\n                    header = parsed[idx];\n                    message.addHeader('record-route', headerValue.substring(header.position, header.offset));\n                    message.headers['Record-Route'][message.getHeaders('record-route').length - 1].parsed = header.parsed;\n                }\n                break;\n            case 'call-id':\n            case 'i':\n                message.setHeader('call-id', headerValue);\n                parsed = message.parseHeader('call-id');\n                if (parsed) {\n                    message.call_id = headerValue;\n                }\n                break;\n            case 'contact':\n            case 'm':\n                parsed = SIP.Grammar.parse(headerValue, 'Contact');\n                if (parsed === -1) {\n                    parsed = undefined;\n                    break;\n                }\n                length = parsed.length;\n                for (idx = 0; idx < length; idx++) {\n                    header = parsed[idx];\n                    message.addHeader('contact', headerValue.substring(header.position, header.offset));\n                    message.headers['Contact'][message.getHeaders('contact').length - 1].parsed = header.parsed;\n                }\n                break;\n            case 'content-length':\n            case 'l':\n                message.setHeader('content-length', headerValue);\n                parsed = message.parseHeader('content-length');\n                break;\n            case 'content-type':\n            case 'c':\n                message.setHeader('content-type', headerValue);\n                parsed = message.parseHeader('content-type');\n                break;\n            case 'cseq':\n                message.setHeader('cseq', headerValue);\n                parsed = message.parseHeader('cseq');\n                if (parsed) {\n                    message.cseq = parsed.value;\n                }\n                if (message instanceof SIP.IncomingResponse) {\n                    message.method = parsed.method;\n                }\n                break;\n            case 'max-forwards':\n                message.setHeader('max-forwards', headerValue);\n                parsed = message.parseHeader('max-forwards');\n                break;\n            case 'www-authenticate':\n                message.setHeader('www-authenticate', headerValue);\n                parsed = message.parseHeader('www-authenticate');\n                break;\n            case 'proxy-authenticate':\n                message.setHeader('proxy-authenticate', headerValue);\n                parsed = message.parseHeader('proxy-authenticate');\n                break;\n            case 'refer-to':\n            case 'r':\n                message.setHeader('refer-to', headerValue);\n                parsed = message.parseHeader('refer-to');\n                if (parsed) {\n                    message.refer_to = parsed;\n                }\n                break;\n            default:\n                // Do not parse this header.\n                message.setHeader(headerName, headerValue);\n                parsed = 0;\n        }\n        if (parsed === undefined) {\n            return {\n                error: 'error parsing header \"' + headerName + '\"'\n            };\n        }\n        else {\n            return true;\n        }\n    }\n    /** Parse SIP Message\n     * @function\n     * @param {String} message SIP message.\n     * @param {Object} logger object.\n     * @returns {SIP.IncomingRequest|SIP.IncomingResponse|undefined}\n     */\n    Parser = {};\n    Parser.parseMessage = function (data, ua) {\n        var message, firstLine, contentLength, bodyStart, parsed, headerStart = 0, headerEnd = data.indexOf('\\r\\n'), logger = ua.getLogger('sip.parser');\n        if (headerEnd === -1) {\n            logger.warn('no CRLF found, not a SIP message, discarded');\n            return;\n        }\n        // Parse first line. Check if it is a Request or a Reply.\n        firstLine = data.substring(0, headerEnd);\n        parsed = SIP.Grammar.parse(firstLine, 'Request_Response');\n        if (parsed === -1) {\n            logger.warn('error parsing first line of SIP message: \"' + firstLine + '\"');\n            return;\n        }\n        else if (!parsed.status_code) {\n            message = new SIP.IncomingRequest(ua);\n            message.method = parsed.method;\n            message.ruri = parsed.uri;\n        }\n        else {\n            message = new SIP.IncomingResponse(ua);\n            message.status_code = parsed.status_code;\n            message.reason_phrase = parsed.reason_phrase;\n        }\n        message.data = data;\n        headerStart = headerEnd + 2;\n        /* Loop over every line in data. Detect the end of each header and parse\n        * it or simply add to the headers collection.\n        */\n        while (true) {\n            headerEnd = getHeader(data, headerStart);\n            // The SIP message has normally finished.\n            if (headerEnd === -2) {\n                bodyStart = headerStart + 2;\n                break;\n            }\n            // data.indexOf returned -1 due to a malformed message.\n            else if (headerEnd === -1) {\n                logger.error('malformed message');\n                return;\n            }\n            parsed = parseHeader(message, data, headerStart, headerEnd);\n            if (parsed !== true) {\n                logger.error(parsed.error);\n                return;\n            }\n            headerStart = headerEnd + 2;\n        }\n        /* RFC3261 18.3.\n         * If there are additional bytes in the transport packet\n         * beyond the end of the body, they MUST be discarded.\n         */\n        if (message.hasHeader('content-length')) {\n            contentLength = message.getHeader('content-length');\n            message.body = data.substr(bodyStart, contentLength);\n        }\n        else {\n            message.body = data.substring(bodyStart);\n        }\n        return message;\n    };\n    SIP.Parser = Parser;\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Message\n */\nmodule.exports = function (SIP) {\n    var OutgoingRequest, IncomingMessage, IncomingRequest, IncomingResponse;\n    function getSupportedHeader(request) {\n        var allowUnregistered = request.ua.configuration.hackAllowUnregisteredOptionTags;\n        var optionTags = [];\n        var optionTagSet = {};\n        if (request.method === SIP.C.REGISTER) {\n            optionTags.push('path', 'gruu');\n        }\n        else if (request.method === SIP.C.INVITE &&\n            (request.ua.contact.pub_gruu || request.ua.contact.temp_gruu)) {\n            optionTags.push('gruu');\n        }\n        if (request.ua.configuration.rel100 === SIP.C.supported.SUPPORTED) {\n            optionTags.push('100rel');\n        }\n        if (request.ua.configuration.replaces === SIP.C.supported.SUPPORTED) {\n            optionTags.push('replaces');\n        }\n        optionTags.push('outbound');\n        optionTags = optionTags.concat(request.ua.configuration.extraSupported);\n        optionTags = optionTags.filter(function (optionTag) {\n            var registered = SIP.C.OPTION_TAGS[optionTag];\n            var unique = !optionTagSet[optionTag];\n            optionTagSet[optionTag] = true;\n            return (registered || allowUnregistered) && unique;\n        });\n        return 'Supported: ' + optionTags.join(', ') + '\\r\\n';\n    }\n    /**\n     * @augments SIP\n     * @class Class for outgoing SIP request.\n     * @param {String} method request method\n     * @param {String} ruri request uri\n     * @param {SIP.UA} ua\n     * @param {Object} params parameters that will have priority over ua.configuration parameters:\n     * <br>\n     *  - cseq, call_id, from_tag, from_uri, from_displayName, to_uri, to_tag, route_set\n     * @param {Object} [headers] extra headers\n     * @param {String} [body]\n     */\n    OutgoingRequest = function (method, ruri, ua, params, extraHeaders, body) {\n        var to, from, call_id, cseq, to_uri, from_uri;\n        params = params || {};\n        // Mandatory parameters check\n        if (!method || !ruri || !ua) {\n            return null;\n        }\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.ua = ua;\n        this.headers = {};\n        this.method = method;\n        this.ruri = ruri;\n        this.body = body;\n        this.extraHeaders = (extraHeaders || []).slice();\n        this.statusCode = params.status_code;\n        this.reasonPhrase = params.reason_phrase;\n        // Fill the Common SIP Request Headers\n        // Route\n        if (params.route_set) {\n            this.setHeader('route', params.route_set);\n        }\n        else if (ua.configuration.usePreloadedRoute) {\n            this.setHeader('route', ua.transport.server.sip_uri);\n        }\n        // Via\n        // Empty Via header. Will be filled by the client transaction.\n        this.setHeader('via', '');\n        // Max-Forwards\n        this.setHeader('max-forwards', SIP.UA.C.MAX_FORWARDS);\n        // To\n        to_uri = params.to_uri || ruri;\n        to = (params.to_displayName || params.to_displayName === 0) ? '\"' + params.to_displayName + '\" ' : '';\n        to += '<' + (to_uri && to_uri.toRaw ? to_uri.toRaw() : to_uri) + '>';\n        to += params.to_tag ? ';tag=' + params.to_tag : '';\n        this.to = new SIP.NameAddrHeader.parse(to);\n        this.setHeader('to', to);\n        // From\n        from_uri = params.from_uri || ua.configuration.uri;\n        if (params.from_displayName || params.from_displayName === 0) {\n            from = '\"' + params.from_displayName + '\" ';\n        }\n        else if (ua.configuration.displayName) {\n            from = '\"' + ua.configuration.displayName + '\" ';\n        }\n        else {\n            from = '';\n        }\n        from += '<' + (from_uri && from_uri.toRaw ? from_uri.toRaw() : from_uri) + '>;tag=';\n        from += params.from_tag || SIP.Utils.newTag();\n        this.from = new SIP.NameAddrHeader.parse(from);\n        this.setHeader('from', from);\n        // Call-ID\n        call_id = params.call_id || (ua.configuration.sipjsId + SIP.Utils.createRandomToken(15));\n        this.call_id = call_id;\n        this.setHeader('call-id', call_id);\n        // CSeq\n        cseq = params.cseq || Math.floor(Math.random() * 10000);\n        this.cseq = cseq;\n        this.setHeader('cseq', cseq + ' ' + method);\n    };\n    OutgoingRequest.prototype = {\n        /**\n         * Replace the the given header by the given value.\n         * @param {String} name header name\n         * @param {String | Array} value header value\n         */\n        setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n        },\n        /**\n         * Get the value of the given header name at the given position.\n         * @param {String} name header name\n         * @returns {String|undefined} Returns the specified header, undefined if header doesn't exist.\n         */\n        getHeader: function (name) {\n            var regexp, idx, length = this.extraHeaders.length, header = this.headers[SIP.Utils.headerize(name)];\n            if (header) {\n                if (header[0]) {\n                    return header[0];\n                }\n            }\n            else {\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    header = this.extraHeaders[idx];\n                    if (regexp.test(header)) {\n                        return header.substring(header.indexOf(':') + 1).trim();\n                    }\n                }\n            }\n            return;\n        },\n        /**\n         * Get the header/s of the given name.\n         * @param {String} name header name\n         * @returns {Array} Array with all the headers of the specified name.\n         */\n        getHeaders: function (name) {\n            var idx, length, regexp, header = this.headers[SIP.Utils.headerize(name)], result = [];\n            if (header) {\n                length = header.length;\n                for (idx = 0; idx < length; idx++) {\n                    result.push(header[idx]);\n                }\n                return result;\n            }\n            else {\n                length = this.extraHeaders.length;\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    header = this.extraHeaders[idx];\n                    if (regexp.test(header)) {\n                        result.push(header.substring(header.indexOf(':') + 1).trim());\n                    }\n                }\n                return result;\n            }\n        },\n        /**\n         * Verify the existence of the given header.\n         * @param {String} name header name\n         * @returns {boolean} true if header with given name exists, false otherwise\n         */\n        hasHeader: function (name) {\n            var regexp, idx, length = this.extraHeaders.length;\n            if (this.headers[SIP.Utils.headerize(name)]) {\n                return true;\n            }\n            else {\n                regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n                for (idx = 0; idx < length; idx++) {\n                    if (regexp.test(this.extraHeaders[idx])) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        },\n        toString: function () {\n            var msg = '', header, length, idx;\n            msg += this.method + ' ' + (this.ruri.toRaw ? this.ruri.toRaw() : this.ruri) + ' SIP/2.0\\r\\n';\n            for (header in this.headers) {\n                length = this.headers[header].length;\n                for (idx = 0; idx < length; idx++) {\n                    msg += header + ': ' + this.headers[header][idx] + '\\r\\n';\n                }\n            }\n            length = this.extraHeaders.length;\n            for (idx = 0; idx < length; idx++) {\n                msg += this.extraHeaders[idx].trim() + '\\r\\n';\n            }\n            msg += getSupportedHeader(this);\n            msg += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n            if (this.body) {\n                if (typeof this.body === 'string') {\n                    length = SIP.Utils.str_utf8_length(this.body);\n                    msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                    msg += this.body;\n                }\n                else {\n                    if (this.body.body && this.body.contentType) {\n                        length = SIP.Utils.str_utf8_length(this.body.body);\n                        msg += 'Content-Type: ' + this.body.contentType + '\\r\\n';\n                        msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                        msg += this.body.body;\n                    }\n                    else {\n                        msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n                    }\n                }\n            }\n            else {\n                msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n            }\n            return msg;\n        }\n    };\n    /**\n     * @augments SIP\n     * @class Class for incoming SIP message.\n     */\n    IncomingMessage = function () {\n        this.data = null;\n        this.headers = null;\n        this.method = null;\n        this.via = null;\n        this.via_branch = null;\n        this.call_id = null;\n        this.cseq = null;\n        this.from = null;\n        this.from_tag = null;\n        this.to = null;\n        this.to_tag = null;\n        this.body = null;\n    };\n    IncomingMessage.prototype = {\n        /**\n        * Insert a header of the given name and value into the last position of the\n        * header array.\n        * @param {String} name header name\n        * @param {String} value header value\n        */\n        addHeader: function (name, value) {\n            var header = { raw: value };\n            name = SIP.Utils.headerize(name);\n            if (this.headers[name]) {\n                this.headers[name].push(header);\n            }\n            else {\n                this.headers[name] = [header];\n            }\n        },\n        /**\n         * Get the value of the given header name at the given position.\n         * @param {String} name header name\n         * @returns {String|undefined} Returns the specified header, null if header doesn't exist.\n         */\n        getHeader: function (name) {\n            var header = this.headers[SIP.Utils.headerize(name)];\n            if (header) {\n                if (header[0]) {\n                    return header[0].raw;\n                }\n            }\n            else {\n                return;\n            }\n        },\n        /**\n         * Get the header/s of the given name.\n         * @param {String} name header name\n         * @returns {Array} Array with all the headers of the specified name.\n         */\n        getHeaders: function (name) {\n            var idx, length, header = this.headers[SIP.Utils.headerize(name)], result = [];\n            if (!header) {\n                return [];\n            }\n            length = header.length;\n            for (idx = 0; idx < length; idx++) {\n                result.push(header[idx].raw);\n            }\n            return result;\n        },\n        /**\n         * Verify the existence of the given header.\n         * @param {String} name header name\n         * @returns {boolean} true if header with given name exists, false otherwise\n         */\n        hasHeader: function (name) {\n            return (this.headers[SIP.Utils.headerize(name)]) ? true : false;\n        },\n        /**\n        * Parse the given header on the given index.\n        * @param {String} name header name\n        * @param {Number} [idx=0] header index\n        * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n        */\n        parseHeader: function (name, idx) {\n            var header, value, parsed;\n            name = SIP.Utils.headerize(name);\n            idx = idx || 0;\n            if (!this.headers[name]) {\n                this.logger.log('header \"' + name + '\" not present');\n                return;\n            }\n            else if (idx >= this.headers[name].length) {\n                this.logger.log('not so many \"' + name + '\" headers present');\n                return;\n            }\n            header = this.headers[name][idx];\n            value = header.raw;\n            if (header.parsed) {\n                return header.parsed;\n            }\n            //substitute '-' by '_' for grammar rule matching.\n            parsed = SIP.Grammar.parse(value, name.replace(/-/g, '_'));\n            if (parsed === -1) {\n                this.headers[name].splice(idx, 1); //delete from headers\n                this.logger.warn('error parsing \"' + name + '\" header field with value \"' + value + '\"');\n                return;\n            }\n            else {\n                header.parsed = parsed;\n                return parsed;\n            }\n        },\n        /**\n         * Message Header attribute selector. Alias of parseHeader.\n         * @param {String} name header name\n         * @param {Number} [idx=0] header index\n         * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n         *\n         * @example\n         * message.s('via',3).port\n         */\n        s: function (name, idx) {\n            return this.parseHeader(name, idx);\n        },\n        /**\n        * Replace the value of the given header by the value.\n        * @param {String} name header name\n        * @param {String} value header value\n        */\n        setHeader: function (name, value) {\n            var header = { raw: value };\n            this.headers[SIP.Utils.headerize(name)] = [header];\n        },\n        toString: function () {\n            return this.data;\n        }\n    };\n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP request.\n     */\n    IncomingRequest = function (ua) {\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.ua = ua;\n        this.headers = {};\n        this.ruri = null;\n        this.transport = null;\n        this.server_transaction = null;\n    };\n    IncomingRequest.prototype = new IncomingMessage();\n    /**\n    * Stateful reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    * @param {Object} headers extra headers\n    * @param {String} body body\n    * @param {Function} [onSuccess] onSuccess callback\n    * @param {Function} [onFailure] onFailure callback\n    */\n    // TODO: Get rid of callbacks and make promise based\n    IncomingRequest.prototype.reply = function (code, reason, extraHeaders, body, onSuccess, onFailure) {\n        var rr, vias, length, idx, response, to = this.getHeader('To'), r = 0, v = 0;\n        response = SIP.Utils.buildStatusLine(code, reason);\n        extraHeaders = (extraHeaders || []).slice();\n        if (this.method === SIP.C.INVITE && code > 100 && code <= 200) {\n            rr = this.getHeaders('record-route');\n            length = rr.length;\n            for (r; r < length; r++) {\n                response += 'Record-Route: ' + rr[r] + '\\r\\n';\n            }\n        }\n        vias = this.getHeaders('via');\n        length = vias.length;\n        for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n        }\n        if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n        }\n        response += 'To: ' + to + '\\r\\n';\n        response += 'From: ' + this.getHeader('From') + '\\r\\n';\n        response += 'Call-ID: ' + this.call_id + '\\r\\n';\n        response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n        length = extraHeaders.length;\n        for (idx = 0; idx < length; idx++) {\n            response += extraHeaders[idx].trim() + '\\r\\n';\n        }\n        response += getSupportedHeader(this);\n        response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n        if (body) {\n            if (typeof body === 'string') {\n                length = SIP.Utils.str_utf8_length(body);\n                response += 'Content-Type: application/sdp\\r\\n';\n                response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                response += body;\n            }\n            else {\n                if (body.body && body.contentType) {\n                    length = SIP.Utils.str_utf8_length(body.body);\n                    response += 'Content-Type: ' + body.contentType + '\\r\\n';\n                    response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                    response += body.body;\n                }\n                else {\n                    response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n                }\n            }\n        }\n        else {\n            response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n        }\n        this.server_transaction.receiveResponse(code, response).then(onSuccess, onFailure);\n        return response;\n    };\n    /**\n    * Stateless reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    */\n    IncomingRequest.prototype.reply_sl = function (code, reason) {\n        var to, response, v = 0, vias = this.getHeaders('via'), length = vias.length;\n        response = SIP.Utils.buildStatusLine(code, reason);\n        for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n        }\n        to = this.getHeader('To');\n        if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n        }\n        response += 'To: ' + to + '\\r\\n';\n        response += 'From: ' + this.getHeader('From') + '\\r\\n';\n        response += 'Call-ID: ' + this.call_id + '\\r\\n';\n        response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n        response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n        response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n        this.transport.send(response);\n    };\n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP response.\n     */\n    IncomingResponse = function (ua) {\n        this.logger = ua.getLogger('sip.sipmessage');\n        this.headers = {};\n        this.status_code = null;\n        this.reason_phrase = null;\n    };\n    IncomingResponse.prototype = new IncomingMessage();\n    SIP.OutgoingRequest = OutgoingRequest;\n    SIP.IncomingRequest = IncomingRequest;\n    SIP.IncomingResponse = IncomingResponse;\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP URI\n */\n/**\n * @augments SIP\n * @class Class creating a SIP URI.\n *\n * @param {String} [scheme]\n * @param {String} [user]\n * @param {String} host\n * @param {String} [port]\n * @param {Object} [parameters]\n * @param {Object} [headers]\n *\n */\nmodule.exports = function (SIP) {\n    var URI;\n    URI = function (scheme, user, host, port, parameters, headers) {\n        var param, header, raw, normal;\n        // Checks\n        if (!host) {\n            throw new TypeError('missing or invalid \"host\" parameter');\n        }\n        // Initialize parameters\n        scheme = scheme || SIP.C.SIP;\n        this.parameters = {};\n        this.headers = {};\n        for (param in parameters) {\n            this.setParam(param, parameters[param]);\n        }\n        for (header in headers) {\n            this.setHeader(header, headers[header]);\n        }\n        // Raw URI\n        raw = {\n            scheme: scheme,\n            user: user,\n            host: host,\n            port: port\n        };\n        // Normalized URI\n        normal = {\n            scheme: scheme.toLowerCase(),\n            user: user,\n            host: host.toLowerCase(),\n            port: port\n        };\n        Object.defineProperties(this, {\n            _normal: {\n                get: function () { return normal; }\n            },\n            _raw: {\n                get: function () { return raw; }\n            },\n            scheme: {\n                get: function () { return normal.scheme; },\n                set: function (value) {\n                    raw.scheme = value;\n                    normal.scheme = value.toLowerCase();\n                }\n            },\n            user: {\n                get: function () { return normal.user; },\n                set: function (value) {\n                    normal.user = raw.user = value;\n                }\n            },\n            host: {\n                get: function () { return normal.host; },\n                set: function (value) {\n                    raw.host = value;\n                    normal.host = value.toLowerCase();\n                }\n            },\n            aor: {\n                get: function () { return normal.user + '@' + normal.host; }\n            },\n            port: {\n                get: function () { return normal.port; },\n                set: function (value) {\n                    normal.port = raw.port = value === 0 ? value : (parseInt(value, 10) || null);\n                }\n            }\n        });\n    };\n    URI.prototype = {\n        setParam: function (key, value) {\n            if (key) {\n                this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString();\n            }\n        },\n        getParam: function (key) {\n            if (key) {\n                return this.parameters[key.toLowerCase()];\n            }\n        },\n        hasParam: function (key) {\n            if (key) {\n                return (this.parameters.hasOwnProperty(key.toLowerCase()) && true) || false;\n            }\n        },\n        deleteParam: function (parameter) {\n            var value;\n            parameter = parameter.toLowerCase();\n            if (this.parameters.hasOwnProperty(parameter)) {\n                value = this.parameters[parameter];\n                delete this.parameters[parameter];\n                return value;\n            }\n        },\n        clearParams: function () {\n            this.parameters = {};\n        },\n        setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n        },\n        getHeader: function (name) {\n            if (name) {\n                return this.headers[SIP.Utils.headerize(name)];\n            }\n        },\n        hasHeader: function (name) {\n            if (name) {\n                return (this.headers.hasOwnProperty(SIP.Utils.headerize(name)) && true) || false;\n            }\n        },\n        deleteHeader: function (header) {\n            var value;\n            header = SIP.Utils.headerize(header);\n            if (this.headers.hasOwnProperty(header)) {\n                value = this.headers[header];\n                delete this.headers[header];\n                return value;\n            }\n        },\n        clearHeaders: function () {\n            this.headers = {};\n        },\n        clone: function () {\n            return new URI(this._raw.scheme, this._raw.user, this._raw.host, this._raw.port, JSON.parse(JSON.stringify(this.parameters)), JSON.parse(JSON.stringify(this.headers)));\n        },\n        toRaw: function () {\n            return this._toString(this._raw);\n        },\n        toString: function () {\n            return this._toString(this._normal);\n        },\n        _toString: function (uri) {\n            var header, parameter, idx, uriString, headers = [];\n            uriString = uri.scheme + ':';\n            // add slashes if it's not a sip(s) URI\n            if (!uri.scheme.toLowerCase().match(\"^sips?$\")) {\n                uriString += \"//\";\n            }\n            if (uri.user) {\n                uriString += SIP.Utils.escapeUser(uri.user) + '@';\n            }\n            uriString += uri.host;\n            if (uri.port || uri.port === 0) {\n                uriString += ':' + uri.port;\n            }\n            for (parameter in this.parameters) {\n                uriString += ';' + parameter;\n                if (this.parameters[parameter] !== null) {\n                    uriString += '=' + this.parameters[parameter];\n                }\n            }\n            for (header in this.headers) {\n                for (idx in this.headers[header]) {\n                    headers.push(header + '=' + this.headers[header][idx]);\n                }\n            }\n            if (headers.length > 0) {\n                uriString += '?' + headers.join('&');\n            }\n            return uriString;\n        }\n    };\n    /**\n      * Parse the given string and returns a SIP.URI instance or undefined if\n      * it is an invalid URI.\n      * @public\n      * @param {String} uri\n      */\n    URI.parse = function (uri) {\n        uri = SIP.Grammar.parse(uri, 'SIP_URI');\n        if (uri !== -1) {\n            return uri;\n        }\n        else {\n            return undefined;\n        }\n    };\n    SIP.URI = URI;\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP NameAddrHeader\n */\n/**\n * @augments SIP\n * @class Class creating a Name Address SIP header.\n *\n * @param {SIP.URI} uri\n * @param {String} [displayName]\n * @param {Object} [parameters]\n *\n */\nmodule.exports = function (SIP) {\n    var NameAddrHeader;\n    NameAddrHeader = function (uri, displayName, parameters) {\n        var param;\n        // Checks\n        if (!uri || !(uri instanceof SIP.URI)) {\n            throw new TypeError('missing or invalid \"uri\" parameter');\n        }\n        // Initialize parameters\n        this.uri = uri;\n        this.parameters = {};\n        for (param in parameters) {\n            this.setParam(param, parameters[param]);\n        }\n        Object.defineProperties(this, {\n            friendlyName: {\n                get: function () { return this.displayName || uri.aor; }\n            },\n            displayName: {\n                get: function () { return displayName; },\n                set: function (value) {\n                    displayName = (value === 0) ? '0' : value;\n                }\n            }\n        });\n    };\n    NameAddrHeader.prototype = {\n        setParam: function (key, value) {\n            if (key) {\n                this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString();\n            }\n        },\n        getParam: SIP.URI.prototype.getParam,\n        hasParam: SIP.URI.prototype.hasParam,\n        deleteParam: SIP.URI.prototype.deleteParam,\n        clearParams: SIP.URI.prototype.clearParams,\n        clone: function () {\n            return new NameAddrHeader(this.uri.clone(), this.displayName, JSON.parse(JSON.stringify(this.parameters)));\n        },\n        toString: function () {\n            var body, parameter;\n            body = (this.displayName || this.displayName === 0) ? '\"' + this.displayName + '\" ' : '';\n            body += '<' + this.uri.toString() + '>';\n            for (parameter in this.parameters) {\n                body += ';' + parameter;\n                if (this.parameters[parameter] !== null) {\n                    body += '=' + this.parameters[parameter];\n                }\n            }\n            return body;\n        }\n    };\n    /**\n      * Parse the given string and returns a SIP.NameAddrHeader instance or undefined if\n      * it is an invalid NameAddrHeader.\n      * @public\n      * @param {String} name_addr_header\n      */\n    NameAddrHeader.parse = function (name_addr_header) {\n        name_addr_header = SIP.Grammar.parse(name_addr_header, 'Name_Addr_Header');\n        if (name_addr_header !== -1) {\n            return name_addr_header;\n        }\n        else {\n            return undefined;\n        }\n    };\n    SIP.NameAddrHeader = NameAddrHeader;\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Transactions\n */\n/**\n * SIP Transactions module.\n * @augments SIP\n */\nmodule.exports = function (SIP) {\n    var C = {\n        // Transaction states\n        STATUS_TRYING: 1,\n        STATUS_PROCEEDING: 2,\n        STATUS_CALLING: 3,\n        STATUS_ACCEPTED: 4,\n        STATUS_COMPLETED: 5,\n        STATUS_TERMINATED: 6,\n        STATUS_CONFIRMED: 7,\n        // Transaction types\n        NON_INVITE_CLIENT: 'nict',\n        NON_INVITE_SERVER: 'nist',\n        INVITE_CLIENT: 'ict',\n        INVITE_SERVER: 'ist'\n    };\n    function buildViaHeader(request_sender, transport, id) {\n        var via;\n        via = 'SIP/2.0/' + (request_sender.ua.configuration.hackViaTcp ? 'TCP' : transport.server.scheme);\n        via += ' ' + request_sender.ua.configuration.viaHost + ';branch=' + id;\n        if (request_sender.ua.configuration.forceRport) {\n            via += ';rport';\n        }\n        return via;\n    }\n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var NonInviteClientTransaction = function (request_sender, request, transport) {\n        var via;\n        this.type = C.NON_INVITE_CLIENT;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n        this.request_sender.ua.newTransaction(this);\n    };\n    NonInviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    NonInviteClientTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    NonInviteClientTransaction.prototype.send = function () {\n        var tr = this;\n        this.stateChanged(C.STATUS_TRYING);\n        this.F = SIP.Timers.setTimeout(tr.timer_F.bind(tr), SIP.Timers.TIMER_F);\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    NonInviteClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, deleting non-INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.F);\n        SIP.Timers.clearTimeout(this.K);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        this.request_sender.onTransportError();\n    };\n    NonInviteClientTransaction.prototype.timer_F = function () {\n        this.logger.debug('Timer F expired for non-INVITE client transaction ' + this.id);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        this.request_sender.onRequestTimeout();\n    };\n    NonInviteClientTransaction.prototype.timer_K = function () {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n    };\n    NonInviteClientTransaction.prototype.receiveResponse = function (response) {\n        var tr = this, status_code = response.status_code;\n        if (status_code < 200) {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    SIP.Timers.clearTimeout(this.F);\n                    if (status_code === 408) {\n                        this.request_sender.onRequestTimeout();\n                    }\n                    else {\n                        this.request_sender.receiveResponse(response);\n                    }\n                    this.K = SIP.Timers.setTimeout(tr.timer_K.bind(tr), SIP.Timers.TIMER_K);\n                    break;\n                case C.STATUS_COMPLETED:\n                    break;\n            }\n        }\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var InviteClientTransaction = function (request_sender, request, transport) {\n        var via, tr = this;\n        this.type = C.INVITE_CLIENT;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.ict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n        this.request_sender.ua.newTransaction(this);\n        // Add the cancel property to the request.\n        //Will be called from the request instance, not the transaction itself.\n        this.request.cancel = function (reason, extraHeaders) {\n            extraHeaders = (extraHeaders || []).slice();\n            var length = extraHeaders.length;\n            var extraHeadersString = null;\n            for (var idx = 0; idx < length; idx++) {\n                extraHeadersString = (extraHeadersString || '') + extraHeaders[idx].trim() + '\\r\\n';\n            }\n            tr.cancel_request(tr, reason, extraHeadersString);\n        };\n    };\n    InviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    InviteClientTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    InviteClientTransaction.prototype.send = function () {\n        var tr = this;\n        this.stateChanged(C.STATUS_CALLING);\n        this.B = SIP.Timers.setTimeout(tr.timer_B.bind(tr), SIP.Timers.TIMER_B);\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    InviteClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, deleting INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.B);\n        SIP.Timers.clearTimeout(this.D);\n        SIP.Timers.clearTimeout(this.M);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        if (this.state !== C.STATUS_ACCEPTED) {\n            this.request_sender.onTransportError();\n        }\n    };\n    // RFC 6026 7.2\n    InviteClientTransaction.prototype.timer_M = function () {\n        this.logger.debug('Timer M expired for INVITE client transaction ' + this.id);\n        if (this.state === C.STATUS_ACCEPTED) {\n            SIP.Timers.clearTimeout(this.B);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n        }\n    };\n    // RFC 3261 17.1.1\n    InviteClientTransaction.prototype.timer_B = function () {\n        this.logger.debug('Timer B expired for INVITE client transaction ' + this.id);\n        if (this.state === C.STATUS_CALLING) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n            this.request_sender.onRequestTimeout();\n        }\n    };\n    InviteClientTransaction.prototype.timer_D = function () {\n        this.logger.debug('Timer D expired for INVITE client transaction ' + this.id);\n        SIP.Timers.clearTimeout(this.B);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n    };\n    InviteClientTransaction.prototype.sendACK = function (options) {\n        // TODO: Move PRACK stuff into the transaction layer. That is really where it should be\n        var self = this, ruri;\n        options = options || {};\n        if (this.response.getHeader('contact')) {\n            ruri = this.response.parseHeader('contact').uri;\n        }\n        else {\n            ruri = this.request.ruri;\n        }\n        var ack = new SIP.OutgoingRequest(\"ACK\", ruri, this.request.ua, {\n            cseq: this.response.cseq,\n            call_id: this.response.call_id,\n            from_uri: this.response.from.uri,\n            from_tag: this.response.from_tag,\n            to_uri: this.response.to.uri,\n            to_tag: this.response.to_tag,\n            route_set: this.response.getHeaders('record-route').reverse()\n        }, options.extraHeaders || [], options.body);\n        this.ackSender = new SIP.RequestSender({\n            request: ack,\n            onRequestTimeout: this.request_sender.applicant.applicant ? this.request_sender.applicant.applicant.onRequestTimeout : function () {\n                self.logger.warn(\"ACK Request timed out\");\n            },\n            onTransportError: this.request_sender.applicant.applicant ? this.request_sender.applicant.applicant.onRequestTransportError : function () {\n                self.logger.warn(\"ACK Request had a transport error\");\n            },\n            receiveResponse: options.receiveResponse || function () {\n                self.logger.warn(\"Received a response to an ACK which was unexpected. Dropping Response.\");\n            }\n        }, this.request.ua).send();\n        return ack;\n    };\n    InviteClientTransaction.prototype.cancel_request = function (tr, reason, extraHeaders) {\n        var request = tr.request;\n        this.cancel = SIP.C.CANCEL + ' ' + request.ruri + ' SIP/2.0\\r\\n';\n        this.cancel += 'Via: ' + request.headers['Via'].toString() + '\\r\\n';\n        if (this.request.headers['Route']) {\n            this.cancel += 'Route: ' + request.headers['Route'].toString() + '\\r\\n';\n        }\n        this.cancel += 'To: ' + request.headers['To'].toString() + '\\r\\n';\n        this.cancel += 'From: ' + request.headers['From'].toString() + '\\r\\n';\n        this.cancel += 'Call-ID: ' + request.headers['Call-ID'].toString() + '\\r\\n';\n        this.cancel += 'Max-Forwards: ' + SIP.UA.C.MAX_FORWARDS + '\\r\\n';\n        this.cancel += 'CSeq: ' + request.headers['CSeq'].toString().split(' ')[0] +\n            ' CANCEL\\r\\n';\n        if (reason) {\n            this.cancel += 'Reason: ' + reason + '\\r\\n';\n        }\n        if (extraHeaders) {\n            this.cancel += extraHeaders;\n        }\n        this.cancel += 'Content-Length: 0\\r\\n\\r\\n';\n        // Send only if a provisional response (>100) has been received.\n        if (this.state === C.STATUS_PROCEEDING) {\n            this.transport.send(this.cancel);\n        }\n    };\n    InviteClientTransaction.prototype.receiveResponse = function (response) {\n        var tr = this, status_code = response.status_code;\n        // This may create a circular dependency...\n        response.transaction = this;\n        if (this.response &&\n            this.response.status_code === response.status_code &&\n            this.response.cseq === response.cseq) {\n            this.logger.debug(\"ICT Received a retransmission for cseq: \" + response.cseq);\n            if (this.ackSender) {\n                this.ackSender.send();\n            }\n            return;\n        }\n        this.response = response;\n        if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.request_sender.receiveResponse(response);\n                    if (this.cancel) {\n                        this.transport.send(this.cancel);\n                    }\n                    break;\n                case C.STATUS_PROCEEDING:\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_ACCEPTED);\n                    this.M = SIP.Timers.setTimeout(tr.timer_M.bind(tr), SIP.Timers.TIMER_M);\n                    this.request_sender.receiveResponse(response);\n                    break;\n                case C.STATUS_ACCEPTED:\n                    this.request_sender.receiveResponse(response);\n                    break;\n            }\n        }\n        else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_CALLING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    this.sendACK();\n                    this.request_sender.receiveResponse(response);\n                    break;\n                case C.STATUS_COMPLETED:\n                    this.sendACK();\n                    break;\n            }\n        }\n    };\n    /**\n     * @augments SIP.Transactions\n     * @class ACK Client Transaction\n     * @param {SIP.RequestSender} request_sender\n     * @param {SIP.OutgoingRequest} request\n     * @param {SIP.Transport} transport\n     */\n    var AckClientTransaction = function (request_sender, request, transport) {\n        var via;\n        this.transport = transport;\n        this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n        this.request_sender = request_sender;\n        this.request = request;\n        this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n        via = buildViaHeader(request_sender, transport, this.id);\n        this.request.setHeader('via', via);\n    };\n    AckClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    AckClientTransaction.prototype.send = function () {\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    AckClientTransaction.prototype.onTransportError = function () {\n        this.logger.log('transport error occurred, for an ACK client transaction ' + this.id);\n        this.request_sender.onTransportError();\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var NonInviteServerTransaction = function (request, ua) {\n        this.type = C.NON_INVITE_SERVER;\n        this.id = request.via_branch;\n        this.request = request;\n        this.transport = ua.transport;\n        this.ua = ua;\n        this.last_response = '';\n        request.server_transaction = this;\n        this.logger = ua.getLogger('sip.transaction.nist', this.id);\n        this.state = C.STATUS_TRYING;\n        ua.newTransaction(this);\n    };\n    NonInviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    NonInviteServerTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    NonInviteServerTransaction.prototype.timer_J = function () {\n        this.logger.debug('Timer J expired for non-INVITE server transaction ' + this.id);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    NonInviteServerTransaction.prototype.onTransportError = function () {\n        if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting non-INVITE server transaction ' + this.id);\n            SIP.Timers.clearTimeout(this.J);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    NonInviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n        var tr = this;\n        var deferred = SIP.Utils.defer();\n        if (status_code === 100) {\n            /* RFC 4320 4.1\n             * 'A SIP element MUST NOT\n             * send any provisional response with a\n             * Status-Code other than 100 to a non-INVITE request.'\n             */\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                    this.stateChanged(C.STATUS_PROCEEDING);\n                    this.transport.send(response).catch(function () {\n                        this.onTransportError();\n                    }.bind(this));\n                    break;\n                case C.STATUS_PROCEEDING:\n                    this.last_response = response;\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function () {\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        else if (status_code >= 200 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_TRYING:\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_COMPLETED);\n                    this.last_response = response;\n                    this.J = SIP.Timers.setTimeout(tr.timer_J.bind(tr), SIP.Timers.TIMER_J);\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function () {\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n                case C.STATUS_COMPLETED:\n                    break;\n            }\n        }\n        return deferred.promise;\n    };\n    /**\n    * @augments SIP.Transactions\n    * @class Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var InviteServerTransaction = function (request, ua) {\n        this.type = C.INVITE_SERVER;\n        this.id = request.via_branch;\n        this.request = request;\n        this.transport = ua.transport;\n        this.ua = ua;\n        this.last_response = '';\n        request.server_transaction = this;\n        this.logger = ua.getLogger('sip.transaction.ist', this.id);\n        this.state = C.STATUS_PROCEEDING;\n        ua.newTransaction(this);\n        this.resendProvisionalTimer = null;\n        request.reply(100);\n    };\n    InviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    InviteServerTransaction.prototype.stateChanged = function (state) {\n        this.state = state;\n        this.emit('stateChanged');\n    };\n    InviteServerTransaction.prototype.timer_H = function () {\n        this.logger.debug('Timer H expired for INVITE server transaction ' + this.id);\n        if (this.state === C.STATUS_COMPLETED) {\n            this.logger.warn('transactions', 'ACK for INVITE server transaction was never received, call will be terminated');\n        }\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    InviteServerTransaction.prototype.timer_I = function () {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n    };\n    // RFC 6026 7.1\n    InviteServerTransaction.prototype.timer_L = function () {\n        this.logger.debug('Timer L expired for INVITE server transaction ' + this.id);\n        if (this.state === C.STATUS_ACCEPTED) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    InviteServerTransaction.prototype.onTransportError = function () {\n        if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting INVITE server transaction ' + this.id);\n            if (this.resendProvisionalTimer !== null) {\n                SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                this.resendProvisionalTimer = null;\n            }\n            SIP.Timers.clearTimeout(this.L);\n            SIP.Timers.clearTimeout(this.H);\n            SIP.Timers.clearTimeout(this.I);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n        }\n    };\n    InviteServerTransaction.prototype.resend_provisional = function () {\n        this.transport.send(this.request).catch(function () {\n            this.onTransportError();\n        }.bind(this));\n    };\n    // INVITE Server Transaction RFC 3261 17.2.1\n    InviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n        var tr = this;\n        var deferred = SIP.Utils.defer();\n        if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    this.transport.send(response).catch(function () {\n                        this.onTransportError();\n                    }.bind(this));\n                    this.last_response = response;\n                    break;\n            }\n        }\n        if (status_code > 100 && status_code <= 199 && this.state === C.STATUS_PROCEEDING) {\n            // Trigger the resendProvisionalTimer only for the first non 100 provisional response.\n            if (this.resendProvisionalTimer === null) {\n                this.resendProvisionalTimer = SIP.Timers.setInterval(tr.resend_provisional.bind(tr), SIP.Timers.PROVISIONAL_RESPONSE_INTERVAL);\n            }\n        }\n        else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    this.stateChanged(C.STATUS_ACCEPTED);\n                    this.last_response = response;\n                    this.L = SIP.Timers.setTimeout(tr.timer_L.bind(tr), SIP.Timers.TIMER_L);\n                    if (this.resendProvisionalTimer !== null) {\n                        SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                        this.resendProvisionalTimer = null;\n                    }\n                /* falls through */\n                case C.STATUS_ACCEPTED:\n                    // Note that this point will be reached for proceeding tr.state also.\n                    this.transport.send(response).then(function () {\n                        deferred.resolve();\n                    }).catch(function (error) {\n                        this.logger.error(error);\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n                case C.STATUS_PROCEEDING:\n                    if (this.resendProvisionalTimer !== null) {\n                        SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                        this.resendProvisionalTimer = null;\n                    }\n                    this.transport.send(response).then(function () {\n                        this.stateChanged(C.STATUS_COMPLETED);\n                        this.H = SIP.Timers.setTimeout(tr.timer_H.bind(tr), SIP.Timers.TIMER_H);\n                        deferred.resolve();\n                    }.bind(this)).catch(function (error) {\n                        this.logger.error(error);\n                        this.onTransportError();\n                        deferred.reject();\n                    }.bind(this));\n                    break;\n            }\n        }\n        return deferred.promise;\n    };\n    /**\n     * @function\n     * @param {SIP.UA} ua\n     * @param {SIP.IncomingRequest} request\n     *\n     * @return {boolean}\n     * INVITE:\n     *  _true_ if retransmission\n     *  _false_ new request\n     *\n     * ACK:\n     *  _true_  ACK to non2xx response\n     *  _false_ ACK must be passed to TU (accepted state)\n     *          ACK to 2xx response\n     *\n     * CANCEL:\n     *  _true_  no matching invite transaction\n     *  _false_ matching invite transaction and no final response sent\n     *\n     * OTHER:\n     *  _true_  retransmission\n     *  _false_ new request\n     */\n    var checkTransaction = function (ua, request) {\n        var tr;\n        switch (request.method) {\n            case SIP.C.INVITE:\n                tr = ua.transactions.ist[request.via_branch];\n                if (tr) {\n                    switch (tr.state) {\n                        case C.STATUS_PROCEEDING:\n                            tr.transport.send(tr.last_response);\n                            break;\n                        // RFC 6026 7.1 Invite retransmission\n                        //received while in C.STATUS_ACCEPTED state. Absorb it.\n                        case C.STATUS_ACCEPTED:\n                            break;\n                    }\n                    return true;\n                }\n                break;\n            case SIP.C.ACK:\n                tr = ua.transactions.ist[request.via_branch];\n                // RFC 6026 7.1\n                if (tr) {\n                    if (tr.state === C.STATUS_ACCEPTED) {\n                        return false;\n                    }\n                    else if (tr.state === C.STATUS_COMPLETED) {\n                        tr.stateChanged(C.STATUS_CONFIRMED);\n                        tr.I = SIP.Timers.setTimeout(tr.timer_I.bind(tr), SIP.Timers.TIMER_I);\n                        return true;\n                    }\n                }\n                // ACK to 2XX Response.\n                else {\n                    return false;\n                }\n                break;\n            case SIP.C.CANCEL:\n                tr = ua.transactions.ist[request.via_branch];\n                if (tr) {\n                    request.reply_sl(200);\n                    if (tr.state === C.STATUS_PROCEEDING) {\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                }\n                else {\n                    request.reply_sl(481);\n                    return true;\n                }\n            default:\n                // Non-INVITE Server Transaction RFC 3261 17.2.2\n                tr = ua.transactions.nist[request.via_branch];\n                if (tr) {\n                    switch (tr.state) {\n                        case C.STATUS_TRYING:\n                            break;\n                        case C.STATUS_PROCEEDING:\n                        case C.STATUS_COMPLETED:\n                            tr.transport.send(tr.last_response);\n                            break;\n                    }\n                    return true;\n                }\n                break;\n        }\n    };\n    SIP.Transactions = {\n        C: C,\n        checkTransaction: checkTransaction,\n        NonInviteClientTransaction: NonInviteClientTransaction,\n        InviteClientTransaction: InviteClientTransaction,\n        AckClientTransaction: AckClientTransaction,\n        NonInviteServerTransaction: NonInviteServerTransaction,\n        InviteServerTransaction: InviteServerTransaction\n    };\n};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Dialog\n */\n/**\n * @augments SIP\n * @class Class creating a SIP dialog.\n * @param {SIP.RTCSession} owner\n * @param {SIP.IncomingRequest|SIP.IncomingResponse} message\n * @param {Enum} type UAC / UAS\n * @param {Enum} state SIP.Dialog.C.STATUS_EARLY / SIP.Dialog.C.STATUS_CONFIRMED\n */\nmodule.exports = function (SIP) {\n    var RequestSender = __webpack_require__(17)(SIP);\n    var Dialog, C = {\n        // Dialog states\n        STATUS_EARLY: 1,\n        STATUS_CONFIRMED: 2\n    };\n    // RFC 3261 12.1\n    Dialog = function (owner, message, type, state) {\n        var contact;\n        this.uac_pending_reply = false;\n        this.uas_pending_reply = false;\n        if (!message.hasHeader('contact')) {\n            return {\n                error: 'unable to create a Dialog without Contact header field'\n            };\n        }\n        if (message instanceof SIP.IncomingResponse) {\n            state = (message.status_code < 200) ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n        }\n        else {\n            // Create confirmed dialog if state is not defined\n            state = state || C.STATUS_CONFIRMED;\n        }\n        contact = message.parseHeader('contact');\n        // RFC 3261 12.1.1\n        if (type === 'UAS') {\n            this.id = {\n                call_id: message.call_id,\n                local_tag: message.to_tag,\n                remote_tag: message.from_tag,\n                toString: function () {\n                    return this.call_id + this.local_tag + this.remote_tag;\n                }\n            };\n            this.state = state;\n            this.remote_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('to').uri;\n            this.remote_uri = message.parseHeader('from').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route');\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n        }\n        // RFC 3261 12.1.2\n        else if (type === 'UAC') {\n            this.id = {\n                call_id: message.call_id,\n                local_tag: message.from_tag,\n                remote_tag: message.to_tag,\n                toString: function () {\n                    return this.call_id + this.local_tag + this.remote_tag;\n                }\n            };\n            this.state = state;\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('from').uri;\n            this.pracked = [];\n            this.remote_uri = message.parseHeader('to').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route').reverse();\n        }\n        this.logger = owner.ua.getLogger('sip.dialog', this.id.toString());\n        this.owner = owner;\n        owner.ua.dialogs[this.id.toString()] = this;\n        this.logger.log('new ' + type + ' dialog created with status ' + (this.state === C.STATUS_EARLY ? 'EARLY' : 'CONFIRMED'));\n        owner.emit('dialog', this);\n    };\n    Dialog.prototype = {\n        /**\n         * @param {SIP.IncomingMessage} message\n         * @param {Enum} UAC/UAS\n         */\n        update: function (message, type) {\n            this.state = C.STATUS_CONFIRMED;\n            this.logger.log('dialog ' + this.id.toString() + '  changed to CONFIRMED state');\n            if (type === 'UAC') {\n                // RFC 3261 13.2.2.4\n                this.route_set = message.getHeaders('record-route').reverse();\n            }\n        },\n        terminate: function () {\n            this.logger.log('dialog ' + this.id.toString() + ' deleted');\n            if (this.sessionDescriptionHandler && this.state !== C.STATUS_CONFIRMED) {\n                // TODO: This should call .close() on the handler when implemented\n                this.sessionDescriptionHandler.close();\n            }\n            delete this.owner.ua.dialogs[this.id.toString()];\n        },\n        /**\n        * @param {String} method request method\n        * @param {Object} extraHeaders extra headers\n        * @returns {SIP.OutgoingRequest}\n        */\n        // RFC 3261 12.2.1.1\n        createRequest: function (method, extraHeaders, body) {\n            var cseq, request;\n            extraHeaders = (extraHeaders || []).slice();\n            if (!this.local_seqnum) {\n                this.local_seqnum = Math.floor(Math.random() * 10000);\n            }\n            cseq = (method === SIP.C.CANCEL || method === SIP.C.ACK) ? this.invite_seqnum : this.local_seqnum += 1;\n            request = new SIP.OutgoingRequest(method, this.remote_target, this.owner.ua, {\n                'cseq': cseq,\n                'call_id': this.id.call_id,\n                'from_uri': this.local_uri,\n                'from_tag': this.id.local_tag,\n                'to_uri': this.remote_uri,\n                'to_tag': this.id.remote_tag,\n                'route_set': this.route_set\n            }, extraHeaders, body);\n            request.dialog = this;\n            return request;\n        },\n        /**\n        * @param {SIP.IncomingRequest} request\n        * @returns {Boolean}\n        */\n        // RFC 3261 12.2.2\n        checkInDialogRequest: function (request) {\n            var self = this;\n            if (!this.remote_seqnum) {\n                this.remote_seqnum = request.cseq;\n            }\n            else if (request.cseq < this.remote_seqnum) {\n                //Do not try to reply to an ACK request.\n                if (request.method !== SIP.C.ACK) {\n                    request.reply(500);\n                }\n                if (request.cseq === this.invite_seqnum) {\n                    return true;\n                }\n                return false;\n            }\n            switch (request.method) {\n                // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-\n                case SIP.C.INVITE:\n                    if (this.uac_pending_reply === true) {\n                        request.reply(491);\n                    }\n                    else if (this.uas_pending_reply === true && request.cseq > this.remote_seqnum) {\n                        var retryAfter = (Math.random() * 10 | 0) + 1;\n                        request.reply(500, null, ['Retry-After:' + retryAfter]);\n                        this.remote_seqnum = request.cseq;\n                        return false;\n                    }\n                    else {\n                        this.uas_pending_reply = true;\n                        request.server_transaction.on('stateChanged', function stateChanged() {\n                            if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                                this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                                this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                                this.removeListener('stateChanged', stateChanged);\n                                self.uas_pending_reply = false;\n                            }\n                        });\n                    }\n                    // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted\n                    if (request.hasHeader('contact')) {\n                        request.server_transaction.on('stateChanged', function () {\n                            if (this.state === SIP.Transactions.C.STATUS_ACCEPTED) {\n                                self.remote_target = request.parseHeader('contact').uri;\n                            }\n                        });\n                    }\n                    break;\n                case SIP.C.NOTIFY:\n                    // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted\n                    if (request.hasHeader('contact')) {\n                        request.server_transaction.on('stateChanged', function () {\n                            if (this.state === SIP.Transactions.C.STATUS_COMPLETED) {\n                                self.remote_target = request.parseHeader('contact').uri;\n                            }\n                        });\n                    }\n                    break;\n            }\n            if (request.cseq > this.remote_seqnum) {\n                this.remote_seqnum = request.cseq;\n            }\n            return true;\n        },\n        sendRequest: function (applicant, method, options) {\n            options = options || {};\n            var extraHeaders = (options.extraHeaders || []).slice();\n            var body = null;\n            if (options.body) {\n                if (options.body.body) {\n                    body = options.body;\n                }\n                else {\n                    body = {};\n                    body.body = options.body;\n                    if (options.contentType) {\n                        body.contentType = options.contentType;\n                    }\n                }\n            }\n            var request = this.createRequest(method, extraHeaders, body), request_sender = new RequestSender(this, applicant, request);\n            request_sender.send();\n            return request;\n        },\n        /**\n        * @param {SIP.IncomingRequest} request\n        */\n        receiveRequest: function (request) {\n            //Check in-dialog request\n            if (!this.checkInDialogRequest(request)) {\n                return;\n            }\n            this.owner.receiveRequest(request);\n        }\n    };\n    Dialog.C = C;\n    SIP.Dialog = Dialog;\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview In-Dialog Request Sender\n */\n/**\n * @augments SIP.Dialog\n * @class Class creating an In-dialog request sender.\n * @param {SIP.Dialog} dialog\n * @param {Object} applicant\n * @param {SIP.OutgoingRequest} request\n */\n/**\n * @fileoverview in-Dialog Request Sender\n */\nmodule.exports = function (SIP) {\n    var RequestSender;\n    RequestSender = function (dialog, applicant, request) {\n        this.dialog = dialog;\n        this.applicant = applicant;\n        this.request = request;\n        // RFC3261 14.1 Modifying an Existing Session. UAC Behavior.\n        this.reattempt = false;\n        this.reattemptTimer = null;\n    };\n    RequestSender.prototype = {\n        send: function () {\n            var self = this, request_sender = new SIP.RequestSender(this, this.dialog.owner.ua);\n            request_sender.send();\n            // RFC3261 14.2 Modifying an Existing Session -UAC BEHAVIOR-\n            if (this.request.method === SIP.C.INVITE && request_sender.clientTransaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n                this.dialog.uac_pending_reply = true;\n                request_sender.clientTransaction.on('stateChanged', function stateChanged() {\n                    if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                        this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                        this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                        this.removeListener('stateChanged', stateChanged);\n                        self.dialog.uac_pending_reply = false;\n                    }\n                });\n            }\n        },\n        onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n        },\n        onTransportError: function () {\n            this.applicant.onTransportError();\n        },\n        receiveResponse: function (response) {\n            var self = this;\n            // RFC3261 12.2.1.2 408 or 481 is received for a request within a dialog.\n            if (response.status_code === 408 || response.status_code === 481) {\n                this.applicant.onDialogError(response);\n            }\n            else if (response.method === SIP.C.INVITE && response.status_code === 491) {\n                if (this.reattempt) {\n                    this.applicant.receiveResponse(response);\n                }\n                else {\n                    this.request.cseq.value = this.dialog.local_seqnum += 1;\n                    this.reattemptTimer = SIP.Timers.setTimeout(function () {\n                        if (self.applicant.owner.status !== SIP.Session.C.STATUS_TERMINATED) {\n                            self.reattempt = true;\n                            self.request_sender.send();\n                        }\n                    }, this.getReattemptTimeout());\n                }\n            }\n            else {\n                this.applicant.receiveResponse(response);\n            }\n        }\n    };\n    return RequestSender;\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Request Sender\n */\n/**\n * @augments SIP\n * @class Class creating a request sender.\n * @param {Object} applicant\n * @param {SIP.UA} ua\n */\nmodule.exports = function (SIP) {\n    var RequestSender;\n    RequestSender = function (applicant, ua) {\n        this.logger = ua.getLogger('sip.requestsender');\n        this.ua = ua;\n        this.applicant = applicant;\n        this.method = applicant.request.method;\n        this.request = applicant.request;\n        this.credentials = null;\n        this.challenged = false;\n        this.staled = false;\n        // If ua is in closing process or even closed just allow sending Bye and ACK\n        if (ua.status === SIP.UA.C.STATUS_USER_CLOSED && (this.method !== SIP.C.BYE || this.method !== SIP.C.ACK)) {\n            this.onTransportError();\n        }\n    };\n    /**\n    * Create the client transaction and send the message.\n    */\n    RequestSender.prototype = {\n        send: function () {\n            switch (this.method) {\n                case \"INVITE\":\n                    this.clientTransaction = new SIP.Transactions.InviteClientTransaction(this, this.request, this.ua.transport);\n                    break;\n                case \"ACK\":\n                    this.clientTransaction = new SIP.Transactions.AckClientTransaction(this, this.request, this.ua.transport);\n                    break;\n                default:\n                    this.clientTransaction = new SIP.Transactions.NonInviteClientTransaction(this, this.request, this.ua.transport);\n            }\n            this.clientTransaction.send();\n            return this.clientTransaction;\n        },\n        /**\n        * Callback fired when receiving a request timeout error from the client transaction.\n        * To be re-defined by the applicant.\n        * @event\n        */\n        onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n        },\n        /**\n        * Callback fired when receiving a transport error from the client transaction.\n        * To be re-defined by the applicant.\n        * @event\n        */\n        onTransportError: function () {\n            this.applicant.onTransportError();\n        },\n        /**\n        * Called from client transaction when receiving a correct response to the request.\n        * Authenticate request if needed or pass the response back to the applicant.\n        * @param {SIP.IncomingResponse} response\n        */\n        receiveResponse: function (response) {\n            var cseq, challenge, authorization_header_name, status_code = response.status_code;\n            /*\n            * Authentication\n            * Authenticate once. _challenged_ flag used to avoid infinite authentications.\n            */\n            if (status_code === 401 || status_code === 407) {\n                // Get and parse the appropriate WWW-Authenticate or Proxy-Authenticate header.\n                if (response.status_code === 401) {\n                    challenge = response.parseHeader('www-authenticate');\n                    authorization_header_name = 'authorization';\n                }\n                else {\n                    challenge = response.parseHeader('proxy-authenticate');\n                    authorization_header_name = 'proxy-authorization';\n                }\n                // Verify it seems a valid challenge.\n                if (!challenge) {\n                    this.logger.warn(response.status_code + ' with wrong or missing challenge, cannot authenticate');\n                    this.applicant.receiveResponse(response);\n                    return;\n                }\n                if (!this.challenged || (!this.staled && challenge.stale === true)) {\n                    if (!this.credentials) {\n                        this.credentials = this.ua.configuration.authenticationFactory(this.ua);\n                    }\n                    // Verify that the challenge is really valid.\n                    if (!this.credentials.authenticate(this.request, challenge)) {\n                        this.applicant.receiveResponse(response);\n                        return;\n                    }\n                    this.challenged = true;\n                    if (challenge.stale) {\n                        this.staled = true;\n                    }\n                    if (response.method === SIP.C.REGISTER) {\n                        cseq = this.applicant.cseq += 1;\n                    }\n                    else if (this.request.dialog) {\n                        cseq = this.request.dialog.local_seqnum += 1;\n                    }\n                    else {\n                        cseq = this.request.cseq + 1;\n                        this.request.cseq = cseq;\n                    }\n                    this.request.setHeader('cseq', cseq + ' ' + this.method);\n                    this.request.setHeader(authorization_header_name, this.credentials.toString());\n                    this.send();\n                }\n                else {\n                    this.applicant.receiveResponse(response);\n                }\n            }\n            else {\n                this.applicant.receiveResponse(response);\n            }\n        }\n    };\n    SIP.RequestSender = RequestSender;\n};\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var RegisterContext;\n    RegisterContext = function (ua) {\n        var params = {}, regId = 1;\n        this.registrar = ua.configuration.registrarServer;\n        this.expires = ua.configuration.registerExpires;\n        // Contact header\n        this.contact = ua.contact.toString();\n        if (regId) {\n            this.contact += ';reg-id=' + regId;\n            this.contact += ';+sip.instance=\"<urn:uuid:' + ua.configuration.instanceId + '>\"';\n        }\n        // Call-ID and CSeq values RFC3261 10.2\n        this.call_id = SIP.Utils.createRandomToken(22);\n        this.cseq = Math.floor(Math.random() * 10000);\n        this.to_uri = ua.configuration.uri;\n        params.to_uri = this.to_uri;\n        params.to_displayName = ua.configuration.displayName;\n        params.call_id = this.call_id;\n        params.cseq = this.cseq;\n        // Extends ClientContext\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, 'REGISTER', this.registrar, { params: params }]);\n        this.registrationTimer = null;\n        this.registrationExpiredTimer = null;\n        // Set status\n        this.registered = false;\n        this.logger = ua.getLogger('sip.registercontext');\n        ua.on('transportCreated', function (transport) {\n            transport.on('disconnected', this.onTransportDisconnected.bind(this));\n        }.bind(this));\n    };\n    RegisterContext.prototype = Object.create({}, {\n        register: { writable: true, value: function register(options) {\n                var self = this, extraHeaders;\n                // Handle Options\n                this.options = options || {};\n                extraHeaders = (this.options.extraHeaders || []).slice();\n                extraHeaders.push('Contact: ' + this.contact + ';expires=' + this.expires);\n                extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n                // Save original extraHeaders to be used in .close\n                this.closeHeaders = this.options.closeWithHeaders ?\n                    (this.options.extraHeaders || []).slice() : [];\n                this.receiveResponse = function (response) {\n                    var contact, expires, contacts = response.getHeaders('contact').length, cause;\n                    // Discard responses to older REGISTER/un-REGISTER requests.\n                    if (response.cseq !== this.cseq) {\n                        return;\n                    }\n                    // Clear registration timer\n                    if (this.registrationTimer !== null) {\n                        SIP.Timers.clearTimeout(this.registrationTimer);\n                        this.registrationTimer = null;\n                    }\n                    switch (true) {\n                        case /^1[0-9]{2}$/.test(response.status_code):\n                            this.emit('progress', response);\n                            break;\n                        case /^2[0-9]{2}$/.test(response.status_code):\n                            this.emit('accepted', response);\n                            if (response.hasHeader('expires')) {\n                                expires = response.getHeader('expires');\n                            }\n                            if (this.registrationExpiredTimer !== null) {\n                                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                                this.registrationExpiredTimer = null;\n                            }\n                            // Search the Contact pointing to us and update the expires value accordingly.\n                            if (!contacts) {\n                                this.logger.warn('no Contact header in response to REGISTER, response ignored');\n                                break;\n                            }\n                            while (contacts--) {\n                                contact = response.parseHeader('contact', contacts);\n                                if (contact.uri.user === this.ua.contact.uri.user) {\n                                    expires = contact.getParam('expires');\n                                    break;\n                                }\n                                else {\n                                    contact = null;\n                                }\n                            }\n                            if (!contact) {\n                                this.logger.warn('no Contact header pointing to us, response ignored');\n                                break;\n                            }\n                            if (!expires) {\n                                expires = this.expires;\n                            }\n                            // Re-Register before the expiration interval has elapsed.\n                            // For that, decrease the expires value. ie: 3 seconds\n                            this.registrationTimer = SIP.Timers.setTimeout(function () {\n                                self.registrationTimer = null;\n                                self.register(self.options);\n                            }, (expires * 1000) - 3000);\n                            this.registrationExpiredTimer = SIP.Timers.setTimeout(function () {\n                                self.logger.warn('registration expired');\n                                if (self.registered) {\n                                    self.unregistered(null, SIP.C.causes.EXPIRES);\n                                }\n                            }, expires * 1000);\n                            //Save gruu values\n                            if (contact.hasParam('temp-gruu')) {\n                                this.ua.contact.temp_gruu = SIP.URI.parse(contact.getParam('temp-gruu').replace(/\"/g, ''));\n                            }\n                            if (contact.hasParam('pub-gruu')) {\n                                this.ua.contact.pub_gruu = SIP.URI.parse(contact.getParam('pub-gruu').replace(/\"/g, ''));\n                            }\n                            this.registered = true;\n                            this.emit('registered', response || null);\n                            break;\n                        // Interval too brief RFC3261 10.2.8\n                        case /^423$/.test(response.status_code):\n                            if (response.hasHeader('min-expires')) {\n                                // Increase our registration interval to the suggested minimum\n                                this.expires = response.getHeader('min-expires');\n                                // Attempt the registration again immediately\n                                this.register(this.options);\n                            }\n                            else { //This response MUST contain a Min-Expires header field\n                                this.logger.warn('423 response received for REGISTER without Min-Expires');\n                                this.registrationFailure(response, SIP.C.causes.SIP_FAILURE_CODE);\n                            }\n                            break;\n                        default:\n                            cause = SIP.Utils.sipErrorCause(response.status_code);\n                            this.registrationFailure(response, cause);\n                    }\n                };\n                this.onRequestTimeout = function () {\n                    this.registrationFailure(null, SIP.C.causes.REQUEST_TIMEOUT);\n                };\n                this.onTransportError = function () {\n                    this.registrationFailure(null, SIP.C.causes.CONNECTION_ERROR);\n                };\n                this.cseq++;\n                this.request.cseq = this.cseq;\n                this.request.setHeader('cseq', this.cseq + ' REGISTER');\n                this.request.extraHeaders = extraHeaders;\n                this.send();\n            } },\n        registrationFailure: { writable: true, value: function registrationFailure(response, cause) {\n                this.emit('failed', response || null, cause || null);\n            } },\n        onTransportDisconnected: { writable: true, value: function onTransportDisconnected() {\n                this.registered_before = this.registered;\n                if (this.registrationTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationTimer);\n                    this.registrationTimer = null;\n                }\n                if (this.registrationExpiredTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                    this.registrationExpiredTimer = null;\n                }\n                if (this.registered) {\n                    this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onTransportConnected: { writable: true, value: function onTransportConnected() {\n                this.register(this.options);\n            } },\n        close: { writable: true, value: function close() {\n                var options = {\n                    all: false,\n                    extraHeaders: this.closeHeaders\n                };\n                this.registered_before = this.registered;\n                if (this.registered) {\n                    this.unregister(options);\n                }\n            } },\n        unregister: { writable: true, value: function unregister(options) {\n                var extraHeaders;\n                options = options || {};\n                if (!this.registered && !options.all) {\n                    this.logger.warn('Already unregistered, but sending an unregister anyways.');\n                }\n                extraHeaders = (options.extraHeaders || []).slice();\n                this.registered = false;\n                // Clear the registration timer.\n                if (this.registrationTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationTimer);\n                    this.registrationTimer = null;\n                }\n                if (options.all) {\n                    extraHeaders.push('Contact: *');\n                    extraHeaders.push('Expires: 0');\n                }\n                else {\n                    extraHeaders.push('Contact: ' + this.contact + ';expires=0');\n                }\n                this.receiveResponse = function (response) {\n                    var cause;\n                    switch (true) {\n                        case /^1[0-9]{2}$/.test(response.status_code):\n                            this.emit('progress', response);\n                            break;\n                        case /^2[0-9]{2}$/.test(response.status_code):\n                            this.emit('accepted', response);\n                            if (this.registrationExpiredTimer !== null) {\n                                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                                this.registrationExpiredTimer = null;\n                            }\n                            this.unregistered(response);\n                            break;\n                        default:\n                            cause = SIP.Utils.sipErrorCause(response.status_code);\n                            this.unregistered(response, cause);\n                    }\n                };\n                this.onRequestTimeout = function () {\n                    // Not actually unregistered...\n                    //this.unregistered(null, SIP.C.causes.REQUEST_TIMEOUT);\n                };\n                this.cseq++;\n                this.request.cseq = this.cseq;\n                this.request.setHeader('cseq', this.cseq + ' REGISTER');\n                this.request.extraHeaders = extraHeaders;\n                this.send();\n            } },\n        unregistered: { writable: true, value: function unregistered(response, cause) {\n                this.registered = false;\n                this.emit('unregistered', response || null, cause || null);\n            } }\n    });\n    SIP.RegisterContext = RegisterContext;\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* eslint-disable */\n/**\n * @fileoverview SessionDescriptionHandler\n */\n/* SessionDescriptionHandler\n * @class PeerConnection helper Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\nmodule.exports = function (EventEmitter) {\n    var SessionDescriptionHandler = function () { };\n    SessionDescriptionHandler.prototype = Object.create(EventEmitter.prototype, {\n        /**\n         * Destructor\n         */\n        close: { value: function close() { } },\n        /**\n         * Gets the local description from the underlying media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves with the local description to be used for the session\n         */\n        getDescription: { value: function getDescription(options, modifiers) { } },\n        /**\n         * Check if the Session Description Handler can handle the Content-Type described by a SIP Message\n         * @param {String} contentType The content type that is in the SIP Message\n         * @returns {boolean}\n         */\n        hasDescription: { value: function hasSessionDescription(contentType) { } },\n        /**\n         * The modifier that should be used when the session would like to place the call on hold\n         * @param {String} [sdp] The description that will be modified\n         * @returns {Promise} Promise that resolves with modified SDP\n         */\n        holdModifier: { value: function holdModifier(sdp) { } },\n        /**\n         * Set the remote description to the underlying media implementation\n         * @param {String} sessionDescription The description provided by a SIP message to be set on the media implementation\n         * @param {Object} [options] Options object to be used by setDescription\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves once the description is set\n         */\n        setDescription: { value: function setDescription(sessionDescription, options, modifiers) { } },\n        /**\n         * Send DTMF via RTP (RFC 4733)\n         * @param {String} tones A string containing DTMF digits\n         * @param {Object} [options] Options object to be used by sendDtmf\n         * @returns {boolean} true if DTMF send is successful, false otherwise\n         */\n        sendDtmf: { value: function sendDtmf(tones, options) { } },\n        /**\n        * Get the direction of the session description\n        * @returns {String} direction of the description\n        */\n        getDirection: { value: function getDirection() { } },\n    });\n    return SessionDescriptionHandler;\n};\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var ClientContext;\n    ClientContext = function (ua, method, target, options) {\n        var originalTarget = target;\n        // Validate arguments\n        if (target === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        this.ua = ua;\n        this.logger = ua.getLogger('sip.clientcontext');\n        this.method = method;\n        target = ua.normalizeTarget(target);\n        if (!target) {\n            throw new TypeError('Invalid target: ' + originalTarget);\n        }\n        /* Options\n         * - extraHeaders\n         * - params\n         * - contentType\n         * - body\n         */\n        options = Object.create(options || Object.prototype);\n        options.extraHeaders = (options.extraHeaders || []).slice();\n        // Build the request\n        this.request = new SIP.OutgoingRequest(this.method, target, this.ua, options.params, options.extraHeaders);\n        if (options.body) {\n            this.body = {};\n            this.body.body = options.body;\n            if (options.contentType) {\n                this.body.contentType = options.contentType;\n            }\n            this.request.body = this.body;\n        }\n        /* Set other properties from the request */\n        this.localIdentity = this.request.from;\n        this.remoteIdentity = this.request.to;\n        this.data = {};\n    };\n    ClientContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    ClientContext.prototype.send = function () {\n        (new SIP.RequestSender(this, this.ua)).send();\n        return this;\n    };\n    ClientContext.prototype.cancel = function (options) {\n        options = options || {};\n        options.extraHeaders = (options.extraHeaders || []).slice();\n        var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n        this.request.cancel(cancel_reason, options.extraHeaders);\n        this.emit('cancel');\n    };\n    ClientContext.prototype.receiveResponse = function (response) {\n        var cause = SIP.Utils.getReasonPhrase(response.status_code);\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                this.emit('progress', response, cause);\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                if (this.ua.applicants[this]) {\n                    delete this.ua.applicants[this];\n                }\n                this.emit('accepted', response, cause);\n                break;\n            default:\n                if (this.ua.applicants[this]) {\n                    delete this.ua.applicants[this];\n                }\n                this.emit('rejected', response, cause);\n                this.emit('failed', response, cause);\n                break;\n        }\n    };\n    ClientContext.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    ClientContext.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.ClientContext = ClientContext;\n};\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var ServerContext;\n    ServerContext = function (ua, request) {\n        this.ua = ua;\n        this.logger = ua.getLogger('sip.servercontext');\n        this.request = request;\n        if (request.method === SIP.C.INVITE) {\n            this.transaction = new SIP.Transactions.InviteServerTransaction(request, ua);\n        }\n        else {\n            this.transaction = new SIP.Transactions.NonInviteServerTransaction(request, ua);\n        }\n        if (request.body) {\n            this.body = request.body;\n        }\n        if (request.hasHeader('Content-Type')) {\n            this.contentType = request.getHeader('Content-Type');\n        }\n        this.method = request.method;\n        this.data = {};\n        this.localIdentity = request.to;\n        this.remoteIdentity = request.from;\n        if (request.hasHeader('P-Asserted-Identity')) {\n            this.assertedIdentity = new SIP.NameAddrHeader.parse(request.getHeader('P-Asserted-Identity'));\n        }\n    };\n    ServerContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    ServerContext.prototype.progress = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 180);\n        options.minCode = 100;\n        options.maxCode = 199;\n        options.events = ['progress'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.accept = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 200);\n        options.minCode = 200;\n        options.maxCode = 299;\n        options.events = ['accepted'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.reject = function (options) {\n        options = Object.create(options || Object.prototype);\n        options.statusCode || (options.statusCode = 480);\n        options.minCode = 300;\n        options.maxCode = 699;\n        options.events = ['rejected', 'failed'];\n        return this.reply(options);\n    };\n    ServerContext.prototype.reply = function (options) {\n        options = options || {}; // This is okay, so long as we treat options as read-only in this method\n        var statusCode = options.statusCode || 100, minCode = options.minCode || 100, maxCode = options.maxCode || 699, reasonPhrase = SIP.Utils.getReasonPhrase(statusCode, options.reasonPhrase), extraHeaders = options.extraHeaders || [], body = options.body, events = options.events || [], response;\n        if (statusCode < minCode || statusCode > maxCode) {\n            throw new TypeError('Invalid statusCode: ' + statusCode);\n        }\n        response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n        events.forEach(function (event) {\n            this.emit(event, response, reasonPhrase);\n        }, this);\n        return this;\n    };\n    ServerContext.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    ServerContext.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.ServerContext = ServerContext;\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (SIP) {\n    var DTMF = __webpack_require__(24)(SIP);\n    var Session, InviteServerContext, InviteClientContext, ReferServerContext, ReferClientContext, C = {\n        //Session states\n        STATUS_NULL: 0,\n        STATUS_INVITE_SENT: 1,\n        STATUS_1XX_RECEIVED: 2,\n        STATUS_INVITE_RECEIVED: 3,\n        STATUS_WAITING_FOR_ANSWER: 4,\n        STATUS_ANSWERED: 5,\n        STATUS_WAITING_FOR_PRACK: 6,\n        STATUS_WAITING_FOR_ACK: 7,\n        STATUS_CANCELED: 8,\n        STATUS_TERMINATED: 9,\n        STATUS_ANSWERED_WAITING_FOR_PRACK: 10,\n        STATUS_EARLY_MEDIA: 11,\n        STATUS_CONFIRMED: 12\n    };\n    /*\n     * @param {function returning SIP.sessionDescriptionHandler} [sessionDescriptionHandlerFactory]\n     *        (See the documentation for the sessionDescriptionHandlerFactory argument of the UA constructor.)\n     */\n    Session = function (sessionDescriptionHandlerFactory) {\n        this.status = C.STATUS_NULL;\n        this.dialog = null;\n        this.pendingReinvite = false;\n        this.earlyDialogs = {};\n        if (!sessionDescriptionHandlerFactory) {\n            throw new SIP.Exceptions.SessionDescriptionHandlerMissing('A session description handler is required for the session to function');\n        }\n        this.sessionDescriptionHandlerFactory = sessionDescriptionHandlerFactory;\n        this.hasOffer = false;\n        this.hasAnswer = false;\n        // Session Timers\n        this.timers = {\n            ackTimer: null,\n            expiresTimer: null,\n            invite2xxTimer: null,\n            userNoAnswerTimer: null,\n            rel1xxTimer: null,\n            prackTimer: null\n        };\n        // Session info\n        this.startTime = null;\n        this.endTime = null;\n        this.tones = null;\n        // Hold state\n        this.local_hold = false;\n        this.early_sdp = null;\n        this.rel100 = SIP.C.supported.UNSUPPORTED;\n    };\n    Session.prototype = {\n        dtmf: function (tones, options) {\n            var tone, dtmfs = [], self = this, dtmfType = this.ua.configuration.dtmfType;\n            options = options || {};\n            if (tones === undefined) {\n                throw new TypeError('Not enough arguments');\n            }\n            // Check Session Status\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_WAITING_FOR_ACK) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            // Check tones\n            if ((typeof tones !== 'string' && typeof tones !== 'number') || !tones.toString().match(/^[0-9A-D#*,]+$/i)) {\n                throw new TypeError('Invalid tones: ' + tones);\n            }\n            var sendDTMF = function () {\n                var dtmf, timeout;\n                if (self.status === C.STATUS_TERMINATED || !self.tones || self.tones.length === 0) {\n                    // Stop sending DTMF\n                    self.tones = null;\n                    return this;\n                }\n                dtmf = self.tones.shift();\n                if (tone === ',') {\n                    timeout = 2000;\n                }\n                else {\n                    dtmf.on('failed', function () { self.tones = null; });\n                    dtmf.send(options);\n                    timeout = dtmf.duration + dtmf.interToneGap;\n                }\n                // Set timeout for the next tone\n                SIP.Timers.setTimeout(sendDTMF, timeout);\n            };\n            tones = tones.toString();\n            if (dtmfType === SIP.C.dtmfType.RTP) {\n                var sent = this.sessionDescriptionHandler.sendDtmf(tones, options);\n                if (!sent) {\n                    this.logger.warn(\"Attempt to use dtmfType 'RTP' has failed, falling back to INFO packet method\");\n                    dtmfType = SIP.C.dtmfType.INFO;\n                }\n            }\n            if (dtmfType === SIP.C.dtmfType.INFO) {\n                tones = tones.split('');\n                while (tones.length > 0) {\n                    dtmfs.push(new DTMF(this, tones.shift(), options));\n                }\n                if (this.tones) {\n                    // Tones are already queued, just add to the queue\n                    this.tones = this.tones.concat(dtmfs);\n                    return this;\n                }\n                this.tones = dtmfs;\n                sendDTMF();\n            }\n            return this;\n        },\n        bye: function (options) {\n            options = Object.create(options || Object.prototype);\n            var statusCode = options.statusCode;\n            // Check Session Status\n            if (this.status === C.STATUS_TERMINATED) {\n                this.logger.error('Error: Attempted to send BYE in a terminated session.');\n                return this;\n            }\n            this.logger.log('terminating Session');\n            if (statusCode && (statusCode < 200 || statusCode >= 700)) {\n                throw new TypeError('Invalid statusCode: ' + statusCode);\n            }\n            options.receiveResponse = function () { };\n            return this.\n                sendRequest(SIP.C.BYE, options).\n                terminated();\n        },\n        refer: function (target, options) {\n            options = options || {};\n            // Check Session Status\n            if (this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            this.referContext = new SIP.ReferClientContext(this.ua, this, target, options);\n            this.emit('referRequested', this.referContext);\n            this.referContext.refer(options);\n        },\n        sendRequest: function (method, options) {\n            options = options || {};\n            var self = this;\n            var request = new SIP.OutgoingRequest(method, this.dialog.remote_target, this.ua, {\n                cseq: options.cseq || (this.dialog.local_seqnum += 1),\n                call_id: this.dialog.id.call_id,\n                from_uri: this.dialog.local_uri,\n                from_tag: this.dialog.id.local_tag,\n                to_uri: this.dialog.remote_uri,\n                to_tag: this.dialog.id.remote_tag,\n                route_set: this.dialog.route_set,\n                statusCode: options.statusCode,\n                reasonPhrase: options.reasonPhrase\n            }, options.extraHeaders || [], options.body);\n            new SIP.RequestSender({\n                request: request,\n                onRequestTimeout: function () {\n                    self.onRequestTimeout();\n                },\n                onTransportError: function () {\n                    self.onTransportError();\n                },\n                receiveResponse: options.receiveResponse || function (response) {\n                    self.receiveNonInviteResponse(response);\n                }\n            }, this.ua).send();\n            // Emit the request event\n            this.emit(method.toLowerCase(), request);\n            return this;\n        },\n        close: function () {\n            var idx;\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.logger.log('closing INVITE session ' + this.id);\n            // 1st Step. Terminate media.\n            if (this.sessionDescriptionHandler) {\n                this.sessionDescriptionHandler.close();\n            }\n            // 2nd Step. Terminate signaling.\n            // Clear session timers\n            for (idx in this.timers) {\n                SIP.Timers.clearTimeout(this.timers[idx]);\n            }\n            // Terminate dialogs\n            // Terminate confirmed dialog\n            if (this.dialog) {\n                this.dialog.terminate();\n                delete this.dialog;\n            }\n            // Terminate early dialogs\n            for (idx in this.earlyDialogs) {\n                this.earlyDialogs[idx].terminate();\n                delete this.earlyDialogs[idx];\n            }\n            this.status = C.STATUS_TERMINATED;\n            this.ua.transport.removeListener(\"transportError\", this.errorListener);\n            delete this.ua.sessions[this.id];\n            return this;\n        },\n        createDialog: function (message, type, early) {\n            var dialog, early_dialog, local_tag = message[(type === 'UAS') ? 'to_tag' : 'from_tag'], remote_tag = message[(type === 'UAS') ? 'from_tag' : 'to_tag'], id = message.call_id + local_tag + remote_tag;\n            early_dialog = this.earlyDialogs[id];\n            // Early Dialog\n            if (early) {\n                if (early_dialog) {\n                    return true;\n                }\n                else {\n                    early_dialog = new SIP.Dialog(this, message, type, SIP.Dialog.C.STATUS_EARLY);\n                    // Dialog has been successfully created.\n                    if (early_dialog.error) {\n                        this.logger.error(early_dialog.error);\n                        this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                        return false;\n                    }\n                    else {\n                        this.earlyDialogs[id] = early_dialog;\n                        return true;\n                    }\n                }\n            }\n            // Confirmed Dialog\n            else {\n                // In case the dialog is in _early_ state, update it\n                if (early_dialog) {\n                    early_dialog.update(message, type);\n                    this.dialog = early_dialog;\n                    delete this.earlyDialogs[id];\n                    for (var dia in this.earlyDialogs) {\n                        this.earlyDialogs[dia].terminate();\n                        delete this.earlyDialogs[dia];\n                    }\n                    return true;\n                }\n                // Otherwise, create a _confirmed_ dialog\n                dialog = new SIP.Dialog(this, message, type);\n                if (dialog.error) {\n                    this.logger.error(dialog.error);\n                    this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                    return false;\n                }\n                else {\n                    this.to_tag = message.to_tag;\n                    this.dialog = dialog;\n                    return true;\n                }\n            }\n        },\n        /**\n         * Hold\n         */\n        hold: function (options, modifiers) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            if (this.local_hold) {\n                this.logger.log('Session is already on hold, cannot put it on hold again');\n                return;\n            }\n            options = options || {};\n            options.modifiers = modifiers || [];\n            options.modifiers.push(this.sessionDescriptionHandler.holdModifier);\n            this.local_hold = true;\n            this.sendReinvite(options);\n        },\n        /**\n         * Unhold\n         */\n        unhold: function (options, modifiers) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n                throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n            if (!this.local_hold) {\n                this.logger.log('Session is not on hold, cannot unhold it');\n                return;\n            }\n            options = options || {};\n            if (modifiers) {\n                options.modifiers = modifiers;\n            }\n            this.local_hold = false;\n            this.sendReinvite(options);\n        },\n        reinvite: function (options, modifiers) {\n            options = options || {};\n            if (modifiers) {\n                options.modifiers = modifiers;\n            }\n            return this.sendReinvite(options);\n        },\n        /**\n         * In dialog INVITE Reception\n         * @private\n         */\n        receiveReinvite: function (request) {\n            var self = this, promise;\n            // TODO: Should probably check state of the session\n            self.emit('reinvite', this);\n            if (request.hasHeader('P-Asserted-Identity')) {\n                this.assertedIdentity = new SIP.NameAddrHeader.parse(request.getHeader('P-Asserted-Identity'));\n            }\n            // Invite w/o SDP\n            if (request.getHeader('Content-Length') === '0' && !request.getHeader('Content-Type')) {\n                promise = this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions, this.modifiers);\n                // Invite w/ SDP\n            }\n            else if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                promise = this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                    .then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler, this.sessionDescriptionHandlerOptions, this.modifiers));\n                // Bad Packet (should never get hit)\n            }\n            else {\n                request.reply(415);\n                this.emit('reinviteFailed', self);\n                return;\n            }\n            this.receiveRequest = function (request) {\n                if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n                    if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                        this.hasAnswer = true;\n                        this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                            .then(function () {\n                            SIP.Timers.clearTimeout(this.timers.ackTimer);\n                            SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                            this.status = C.STATUS_CONFIRMED;\n                            this.emit('confirmed', request);\n                        }.bind(this));\n                    }\n                    else {\n                        SIP.Timers.clearTimeout(this.timers.ackTimer);\n                        SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                        this.status = C.STATUS_CONFIRMED;\n                        this.emit('confirmed', request);\n                    }\n                }\n                else {\n                    SIP.Session.prototype.receiveRequest.apply(this, [request]);\n                }\n            }.bind(this);\n            promise.catch(function onFailure(e) {\n                var statusCode;\n                if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                    statusCode = 500;\n                }\n                else if (e instanceof SIP.Exceptions.RenegotiationError) {\n                    self.emit('renegotiationError', e);\n                    self.logger.warn(e);\n                    statusCode = 488;\n                }\n                else {\n                    self.logger.error(e);\n                    statusCode = 488;\n                }\n                request.reply(statusCode);\n                self.emit('reinviteFailed', self);\n                // TODO: This could be better\n                throw e;\n            })\n                .then(function (description) {\n                var extraHeaders = ['Contact: ' + self.contact];\n                request.reply(200, null, extraHeaders, description, function () {\n                    self.status = C.STATUS_WAITING_FOR_ACK;\n                    self.setACKTimer();\n                    self.emit('reinviteAccepted', self);\n                });\n            });\n        },\n        sendReinvite: function (options) {\n            if (this.pendingReinvite) {\n                this.logger.warn('Reinvite in progress. Please wait until complete, then try again.');\n                return;\n            }\n            this.pendingReinvite = true;\n            options = options || {};\n            options.modifiers = options.modifiers || [];\n            var self = this, extraHeaders = (options.extraHeaders || []).slice();\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                .then(function (description) {\n                self.sendRequest(SIP.C.INVITE, {\n                    extraHeaders: extraHeaders,\n                    body: description,\n                    receiveResponse: self.receiveReinviteResponse.bind(self)\n                });\n            }).catch(function onFailure(e) {\n                if (e instanceof SIP.Exceptions.RenegotiationError) {\n                    self.pendingReinvite = false;\n                    self.emit('renegotiationError', e);\n                    self.logger.warn('Renegotiation Error');\n                    self.logger.warn(e);\n                    return;\n                }\n                self.logger.error('sessionDescriptionHandler error');\n                self.logger.error(e);\n            });\n        },\n        receiveRequest: function (request) {\n            switch (request.method) {\n                case SIP.C.BYE:\n                    request.reply(200);\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.emit('bye', request);\n                        this.terminated(request, SIP.C.causes.BYE);\n                    }\n                    break;\n                case SIP.C.INVITE:\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.logger.log('re-INVITE received');\n                        this.receiveReinvite(request);\n                    }\n                    break;\n                case SIP.C.INFO:\n                    if (this.status === C.STATUS_CONFIRMED || this.status === C.STATUS_WAITING_FOR_ACK) {\n                        if (this.onInfo) {\n                            return this.onInfo(request);\n                        }\n                        var body, tone, duration, contentType = request.getHeader('content-type'), reg_tone = /^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/, reg_duration = /^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;\n                        if (contentType) {\n                            if (contentType.match(/^application\\/dtmf-relay/i)) {\n                                if (request.body) {\n                                    body = request.body.split('\\r\\n', 2);\n                                    if (body.length === 2) {\n                                        if (reg_tone.test(body[0])) {\n                                            tone = body[0].replace(reg_tone, \"$2\");\n                                        }\n                                        if (reg_duration.test(body[1])) {\n                                            duration = parseInt(body[1].replace(reg_duration, \"$2\"), 10);\n                                        }\n                                    }\n                                }\n                                new DTMF(this, tone, { duration: duration }).init_incoming(request);\n                            }\n                            else {\n                                request.reply(415, null, [\"Accept: application/dtmf-relay\"]);\n                            }\n                        }\n                    }\n                    break;\n                case SIP.C.REFER:\n                    if (this.status === C.STATUS_CONFIRMED) {\n                        this.logger.log('REFER received');\n                        this.referContext = new SIP.ReferServerContext(this.ua, request);\n                        var hasReferListener = this.listeners('referRequested').length;\n                        if (hasReferListener) {\n                            this.emit('referRequested', this.referContext);\n                        }\n                        else {\n                            this.logger.log('No referRequested listeners, automatically accepting and following the refer');\n                            var options = { followRefer: true };\n                            if (this.passedOptions) {\n                                options.inviteOptions = this.passedOptions;\n                            }\n                            this.referContext.accept(options, this.modifiers);\n                        }\n                    }\n                    break;\n                case SIP.C.NOTIFY:\n                    if ((this.referContext && this.referContext instanceof SIP.ReferClientContext) && request.hasHeader('event') && /^refer(;.*)?$/.test(request.getHeader('event'))) {\n                        this.referContext.receiveNotify(request);\n                        return;\n                    }\n                    request.reply(200, 'OK');\n                    this.emit('notify', request);\n                    break;\n            }\n        },\n        /**\n         * Reception of Response for in-dialog INVITE\n         * @private\n         */\n        receiveReinviteResponse: function (response) {\n            var self = this;\n            if (this.status === C.STATUS_TERMINATED) {\n                this.logger.error('Received reinvite response, but in STATUS_TERMINATED');\n                // TODO: Do we need to send a SIP response?\n                return;\n            }\n            if (!this.pendingReinvite) {\n                this.logger.error('Received reinvite response, but have no pending reinvite');\n                // TODO: Do we need to send a SIP response?\n                return;\n            }\n            switch (true) {\n                case /^1[0-9]{2}$/.test(response.status_code):\n                    break;\n                case /^2[0-9]{2}$/.test(response.status_code):\n                    this.status = C.STATUS_CONFIRMED;\n                    // 17.1.1.1 - For each final response that is received at the client transaction, the client transaction sends an ACK,\n                    this.emit(\"ack\", response.transaction.sendACK());\n                    this.pendingReinvite = false;\n                    // TODO: All of these timers should move into the Transaction layer\n                    SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n                    if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                        this.logger.error('2XX response received to re-invite but did not have a description');\n                        this.emit('reinviteFailed', self);\n                        this.emit('renegotiationError', new SIP.Exceptions.RenegotiationError('2XX response received to re-invite but did not have a description'));\n                        break;\n                    }\n                    this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                        .catch(function onFailure(e) {\n                        self.logger.error('Could not set the description in 2XX response');\n                        self.logger.error(e);\n                        self.emit('reinviteFailed', self);\n                        self.emit('renegotiationError', e);\n                        self.sendRequest(SIP.C.BYE, {\n                            extraHeaders: ['Reason: ' + SIP.Utils.getReasonHeaderValue(488, 'Not Acceptable Here')]\n                        });\n                        self.terminated(null, SIP.C.causes.INCOMPATIBLE_SDP);\n                    }).then(function () {\n                        self.emit('reinviteAccepted', self);\n                    });\n                    break;\n                default:\n                    this.pendingReinvite = false;\n                    this.logger.log('Received a non 1XX or 2XX response to a re-invite');\n                    this.emit('reinviteFailed', self);\n                    this.emit('renegotiationError', new SIP.Exceptions.RenegotiationError('Invalid response to a re-invite'));\n            }\n        },\n        acceptAndTerminate: function (response, status_code, reason_phrase) {\n            var extraHeaders = [];\n            if (status_code) {\n                extraHeaders.push('Reason: ' + SIP.Utils.getReasonHeaderValue(status_code, reason_phrase));\n            }\n            // An error on dialog creation will fire 'failed' event\n            if (this.dialog || this.createDialog(response, 'UAC')) {\n                this.emit(\"ack\", response.transaction.sendACK());\n                this.sendRequest(SIP.C.BYE, {\n                    extraHeaders: extraHeaders\n                });\n            }\n            return this;\n        },\n        /**\n         * RFC3261 13.3.1.4\n         * Response retransmissions cannot be accomplished by transaction layer\n         *  since it is destroyed when receiving the first 2xx answer\n         */\n        setInvite2xxTimer: function (request, description) {\n            var self = this, timeout = SIP.Timers.T1;\n            this.timers.invite2xxTimer = SIP.Timers.setTimeout(function invite2xxRetransmission() {\n                if (self.status !== C.STATUS_WAITING_FOR_ACK) {\n                    return;\n                }\n                self.logger.log('no ACK received, attempting to retransmit OK');\n                var extraHeaders = ['Contact: ' + self.contact];\n                request.reply(200, null, extraHeaders, description);\n                timeout = Math.min(timeout * 2, SIP.Timers.T2);\n                self.timers.invite2xxTimer = SIP.Timers.setTimeout(invite2xxRetransmission, timeout);\n            }, timeout);\n        },\n        /**\n         * RFC3261 14.2\n         * If a UAS generates a 2xx response and never receives an ACK,\n         *  it SHOULD generate a BYE to terminate the dialog.\n         */\n        setACKTimer: function () {\n            var self = this;\n            this.timers.ackTimer = SIP.Timers.setTimeout(function () {\n                if (self.status === C.STATUS_WAITING_FOR_ACK) {\n                    self.logger.log('no ACK received for an extended period of time, terminating the call');\n                    SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n                    self.sendRequest(SIP.C.BYE);\n                    self.terminated(null, SIP.C.causes.NO_ACK);\n                }\n            }, SIP.Timers.TIMER_H);\n        },\n        /*\n         * @private\n         */\n        onTransportError: function () {\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n        },\n        onRequestTimeout: function () {\n            if (this.status === C.STATUS_CONFIRMED) {\n                this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n            else if (this.status !== C.STATUS_TERMINATED) {\n                this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n        },\n        onDialogError: function (response) {\n            if (this.status === C.STATUS_CONFIRMED) {\n                this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            }\n            else if (this.status !== C.STATUS_TERMINATED) {\n                this.failed(response, SIP.C.causes.DIALOG_ERROR);\n                this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            }\n        },\n        /**\n         * @private\n         */\n        failed: function (response, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.emit('failed', response || null, cause || null);\n            return this;\n        },\n        rejected: function (response, cause) {\n            this.emit('rejected', response || null, cause || null);\n            return this;\n        },\n        canceled: function () {\n            if (this.sessionDescriptionHandler) {\n                this.sessionDescriptionHandler.close();\n            }\n            this.emit('cancel');\n            return this;\n        },\n        accepted: function (response, cause) {\n            cause = SIP.Utils.getReasonPhrase(response && response.status_code, cause);\n            this.startTime = new Date();\n            if (this.replacee) {\n                this.replacee.emit('replaced', this);\n                this.replacee.terminate();\n            }\n            this.emit('accepted', response, cause);\n            return this;\n        },\n        terminated: function (message, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n                return this;\n            }\n            this.endTime = new Date();\n            this.close();\n            this.emit('terminated', message || null, cause || null);\n            return this;\n        },\n        connecting: function (request) {\n            this.emit('connecting', { request: request });\n            return this;\n        }\n    };\n    Session.C = C;\n    SIP.Session = Session;\n    InviteServerContext = function (ua, request) {\n        var expires, self = this, contentType = request.getHeader('Content-Type'), contentDisp = request.parseHeader('Content-Disposition');\n        SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n        SIP.Utils.augment(this, SIP.Session, [ua.configuration.sessionDescriptionHandlerFactory]);\n        if (contentDisp && contentDisp.type === 'render') {\n            this.renderbody = request.body;\n            this.rendertype = contentType;\n        }\n        this.status = C.STATUS_INVITE_RECEIVED;\n        this.from_tag = request.from_tag;\n        this.id = request.call_id + this.from_tag;\n        this.request = request;\n        this.contact = this.ua.contact.toString();\n        this.receiveNonInviteResponse = function () { }; // intentional no-op\n        this.logger = ua.getLogger('sip.inviteservercontext', this.id);\n        //Save the session into the ua sessions collection.\n        this.ua.sessions[this.id] = this;\n        //Get the Expires header value if exists\n        if (request.hasHeader('expires')) {\n            expires = request.getHeader('expires') * 1000;\n        }\n        //Set 100rel if necessary\n        function set100rel(h, c) {\n            if (request.hasHeader(h) && request.getHeader(h).toLowerCase().indexOf('100rel') >= 0) {\n                self.rel100 = c;\n            }\n        }\n        set100rel('require', SIP.C.supported.REQUIRED);\n        set100rel('supported', SIP.C.supported.SUPPORTED);\n        /* Set the to_tag before\n         * replying a response code that will create a dialog.\n         */\n        request.to_tag = SIP.Utils.newTag();\n        // An error on dialog creation will fire 'failed' event\n        if (!this.createDialog(request, 'UAS', true)) {\n            request.reply(500, 'Missing Contact header field');\n            return;\n        }\n        var options = { extraHeaders: ['Contact: ' + self.contact] };\n        if (self.rel100 !== SIP.C.supported.REQUIRED) {\n            self.progress(options);\n        }\n        self.status = C.STATUS_WAITING_FOR_ANSWER;\n        // Set userNoAnswerTimer\n        self.timers.userNoAnswerTimer = SIP.Timers.setTimeout(function () {\n            request.reply(408);\n            self.failed(request, SIP.C.causes.NO_ANSWER);\n            self.terminated(request, SIP.C.causes.NO_ANSWER);\n        }, self.ua.configuration.noAnswerTimeout);\n        /* Set expiresTimer\n         * RFC3261 13.3.1\n         */\n        if (expires) {\n            self.timers.expiresTimer = SIP.Timers.setTimeout(function () {\n                if (self.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    request.reply(487);\n                    self.failed(request, SIP.C.causes.EXPIRES);\n                    self.terminated(request, SIP.C.causes.EXPIRES);\n                }\n            }, expires);\n        }\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    InviteServerContext.prototype = Object.create({}, {\n        reject: { writable: true, value: function (options) {\n                // Check Session Status\n                if (this.status === C.STATUS_TERMINATED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('rejecting RTCSession');\n                SIP.ServerContext.prototype.reject.call(this, options);\n                return this.terminated();\n            } },\n        terminate: { writable: true, value: function (options) {\n                options = options || {};\n                var extraHeaders = (options.extraHeaders || []).slice(), body = options.body, dialog, self = this;\n                if (this.status === C.STATUS_WAITING_FOR_ACK &&\n                    this.request.server_transaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n                    dialog = this.dialog;\n                    this.receiveRequest = function (request) {\n                        if (request.method === SIP.C.ACK) {\n                            this.sendRequest(SIP.C.BYE, {\n                                extraHeaders: extraHeaders,\n                                body: body\n                            });\n                            dialog.terminate();\n                        }\n                    };\n                    this.request.server_transaction.on('stateChanged', function () {\n                        if (this.state === SIP.Transactions.C.STATUS_TERMINATED && this.dialog) {\n                            this.request = new SIP.OutgoingRequest(SIP.C.BYE, this.dialog.remote_target, this.ua, {\n                                'cseq': this.dialog.local_seqnum += 1,\n                                'call_id': this.dialog.id.call_id,\n                                'from_uri': this.dialog.local_uri,\n                                'from_tag': this.dialog.id.local_tag,\n                                'to_uri': this.dialog.remote_uri,\n                                'to_tag': this.dialog.id.remote_tag,\n                                'route_set': this.dialog.route_set\n                            }, extraHeaders, body);\n                            new SIP.RequestSender({\n                                request: this.request,\n                                onRequestTimeout: function () {\n                                    self.onRequestTimeout();\n                                },\n                                onTransportError: function () {\n                                    self.onTransportError();\n                                },\n                                receiveResponse: function () {\n                                    return;\n                                }\n                            }, this.ua).send();\n                            dialog.terminate();\n                        }\n                    });\n                    this.emit('bye', this.request);\n                    this.terminated();\n                    // Restore the dialog into 'this' in order to be able to send the in-dialog BYE :-)\n                    this.dialog = dialog;\n                    // Restore the dialog into 'ua' so the ACK can reach 'this' session\n                    this.ua.dialogs[dialog.id.toString()] = dialog;\n                }\n                else if (this.status === C.STATUS_CONFIRMED) {\n                    this.bye(options);\n                }\n                else {\n                    this.reject(options);\n                }\n                return this;\n            } },\n        /*\n         * @param {Object} [options.sessionDescriptionHandlerOptions] gets passed to SIP.SessionDescriptionHandler.getDescription as options\n         */\n        progress: { writable: true, value: function (options) {\n                options = options || {};\n                var statusCode = options.statusCode || 180, reasonPhrase = options.reasonPhrase, extraHeaders = (options.extraHeaders || []).slice(), body = options.body, response;\n                if (statusCode < 100 || statusCode > 199) {\n                    throw new TypeError('Invalid statusCode: ' + statusCode);\n                }\n                if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                    return this;\n                }\n                function do100rel() {\n                    /* jshint validthis: true */\n                    statusCode = options.statusCode || 183;\n                    // Set status and add extra headers\n                    this.status = C.STATUS_WAITING_FOR_PRACK;\n                    extraHeaders.push('Contact: ' + this.contact);\n                    extraHeaders.push('Require: 100rel');\n                    extraHeaders.push('RSeq: ' + Math.floor(Math.random() * 10000));\n                    // Get the session description to add to preaccept with\n                    this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                        .then(function onSuccess(description) {\n                        if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                            return;\n                        }\n                        this.early_sdp = description.body;\n                        this[this.hasOffer ? 'hasAnswer' : 'hasOffer'] = true;\n                        // Retransmit until we get a response or we time out (see prackTimer below)\n                        var timeout = SIP.Timers.T1;\n                        this.timers.rel1xxTimer = SIP.Timers.setTimeout(function rel1xxRetransmission() {\n                            this.request.reply(statusCode, null, extraHeaders, description);\n                            timeout *= 2;\n                            this.timers.rel1xxTimer = SIP.Timers.setTimeout(rel1xxRetransmission.bind(this), timeout);\n                        }.bind(this), timeout);\n                        // Timeout and reject INVITE if no response\n                        this.timers.prackTimer = SIP.Timers.setTimeout(function () {\n                            if (this.status !== C.STATUS_WAITING_FOR_PRACK) {\n                                return;\n                            }\n                            this.logger.log('no PRACK received, rejecting the call');\n                            SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                            this.request.reply(504);\n                            this.terminated(null, SIP.C.causes.NO_PRACK);\n                        }.bind(this), SIP.Timers.T1 * 64);\n                        // Send the initial response\n                        response = this.request.reply(statusCode, reasonPhrase, extraHeaders, description);\n                        this.emit('progress', response, reasonPhrase);\n                    }.bind(this), function onFailure() {\n                        this.request.reply(480);\n                        this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                        this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                    }.bind(this));\n                } // end do100rel\n                function normalReply() {\n                    /* jshint validthis:true */\n                    response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n                    this.emit('progress', response, reasonPhrase);\n                }\n                if (options.statusCode !== 100 &&\n                    (this.rel100 === SIP.C.supported.REQUIRED ||\n                        (this.rel100 === SIP.C.supported.SUPPORTED && options.rel100) ||\n                        (this.rel100 === SIP.C.supported.SUPPORTED && (this.ua.configuration.rel100 === SIP.C.supported.REQUIRED)))) {\n                    this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                    this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                    if (this.sessionDescriptionHandler.hasDescription(this.request.getHeader('Content-Type'))) {\n                        this.hasOffer = true;\n                        this.sessionDescriptionHandler.setDescription(this.request.body, options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .then(do100rel.apply(this))\n                            .catch(function onFailure(e) {\n                            this.logger.warn('invalid description');\n                            this.logger.warn(e);\n                            this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                            this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                        }.bind(this));\n                    }\n                    else {\n                        do100rel.apply(this);\n                    }\n                }\n                else {\n                    normalReply.apply(this);\n                }\n                return this;\n            } },\n        /*\n         * @param {Object} [options.sessionDescriptionHandlerOptions] gets passed to SIP.SessionDescriptionHandler.getDescription as options\n         */\n        accept: { writable: true, value: function (options) {\n                options = options || {};\n                this.onInfo = options.onInfo;\n                var self = this, request = this.request, extraHeaders = (options.extraHeaders || []).slice(), descriptionCreationSucceeded = function (description) {\n                    var response, \n                    // run for reply success callback\n                    replySucceeded = function () {\n                        self.status = C.STATUS_WAITING_FOR_ACK;\n                        self.setInvite2xxTimer(request, description);\n                        self.setACKTimer();\n                    }, \n                    // run for reply failure callback\n                    replyFailed = function () {\n                        self.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                        self.terminated(null, SIP.C.causes.CONNECTION_ERROR);\n                    };\n                    extraHeaders.push('Contact: ' + self.contact);\n                    extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n                    if (!self.hasOffer) {\n                        self.hasOffer = true;\n                    }\n                    else {\n                        self.hasAnswer = true;\n                    }\n                    response = request.reply(200, null, extraHeaders, description, replySucceeded, replyFailed);\n                    if (self.status !== C.STATUS_TERMINATED) { // Didn't fail\n                        self.accepted(response, SIP.Utils.getReasonPhrase(200));\n                    }\n                }, descriptionCreationFailed = function (err) {\n                    if (err instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        self.logger.log(err.message);\n                        self.logger.log(err.error);\n                    }\n                    // TODO: This should check the actual error and make sure it is an\n                    //        \"expected\" error. Otherwise it should throw.\n                    if (self.status === C.STATUS_TERMINATED) {\n                        return;\n                    }\n                    self.request.reply(480);\n                    self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                    self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                };\n                // Check Session Status\n                if (this.status === C.STATUS_WAITING_FOR_PRACK) {\n                    this.status = C.STATUS_ANSWERED_WAITING_FOR_PRACK;\n                    return this;\n                }\n                else if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    this.status = C.STATUS_ANSWERED;\n                }\n                else if (this.status !== C.STATUS_EARLY_MEDIA) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                // An error on dialog creation will fire 'failed' event\n                if (!this.createDialog(request, 'UAS')) {\n                    request.reply(500, 'Missing Contact header field');\n                    return this;\n                }\n                SIP.Timers.clearTimeout(this.timers.userNoAnswerTimer);\n                if (this.status === C.STATUS_EARLY_MEDIA) {\n                    descriptionCreationSucceeded({});\n                }\n                else {\n                    this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                    this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                    if (this.request.getHeader('Content-Length') === '0' && !this.request.getHeader('Content-Type')) {\n                        this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .catch(descriptionCreationFailed)\n                            .then(descriptionCreationSucceeded);\n                    }\n                    else if (this.sessionDescriptionHandler.hasDescription(this.request.getHeader('Content-Type'))) {\n                        this.hasOffer = true;\n                        this.sessionDescriptionHandler.setDescription(this.request.body, options.sessionDescriptionHandlerOptions, options.modifiers)\n                            .then(function () {\n                            return this.sessionDescriptionHandler.getDescription(options.sessionDescriptionHandlerOptions, options.modifiers);\n                        }.bind(this))\n                            .catch(descriptionCreationFailed)\n                            .then(descriptionCreationSucceeded);\n                    }\n                    else {\n                        this.request.reply(415);\n                        // TODO: Events\n                        return;\n                    }\n                }\n                return this;\n            } },\n        receiveRequest: { writable: true, value: function (request) {\n                // ISC RECEIVE REQUEST\n                function confirmSession() {\n                    /* jshint validthis:true */\n                    var contentType, contentDisp;\n                    SIP.Timers.clearTimeout(this.timers.ackTimer);\n                    SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                    this.status = C.STATUS_CONFIRMED;\n                    contentType = request.getHeader('Content-Type');\n                    contentDisp = request.getHeader('Content-Disposition');\n                    if (contentDisp && contentDisp.type === 'render') {\n                        this.renderbody = request.body;\n                        this.rendertype = contentType;\n                    }\n                    this.emit('confirmed', request);\n                }\n                switch (request.method) {\n                    case SIP.C.CANCEL:\n                        /* RFC3261 15 States that a UAS may have accepted an invitation while a CANCEL\n                         * was in progress and that the UAC MAY continue with the session established by\n                         * any 2xx response, or MAY terminate with BYE. SIP does continue with the\n                         * established session. So the CANCEL is processed only if the session is not yet\n                         * established.\n                         */\n                        /*\n                         * Terminate the whole session in case the user didn't accept (or yet to send the answer) nor reject the\n                         *request opening the session.\n                         */\n                        if (this.status === C.STATUS_WAITING_FOR_ANSWER ||\n                            this.status === C.STATUS_WAITING_FOR_PRACK ||\n                            this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK ||\n                            this.status === C.STATUS_EARLY_MEDIA ||\n                            this.status === C.STATUS_ANSWERED) {\n                            this.status = C.STATUS_CANCELED;\n                            this.request.reply(487);\n                            this.canceled(request);\n                            this.rejected(request, SIP.C.causes.CANCELED);\n                            this.failed(request, SIP.C.causes.CANCELED);\n                            this.terminated(request, SIP.C.causes.CANCELED);\n                        }\n                        break;\n                    case SIP.C.ACK:\n                        if (this.status === C.STATUS_WAITING_FOR_ACK) {\n                            if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                                // ACK contains answer to an INVITE w/o SDP negotiation\n                                this.hasAnswer = true;\n                                this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(\n                                // TODO: Catch then .then\n                                confirmSession.bind(this), function onFailure(e) {\n                                    this.logger.warn(e);\n                                    this.terminate({\n                                        statusCode: '488',\n                                        reasonPhrase: 'Bad Media Description'\n                                    });\n                                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                }.bind(this));\n                            }\n                            else {\n                                confirmSession.apply(this);\n                            }\n                        }\n                        break;\n                    case SIP.C.PRACK:\n                        if (this.status === C.STATUS_WAITING_FOR_PRACK || this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                            if (!this.hasAnswer) {\n                                this.sessionDescriptionHandler = this.setupSessionDescriptionHandler();\n                                this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                                if (this.sessionDescriptionHandler.hasDescription(request.getHeader('Content-Type'))) {\n                                    this.hasAnswer = true;\n                                    this.sessionDescriptionHandler.setDescription(request.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                        .then(function onSuccess() {\n                                        SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                                        SIP.Timers.clearTimeout(this.timers.prackTimer);\n                                        request.reply(200);\n                                        if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                                            this.status = C.STATUS_EARLY_MEDIA;\n                                            this.accept();\n                                        }\n                                        this.status = C.STATUS_EARLY_MEDIA;\n                                    }.bind(this), function onFailure(e) {\n                                        this.logger.warn(e);\n                                        this.terminate({\n                                            statusCode: '488',\n                                            reasonPhrase: 'Bad Media Description'\n                                        });\n                                        this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                        this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    }.bind(this));\n                                }\n                                else {\n                                    this.terminate({\n                                        statusCode: '488',\n                                        reasonPhrase: 'Bad Media Description'\n                                    });\n                                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                }\n                            }\n                            else {\n                                SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                                SIP.Timers.clearTimeout(this.timers.prackTimer);\n                                request.reply(200);\n                                if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                                    this.status = C.STATUS_EARLY_MEDIA;\n                                    this.accept();\n                                }\n                                this.status = C.STATUS_EARLY_MEDIA;\n                            }\n                        }\n                        else if (this.status === C.STATUS_EARLY_MEDIA) {\n                            request.reply(200);\n                        }\n                        break;\n                    default:\n                        Session.prototype.receiveRequest.apply(this, [request]);\n                        break;\n                }\n            } },\n        // Internal Function to setup the handler consistently\n        setupSessionDescriptionHandler: { writable: true, value: function () {\n                if (this.sessionDescriptionHandler) {\n                    return this.sessionDescriptionHandler;\n                }\n                return this.sessionDescriptionHandlerFactory(this, this.ua.configuration.sessionDescriptionHandlerFactoryOptions);\n            } },\n        onTransportError: { writable: true, value: function () {\n                if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onRequestTimeout: { writable: true, value: function () {\n                if (this.status === C.STATUS_CONFIRMED) {\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n                else if (this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n            } }\n    });\n    SIP.InviteServerContext = InviteServerContext;\n    InviteClientContext = function (ua, target, options, modifiers) {\n        options = options || {};\n        this.passedOptions = options; // Save for later to use with refer\n        options.params = Object.create(options.params || Object.prototype);\n        var extraHeaders = (options.extraHeaders || []).slice(), sessionDescriptionHandlerFactory = ua.configuration.sessionDescriptionHandlerFactory;\n        this.sessionDescriptionHandlerFactoryOptions = ua.configuration.sessionDescriptionHandlerFactoryOptions || {};\n        this.sessionDescriptionHandlerOptions = options.sessionDescriptionHandlerOptions || {};\n        this.modifiers = modifiers;\n        this.inviteWithoutSdp = options.inviteWithoutSdp || false;\n        // Set anonymous property\n        this.anonymous = options.anonymous || false;\n        // Custom data to be sent either in INVITE or in ACK\n        this.renderbody = options.renderbody || null;\n        this.rendertype = options.rendertype || 'text/plain';\n        // Session parameter initialization\n        this.from_tag = SIP.Utils.newTag();\n        options.params.from_tag = this.from_tag;\n        /* Do not add ;ob in initial forming dialog requests if the registration over\n         *  the current connection got a GRUU URI.\n         */\n        this.contact = ua.contact.toString({\n            anonymous: this.anonymous,\n            outbound: this.anonymous ? !ua.contact.temp_gruu : !ua.contact.pub_gruu\n        });\n        if (this.anonymous) {\n            options.params.from_displayName = 'Anonymous';\n            options.params.from_uri = 'sip:anonymous@anonymous.invalid';\n            extraHeaders.push('P-Preferred-Identity: ' + ua.configuration.uri.toString());\n            extraHeaders.push('Privacy: id');\n        }\n        extraHeaders.push('Contact: ' + this.contact);\n        extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        if (this.inviteWithoutSdp && this.renderbody) {\n            extraHeaders.push('Content-Type: ' + this.rendertype);\n            extraHeaders.push('Content-Disposition: render;handling=optional');\n        }\n        if (ua.configuration.rel100 === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: 100rel');\n        }\n        if (ua.configuration.replaces === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: replaces');\n        }\n        options.extraHeaders = extraHeaders;\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.INVITE, target, options]);\n        SIP.Utils.augment(this, SIP.Session, [sessionDescriptionHandlerFactory]);\n        // Check Session Status\n        if (this.status !== C.STATUS_NULL) {\n            throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n        // OutgoingSession specific parameters\n        this.isCanceled = false;\n        this.received_100 = false;\n        this.method = SIP.C.INVITE;\n        this.receiveNonInviteResponse = this.receiveResponse;\n        this.receiveResponse = this.receiveInviteResponse;\n        this.logger = ua.getLogger('sip.inviteclientcontext');\n        ua.applicants[this] = this;\n        this.id = this.request.call_id + this.from_tag;\n        this.onInfo = options.onInfo;\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    InviteClientContext.prototype = Object.create({}, {\n        invite: { writable: true, value: function () {\n                var self = this;\n                //Save the session into the ua sessions collection.\n                //Note: placing in constructor breaks call to request.cancel on close... User does not need this anyway\n                this.ua.sessions[this.id] = this;\n                // This should allow the function to return so that listeners can be set up for these events\n                SIP.Utils.Promise.resolve().then(function () {\n                    if (this.inviteWithoutSdp) {\n                        //just send an invite with no sdp...\n                        this.request.body = self.renderbody;\n                        this.status = C.STATUS_INVITE_SENT;\n                        this.send();\n                    }\n                    else {\n                        //Initialize Media Session\n                        this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                        this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                        this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions, this.modifiers)\n                            .then(function onSuccess(description) {\n                            if (self.isCanceled || self.status === C.STATUS_TERMINATED) {\n                                return;\n                            }\n                            self.hasOffer = true;\n                            self.request.body = description;\n                            self.status = C.STATUS_INVITE_SENT;\n                            self.send();\n                        }, function onFailure(err) {\n                            if (err instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                self.logger.log(err.message);\n                                self.logger.log(err.error);\n                            }\n                            if (self.status === C.STATUS_TERMINATED) {\n                                return;\n                            }\n                            self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                            self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                        });\n                    }\n                }.bind(this));\n                return this;\n            } },\n        receiveInviteResponse: { writable: true, value: function (response) {\n                var cause, session = this, id = response.call_id + response.from_tag + response.to_tag, extraHeaders = [], options = {};\n                if (this.status === C.STATUS_TERMINATED || response.method !== SIP.C.INVITE) {\n                    return;\n                }\n                if (this.dialog && (response.status_code >= 200 && response.status_code <= 299)) {\n                    if (id !== this.dialog.id.toString()) {\n                        if (!this.createDialog(response, 'UAC', true)) {\n                            return;\n                        }\n                        this.emit(\"ack\", response.transaction.sendACK({ body: SIP.Utils.generateFakeSDP(response.body) }));\n                        this.earlyDialogs[id].sendRequest(this, SIP.C.BYE);\n                        /* NOTE: This fails because the forking proxy does not recognize that an unanswerable\n                         * leg (due to peerConnection limitations) has been answered first. If your forking\n                         * proxy does not hang up all unanswered branches on the first branch answered, remove this.\n                         */\n                        if (this.status !== C.STATUS_CONFIRMED) {\n                            this.failed(response, SIP.C.causes.WEBRTC_ERROR);\n                            this.terminated(response, SIP.C.causes.WEBRTC_ERROR);\n                        }\n                        return;\n                    }\n                    else if (this.status === C.STATUS_CONFIRMED) {\n                        this.emit(\"ack\", response.transaction.sendACK());\n                        return;\n                    }\n                    else if (!this.hasAnswer) {\n                        // invite w/o sdp is waiting for callback\n                        //an invite with sdp must go on, and hasAnswer is true\n                        return;\n                    }\n                }\n                if (this.dialog && response.status_code < 200) {\n                    /*\n                      Early media has been set up with at least one other different branch,\n                      but a final 2xx response hasn't been received\n                    */\n                    if (this.dialog.pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                        (this.dialog.pracked[this.dialog.pracked.length - 1] >= response.getHeader('rseq') && this.dialog.pracked.length > 0)) {\n                        return;\n                    }\n                    if (!this.earlyDialogs[id] && !this.createDialog(response, 'UAC', true)) {\n                        return;\n                    }\n                    if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                        (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n                        return;\n                    }\n                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                    this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                    this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                        extraHeaders: extraHeaders,\n                        body: SIP.Utils.generateFakeSDP(response.body)\n                    });\n                    return;\n                }\n                // Proceed to cancellation if the user requested.\n                if (this.isCanceled) {\n                    if (response.status_code >= 100 && response.status_code < 200) {\n                        this.request.cancel(this.cancelReason, extraHeaders);\n                        this.canceled(null);\n                    }\n                    else if (response.status_code >= 200 && response.status_code < 299) {\n                        this.acceptAndTerminate(response);\n                        this.emit('bye', this.request);\n                    }\n                    else if (response.status_code >= 300) {\n                        cause = SIP.C.REASON_PHRASE[response.status_code] || SIP.C.causes.CANCELED;\n                        this.rejected(response, cause);\n                        this.failed(response, cause);\n                        this.terminated(response, cause);\n                    }\n                    return;\n                }\n                switch (true) {\n                    case /^100$/.test(response.status_code):\n                        this.received_100 = true;\n                        this.emit('progress', response);\n                        break;\n                    case (/^1[0-9]{2}$/.test(response.status_code)):\n                        // Do nothing with 1xx responses without To tag.\n                        if (!response.to_tag) {\n                            this.logger.warn('1xx response received without to tag');\n                            break;\n                        }\n                        // Create Early Dialog if 1XX comes with contact\n                        if (response.hasHeader('contact')) {\n                            // An error on dialog creation will fire 'failed' event\n                            if (!this.createDialog(response, 'UAC', true)) {\n                                break;\n                            }\n                        }\n                        this.status = C.STATUS_1XX_RECEIVED;\n                        if (response.hasHeader('P-Asserted-Identity')) {\n                            this.assertedIdentity = new SIP.NameAddrHeader.parse(response.getHeader('P-Asserted-Identity'));\n                        }\n                        if (response.hasHeader('require') &&\n                            response.getHeader('require').indexOf('100rel') !== -1) {\n                            // Do nothing if this.dialog is already confirmed\n                            if (this.dialog || !this.earlyDialogs[id]) {\n                                break;\n                            }\n                            if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                                (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n                                return;\n                            }\n                            // TODO: This may be broken. It may have to be on the early dialog\n                            this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                            this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                            if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                                this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                                    extraHeaders: extraHeaders\n                                });\n                                this.emit('progress', response);\n                            }\n                            else if (this.hasOffer) {\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.hasAnswer = true;\n                                this.dialog.pracked.push(response.getHeader('rseq'));\n                                this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(function onSuccess() {\n                                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                    session.sendRequest(SIP.C.PRACK, {\n                                        extraHeaders: extraHeaders,\n                                        receiveResponse: function () { }\n                                    });\n                                    session.status = C.STATUS_EARLY_MEDIA;\n                                    session.emit('progress', response);\n                                }, function onFailure(e) {\n                                    session.logger.warn(e);\n                                    session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                                    session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                });\n                            }\n                            else {\n                                var earlyDialog = this.earlyDialogs[id];\n                                var earlyMedia = earlyDialog.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                                this.emit('SessionDescriptionHandler-created', earlyMedia);\n                                earlyDialog.pracked.push(response.getHeader('rseq'));\n                                earlyMedia.setDescription(response.body, session.sessionDescriptionHandlerOptions, session.modifers)\n                                    .then(earlyMedia.getDescription.bind(earlyMedia, session.sessionDescriptionHandlerOptions, session.modifiers))\n                                    .then(function onSuccess(description) {\n                                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                                    earlyDialog.sendRequest(session, SIP.C.PRACK, {\n                                        extraHeaders: extraHeaders,\n                                        body: description\n                                    });\n                                    session.status = C.STATUS_EARLY_MEDIA;\n                                    session.emit('progress', response);\n                                })\n                                    .catch(function onFailure(e) {\n                                    // TODO: This is a bit wonky\n                                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                        earlyDialog.pracked.push(response.getHeader('rseq'));\n                                        if (session.status === C.STATUS_TERMINATED) {\n                                            return;\n                                        }\n                                        session.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                                        session.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                                    }\n                                    else {\n                                        earlyDialog.pracked.splice(earlyDialog.pracked.indexOf(response.getHeader('rseq')), 1);\n                                        // Could not set remote description\n                                        session.logger.warn('invalid description');\n                                        session.logger.warn(e);\n                                    }\n                                });\n                            }\n                        }\n                        else {\n                            this.emit('progress', response);\n                        }\n                        break;\n                    case /^2[0-9]{2}$/.test(response.status_code):\n                        var cseq = this.request.cseq + ' ' + this.request.method;\n                        if (cseq !== response.getHeader('cseq')) {\n                            break;\n                        }\n                        if (response.hasHeader('P-Asserted-Identity')) {\n                            this.assertedIdentity = new SIP.NameAddrHeader.parse(response.getHeader('P-Asserted-Identity'));\n                        }\n                        if (this.status === C.STATUS_EARLY_MEDIA && this.dialog) {\n                            this.status = C.STATUS_CONFIRMED;\n                            options = {};\n                            if (this.renderbody) {\n                                extraHeaders.push('Content-Type: ' + this.rendertype);\n                                options.extraHeaders = extraHeaders;\n                                options.body = this.renderbody;\n                            }\n                            this.emit(\"ack\", response.transaction.sendACK(options));\n                            this.accepted(response);\n                            break;\n                        }\n                        // Do nothing if this.dialog is already confirmed\n                        if (this.dialog) {\n                            break;\n                        }\n                        // This is an invite without sdp\n                        if (!this.hasOffer) {\n                            if (this.earlyDialogs[id] && this.earlyDialogs[id].sessionDescriptionHandler) {\n                                //REVISIT\n                                this.hasOffer = true;\n                                this.hasAnswer = true;\n                                this.sessionDescriptionHandler = this.earlyDialogs[id].sessionDescriptionHandler;\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.status = C.STATUS_CONFIRMED;\n                                this.emit(\"ack\", response.transaction.sendACK());\n                                this.accepted(response);\n                            }\n                            else {\n                                this.sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.sessionDescriptionHandlerFactoryOptions);\n                                this.emit('SessionDescriptionHandler-created', this.sessionDescriptionHandler);\n                                if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                    this.acceptAndTerminate(response, 400, 'Missing session description');\n                                    this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    break;\n                                }\n                                if (!this.createDialog(response, 'UAC')) {\n                                    break;\n                                }\n                                this.hasOffer = true;\n                                this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                    .then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler, this.sessionDescriptionHandlerOptions, this.modifiers))\n                                    .then(function onSuccess(description) {\n                                    //var localMedia;\n                                    if (session.isCanceled || session.status === C.STATUS_TERMINATED) {\n                                        return;\n                                    }\n                                    session.status = C.STATUS_CONFIRMED;\n                                    session.hasAnswer = true;\n                                    session.emit(\"ack\", response.transaction.sendACK({ body: description }));\n                                    session.accepted(response);\n                                })\n                                    .catch(function onFailure(e) {\n                                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                                        session.logger.warn('invalid description');\n                                        session.logger.warn(e);\n                                        // TODO: This message is inconsistent\n                                        session.acceptAndTerminate(response, 488, 'Invalid session description');\n                                        session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                    }\n                                });\n                            }\n                        }\n                        else if (this.hasAnswer) {\n                            if (this.renderbody) {\n                                extraHeaders.push('Content-Type: ' + session.rendertype);\n                                options.extraHeaders = extraHeaders;\n                                options.body = this.renderbody;\n                            }\n                            this.emit(\"ack\", response.transaction.sendACK(options));\n                        }\n                        else {\n                            if (!this.sessionDescriptionHandler.hasDescription(response.getHeader('Content-Type'))) {\n                                this.acceptAndTerminate(response, 400, 'Missing session description');\n                                this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                                break;\n                            }\n                            if (!this.createDialog(response, 'UAC')) {\n                                break;\n                            }\n                            this.hasAnswer = true;\n                            this.sessionDescriptionHandler.setDescription(response.body, this.sessionDescriptionHandlerOptions, this.modifiers)\n                                .then(function onSuccess() {\n                                var options = {};\n                                session.status = C.STATUS_CONFIRMED;\n                                if (session.renderbody) {\n                                    extraHeaders.push('Content-Type: ' + session.rendertype);\n                                    options.extraHeaders = extraHeaders;\n                                    options.body = session.renderbody;\n                                }\n                                session.emit(\"ack\", response.transaction.sendACK(options));\n                                session.accepted(response);\n                            }, function onFailure(e) {\n                                session.logger.warn(e);\n                                session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                                session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                            });\n                        }\n                        break;\n                    default:\n                        cause = SIP.Utils.sipErrorCause(response.status_code);\n                        this.rejected(response, cause);\n                        this.failed(response, cause);\n                        this.terminated(response, cause);\n                }\n            } },\n        cancel: { writable: true, value: function (options) {\n                options = options || {};\n                options.extraHeaders = (options.extraHeaders || []).slice();\n                if (this.isCanceled) {\n                    throw new SIP.Exceptions.InvalidStateError('CANCELED');\n                }\n                // Check Session Status\n                if (this.status === C.STATUS_TERMINATED || this.status === C.STATUS_CONFIRMED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('canceling RTCSession');\n                this.isCanceled = true;\n                var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n                // Check Session Status\n                if (this.status === C.STATUS_NULL ||\n                    (this.status === C.STATUS_INVITE_SENT && !this.received_100)) {\n                    this.cancelReason = cancel_reason;\n                }\n                else if (this.status === C.STATUS_INVITE_SENT ||\n                    this.status === C.STATUS_1XX_RECEIVED ||\n                    this.status === C.STATUS_EARLY_MEDIA) {\n                    this.request.cancel(cancel_reason, options.extraHeaders);\n                }\n                return this.canceled();\n            } },\n        terminate: { writable: true, value: function (options) {\n                if (this.status === C.STATUS_TERMINATED) {\n                    return this;\n                }\n                if (this.status === C.STATUS_WAITING_FOR_ACK || this.status === C.STATUS_CONFIRMED) {\n                    this.bye(options);\n                }\n                else {\n                    this.cancel(options);\n                }\n                return this;\n            } },\n        receiveRequest: { writable: true, value: function (request) {\n                // ICC RECEIVE REQUEST\n                // Reject CANCELs\n                if (request.method === SIP.C.CANCEL) {\n                    // TODO; make this a switch when it gets added\n                }\n                if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n                    SIP.Timers.clearTimeout(this.timers.ackTimer);\n                    SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n                    this.status = C.STATUS_CONFIRMED;\n                    this.accepted();\n                }\n                return Session.prototype.receiveRequest.apply(this, [request]);\n            } },\n        onTransportError: { writable: true, value: function () {\n                if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                }\n            } },\n        onRequestTimeout: { writable: true, value: function () {\n                if (this.status === C.STATUS_CONFIRMED) {\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n                else if (this.status !== C.STATUS_TERMINATED) {\n                    this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n                    this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n                }\n            } }\n    });\n    SIP.InviteClientContext = InviteClientContext;\n    ReferClientContext = function (ua, applicant, target, options) {\n        this.options = options || {};\n        this.extraHeaders = (this.options.extraHeaders || []).slice();\n        if (ua === undefined || applicant === undefined || target === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.REFER, applicant.remoteIdentity.uri.toString(), options]);\n        this.applicant = applicant;\n        var withReplaces = target instanceof SIP.InviteServerContext ||\n            target instanceof SIP.InviteClientContext;\n        if (withReplaces) {\n            // Attended Transfer\n            // All of these fields should be defined based on the check above\n            this.target = '\"' + target.remoteIdentity.friendlyName + '\" ' +\n                '<' + target.dialog.remote_target.toString() +\n                '?Replaces=' + target.dialog.id.call_id +\n                '%3Bto-tag%3D' + target.dialog.id.remote_tag +\n                '%3Bfrom-tag%3D' + target.dialog.id.local_tag + '>';\n        }\n        else {\n            // Blind Transfer\n            // Refer-To: <sip:bob@example.com>\n            try {\n                this.target = SIP.Grammar.parse(target, 'Refer_To').uri || target;\n            }\n            catch (e) {\n                this.logger.debug(\".refer() cannot parse Refer_To from\", target);\n                this.logger.debug(\"...falling through to normalizeTarget()\");\n            }\n            // Check target validity\n            this.target = this.ua.normalizeTarget(this.target);\n            if (!this.target) {\n                throw new TypeError('Invalid target: ' + target);\n            }\n        }\n        if (this.ua) {\n            this.extraHeaders.push('Referred-By: <' + this.ua.configuration.uri + '>');\n        }\n        // TODO: Check that this is correct isc/icc\n        this.extraHeaders.push('Contact: ' + applicant.contact);\n        this.extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        this.extraHeaders.push('Refer-To: ' + this.target);\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n    };\n    ReferClientContext.prototype = Object.create({}, {\n        refer: { writable: true, value: function (options) {\n                options = options || {};\n                var extraHeaders = (this.extraHeaders || []).slice();\n                if (options.extraHeaders) {\n                    extraHeaders.concat(options.extraHeaders);\n                }\n                this.applicant.sendRequest(SIP.C.REFER, {\n                    extraHeaders: this.extraHeaders,\n                    receiveResponse: function (response) {\n                        if (/^1[0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestProgress', this);\n                        }\n                        else if (/^2[0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestAccepted', this);\n                        }\n                        else if (/^[4-6][0-9]{2}$/.test(response.status_code)) {\n                            this.emit('referRequestRejected', this);\n                        }\n                        if (options.receiveResponse) {\n                            options.receiveResponse(response);\n                        }\n                    }.bind(this)\n                });\n                return this;\n            } },\n        receiveNotify: { writable: true, value: function (request) {\n                // If we can correctly handle this, then we need to send a 200 OK!\n                if (request.hasHeader('Content-Type') && request.getHeader('Content-Type').search(/^message\\/sipfrag/) !== -1) {\n                    var messageBody = SIP.Grammar.parse(request.body, 'sipfrag');\n                    if (messageBody === -1) {\n                        request.reply(489, 'Bad Event');\n                        return;\n                    }\n                    switch (true) {\n                        case (/^1[0-9]{2}$/.test(messageBody.status_code)):\n                            this.emit('referProgress', this);\n                            break;\n                        case (/^2[0-9]{2}$/.test(messageBody.status_code)):\n                            this.emit('referAccepted', this);\n                            if (!this.options.activeAfterTransfer && this.applicant.terminate) {\n                                this.applicant.terminate();\n                            }\n                            break;\n                        default:\n                            this.emit('referRejected', this);\n                            break;\n                    }\n                    request.reply(200);\n                    this.emit('notify', request);\n                    return;\n                }\n                request.reply(489, 'Bad Event');\n            } }\n    });\n    SIP.ReferClientContext = ReferClientContext;\n    ReferServerContext = function (ua, request) {\n        SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n        this.ua = ua;\n        this.status = C.STATUS_INVITE_RECEIVED;\n        this.from_tag = request.from_tag;\n        this.id = request.call_id + this.from_tag;\n        this.request = request;\n        this.contact = this.ua.contact.toString();\n        this.logger = ua.getLogger('sip.referservercontext', this.id);\n        // RFC 3515 2.4.1\n        if (!this.request.hasHeader('refer-to')) {\n            this.logger.warn('Invalid REFER packet. A refer-to header is required. Rejecting refer.');\n            this.reject();\n            return;\n        }\n        this.referTo = this.request.parseHeader('refer-to');\n        // TODO: Must set expiration timer and send 202 if there is no response by then\n        this.referredSession = this.ua.findSession(request);\n        // Needed to send the NOTIFY's\n        this.cseq = Math.floor(Math.random() * 10000);\n        this.call_id = this.request.call_id;\n        this.from_uri = this.request.to.uri;\n        this.from_tag = this.request.to.parameters.tag;\n        this.remote_target = this.request.headers.Contact[0].parsed.uri;\n        this.to_uri = this.request.from.uri;\n        this.to_tag = this.request.from_tag;\n        this.route_set = this.request.getHeaders('record-route');\n        this.receiveNonInviteResponse = function () { };\n        if (this.request.hasHeader('referred-by')) {\n            this.referredBy = this.request.getHeader('referred-by');\n        }\n        if (this.referTo.uri.hasHeader('replaces')) {\n            this.replaces = this.referTo.uri.getHeader('replaces');\n        }\n        this.errorListener = this.onTransportError.bind(this);\n        ua.transport.on('transportError', this.errorListener);\n        this.status = C.STATUS_WAITING_FOR_ANSWER;\n    };\n    ReferServerContext.prototype = Object.create({}, {\n        progress: { writable: true, value: function () {\n                if (this.status !== C.STATUS_WAITING_FOR_ANSWER) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.request.reply(100);\n            } },\n        reject: { writable: true, value: function (options) {\n                if (this.status === C.STATUS_TERMINATED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.logger.log('Rejecting refer');\n                this.status = C.STATUS_TERMINATED;\n                SIP.ServerContext.prototype.reject.call(this, options);\n                this.emit('referRequestRejected', this);\n            } },\n        accept: { writable: true, value: function (options, modifiers) {\n                options = options || {};\n                if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n                    this.status = C.STATUS_ANSWERED;\n                }\n                else {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                this.request.reply(202, 'Accepted');\n                this.emit('referRequestAccepted', this);\n                if (options.followRefer) {\n                    this.logger.log('Accepted refer, attempting to automatically follow it');\n                    var target = this.referTo.uri;\n                    if (!target.scheme.match(\"^sips?$\")) {\n                        this.logger.error('SIP.js can only automatically follow SIP refer target');\n                        this.reject();\n                        return;\n                    }\n                    var inviteOptions = options.inviteOptions || {};\n                    var extraHeaders = (inviteOptions.extraHeaders || []).slice();\n                    if (this.replaces) {\n                        // decodeURIComponent is a holdover from 2c086eb4. Not sure that it is actually necessary\n                        extraHeaders.push('Replaces: ' + decodeURIComponent(this.replaces));\n                    }\n                    if (this.referredBy) {\n                        extraHeaders.push('Referred-By: ' + this.referredBy);\n                    }\n                    inviteOptions.extraHeaders = extraHeaders;\n                    target.clearHeaders();\n                    this.targetSession = this.ua.invite(target, inviteOptions, modifiers);\n                    this.emit('referInviteSent', this);\n                    this.targetSession.once('progress', function () {\n                        this.sendNotify('SIP/2.0 100 Trying');\n                        this.emit('referProgress', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referProgress', this);\n                        }\n                    }.bind(this));\n                    this.targetSession.once('accepted', function () {\n                        this.logger.log('Successfully followed the refer');\n                        this.sendNotify('SIP/2.0 200 OK');\n                        this.emit('referAccepted', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referAccepted', this);\n                        }\n                    }.bind(this));\n                    var referFailed = function (response) {\n                        if (this.status === C.STATUS_TERMINATED) {\n                            return; // No throw here because it is possible this gets called multiple times\n                        }\n                        this.logger.log('Refer was not successful. Resuming session');\n                        if (response && response.status_code === 429) {\n                            this.logger.log('Alerting referrer that identity is required.');\n                            this.sendNotify('SIP/2.0 429 Provide Referrer Identity');\n                            return;\n                        }\n                        this.sendNotify('SIP/2.0 603 Declined');\n                        // Must change the status after sending the final Notify or it will not send due to check\n                        this.status = C.STATUS_TERMINATED;\n                        this.emit('referRejected', this);\n                        if (this.referredSession) {\n                            this.referredSession.emit('referRejected');\n                        }\n                    };\n                    this.targetSession.once('rejected', referFailed.bind(this));\n                    this.targetSession.once('failed', referFailed.bind(this));\n                }\n                else {\n                    this.logger.log('Accepted refer, but did not automatically follow it');\n                    this.sendNotify('SIP/2.0 200 OK');\n                    this.emit('referAccepted', this);\n                    if (this.referredSession) {\n                        this.referredSession.emit('referAccepted', this);\n                    }\n                }\n            } },\n        sendNotify: { writable: true, value: function (body) {\n                if (this.status !== C.STATUS_ANSWERED) {\n                    throw new SIP.Exceptions.InvalidStateError(this.status);\n                }\n                if (SIP.Grammar.parse(body, 'sipfrag') === -1) {\n                    throw new Error('sipfrag body is required to send notify for refer');\n                }\n                var request = new SIP.OutgoingRequest(SIP.C.NOTIFY, this.remote_target, this.ua, {\n                    cseq: this.cseq += 1,\n                    call_id: this.call_id,\n                    from_uri: this.from_uri,\n                    from_tag: this.from_tag,\n                    to_uri: this.to_uri,\n                    to_tag: this.to_tag,\n                    route_set: this.route_set\n                }, [\n                    'Event: refer',\n                    'Subscription-State: terminated',\n                    'Content-Type: message/sipfrag'\n                ], body);\n                new SIP.RequestSender({\n                    request: request,\n                    onRequestTimeout: function () {\n                        return;\n                    },\n                    onTransportError: function () {\n                        return;\n                    },\n                    receiveResponse: function () {\n                        return;\n                    }\n                }, this.ua).send();\n            } }\n    });\n    SIP.ReferServerContext = ReferServerContext;\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview DTMF\n */\n/**\n * @class DTMF\n * @param {SIP.Session} session\n */\nmodule.exports = function (SIP) {\n    var DTMF, C = {\n        MIN_DURATION: 70,\n        MAX_DURATION: 6000,\n        DEFAULT_DURATION: 100,\n        MIN_INTER_TONE_GAP: 50,\n        DEFAULT_INTER_TONE_GAP: 500\n    };\n    DTMF = function (session, tone, options) {\n        var duration, interToneGap;\n        if (tone === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        this.logger = session.ua.getLogger('sip.invitecontext.dtmf', session.id);\n        this.owner = session;\n        this.direction = null;\n        options = options || {};\n        duration = options.duration || null;\n        interToneGap = options.interToneGap || null;\n        // Check tone type\n        if (typeof tone === 'string') {\n            tone = tone.toUpperCase();\n        }\n        else if (typeof tone === 'number') {\n            tone = tone.toString();\n        }\n        else {\n            throw new TypeError('Invalid tone: ' + tone);\n        }\n        // Check tone value\n        if (!tone.match(/^[0-9A-D#*]$/)) {\n            throw new TypeError('Invalid tone: ' + tone);\n        }\n        else {\n            this.tone = tone;\n        }\n        // Check duration\n        if (duration && !SIP.Utils.isDecimal(duration)) {\n            throw new TypeError('Invalid tone duration: ' + duration);\n        }\n        else if (!duration) {\n            duration = DTMF.C.DEFAULT_DURATION;\n        }\n        else if (duration < DTMF.C.MIN_DURATION) {\n            this.logger.warn('\"duration\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_DURATION + ' milliseconds');\n            duration = DTMF.C.MIN_DURATION;\n        }\n        else if (duration > DTMF.C.MAX_DURATION) {\n            this.logger.warn('\"duration\" value is greater than the maximum allowed, setting it to ' + DTMF.C.MAX_DURATION + ' milliseconds');\n            duration = DTMF.C.MAX_DURATION;\n        }\n        else {\n            duration = Math.abs(duration);\n        }\n        this.duration = duration;\n        // Check interToneGap\n        if (interToneGap && !SIP.Utils.isDecimal(interToneGap)) {\n            throw new TypeError('Invalid interToneGap: ' + interToneGap);\n        }\n        else if (!interToneGap) {\n            interToneGap = DTMF.C.DEFAULT_INTER_TONE_GAP;\n        }\n        else if (interToneGap < DTMF.C.MIN_INTER_TONE_GAP) {\n            this.logger.warn('\"interToneGap\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_INTER_TONE_GAP + ' milliseconds');\n            interToneGap = DTMF.C.MIN_INTER_TONE_GAP;\n        }\n        else {\n            interToneGap = Math.abs(interToneGap);\n        }\n        this.interToneGap = interToneGap;\n    };\n    DTMF.prototype = Object.create(SIP.EventEmitter.prototype);\n    DTMF.prototype.send = function (options) {\n        var extraHeaders, body = {};\n        this.direction = 'outgoing';\n        // Check RTCSession Status\n        if (this.owner.status !== SIP.Session.C.STATUS_CONFIRMED &&\n            this.owner.status !== SIP.Session.C.STATUS_WAITING_FOR_ACK) {\n            throw new SIP.Exceptions.InvalidStateError(this.owner.status);\n        }\n        // Get DTMF options\n        options = options || {};\n        extraHeaders = options.extraHeaders ? options.extraHeaders.slice() : [];\n        body.contentType = 'application/dtmf-relay';\n        body.body = \"Signal= \" + this.tone + \"\\r\\n\";\n        body.body += \"Duration= \" + this.duration;\n        this.request = this.owner.dialog.sendRequest(this, SIP.C.INFO, {\n            extraHeaders: extraHeaders,\n            body: body\n        });\n        this.owner.emit('dtmf', this.request, this);\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.receiveResponse = function (response) {\n        var cause;\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                // Ignore provisional responses.\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                this.emit('succeeded', {\n                    originator: 'remote',\n                    response: response\n                });\n                break;\n            default:\n                cause = SIP.Utils.sipErrorCause(response.status_code);\n                this.emit('failed', response, cause);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onRequestTimeout = function () {\n        this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n        this.owner.onRequestTimeout();\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onTransportError = function () {\n        this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n        this.owner.onTransportError();\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.onDialogError = function (response) {\n        this.emit('failed', response, SIP.C.causes.DIALOG_ERROR);\n        this.owner.onDialogError(response);\n    };\n    /**\n     * @private\n     */\n    DTMF.prototype.init_incoming = function (request) {\n        this.direction = 'incoming';\n        this.request = request;\n        request.reply(200);\n        if (!this.tone || !this.duration) {\n            this.logger.warn('invalid INFO DTMF received, discarded');\n        }\n        else {\n            this.owner.emit('dtmf', request, this);\n        }\n    };\n    DTMF.C = C;\n    return DTMF;\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Subscriber (SIP-Specific Event Notifications RFC6665)\n */\n/**\n * @augments SIP\n * @class Class creating a SIP Subscription.\n */\nmodule.exports = function (SIP) {\n    SIP.Subscription = function (ua, target, event, options) {\n        options = Object.create(options || Object.prototype);\n        this.extraHeaders = options.extraHeaders = (options.extraHeaders || []).slice();\n        this.id = null;\n        this.state = 'init';\n        if (!event) {\n            throw new TypeError('Event necessary to create a subscription.');\n        }\n        else {\n            //TODO: check for valid events here probably make a list in SIP.C; or leave it up to app to check?\n            //The check may need to/should probably occur on the other side,\n            this.event = event;\n        }\n        if (typeof options.expires !== 'number') {\n            ua.logger.warn('expires must be a number. Using default of 3600.');\n            this.expires = 3600;\n        }\n        else {\n            this.expires = options.expires;\n        }\n        this.requestedExpires = this.expires;\n        options.extraHeaders.push('Event: ' + this.event);\n        options.extraHeaders.push('Expires: ' + this.expires);\n        if (options.body) {\n            this.body = options.body;\n        }\n        this.contact = ua.contact.toString();\n        options.extraHeaders.push('Contact: ' + this.contact);\n        options.extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n        SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.SUBSCRIBE, target, options]);\n        this.logger = ua.getLogger('sip.subscription');\n        this.dialog = null;\n        this.timers = { N: null, sub_duration: null };\n        this.errorCodes = [404, 405, 410, 416, 480, 481, 482, 483, 484, 485, 489, 501, 604];\n    };\n    SIP.Subscription.prototype = {\n        subscribe: function () {\n            var sub = this;\n            //these states point to an existing subscription, no subscribe is necessary\n            if (this.state === 'active') {\n                this.refresh();\n                return this;\n            }\n            else if (this.state === 'notify_wait') {\n                return this;\n            }\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n            this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event] = this;\n            this.send();\n            this.state = 'notify_wait';\n            return this;\n        },\n        refresh: function () {\n            if (this.state === 'terminated' || this.state === 'pending' || this.state === 'notify_wait') {\n                return;\n            }\n            this.dialog.sendRequest(this, SIP.C.SUBSCRIBE, {\n                extraHeaders: this.extraHeaders,\n                body: this.body\n            });\n        },\n        receiveResponse: function (response) {\n            var expires, sub = this, cause = SIP.Utils.getReasonPhrase(response.status_code);\n            if ((this.state === 'notify_wait' && response.status_code >= 300) ||\n                (this.state !== 'notify_wait' && this.errorCodes.indexOf(response.status_code) !== -1)) {\n                this.failed(response, null);\n            }\n            else if (/^2[0-9]{2}$/.test(response.status_code)) {\n                this.emit('accepted', response, cause);\n                //As we don't support RFC 5839 or other extensions where the NOTIFY is optional, timer N will not be cleared\n                //SIP.Timers.clearTimeout(this.timers.N);\n                expires = response.getHeader('Expires');\n                if (expires && expires <= this.requestedExpires) {\n                    // Preserve new expires value for subsequent requests\n                    this.expires = expires;\n                    this.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), expires * 900);\n                }\n                else {\n                    if (!expires) {\n                        this.logger.warn('Expires header missing in a 200-class response to SUBSCRIBE');\n                        this.failed(response, SIP.C.EXPIRES_HEADER_MISSING);\n                    }\n                    else {\n                        this.logger.warn('Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request');\n                        this.failed(response, SIP.C.INVALID_EXPIRES_HEADER);\n                    }\n                }\n            }\n            else if (response.statusCode > 300) {\n                this.emit('failed', response, cause);\n                this.emit('rejected', response, cause);\n            }\n        },\n        unsubscribe: function () {\n            var extraHeaders = [], sub = this;\n            this.state = 'terminated';\n            extraHeaders.push('Event: ' + this.event);\n            extraHeaders.push('Expires: 0');\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            //makes sure expires isn't set, and other typical resubscribe behavior\n            this.receiveResponse = function () { };\n            this.dialog.sendRequest(this, this.method, {\n                extraHeaders: extraHeaders,\n                body: this.body\n            });\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n        },\n        /**\n        * @private\n        */\n        timer_fire: function () {\n            if (this.state === 'terminated') {\n                this.terminateDialog();\n                SIP.Timers.clearTimeout(this.timers.N);\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n                delete this.ua.subscriptions[this.id];\n            }\n            else if (this.state === 'notify_wait' || this.state === 'pending') {\n                this.close();\n            }\n            else {\n                this.refresh();\n            }\n        },\n        /**\n        * @private\n        */\n        close: function () {\n            if (this.state === 'notify_wait') {\n                this.state = 'terminated';\n                SIP.Timers.clearTimeout(this.timers.N);\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n                this.receiveResponse = function () { };\n                delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n            }\n            else if (this.state !== 'terminated') {\n                this.unsubscribe();\n            }\n        },\n        /**\n        * @private\n        */\n        createConfirmedDialog: function (message, type) {\n            var dialog;\n            this.terminateDialog();\n            dialog = new SIP.Dialog(this, message, type);\n            dialog.invite_seqnum = this.request.cseq;\n            dialog.local_seqnum = this.request.cseq;\n            if (!dialog.error) {\n                this.dialog = dialog;\n                return true;\n            }\n            // Dialog not created due to an error\n            else {\n                return false;\n            }\n        },\n        /**\n        * @private\n        */\n        terminateDialog: function () {\n            if (this.dialog) {\n                delete this.ua.subscriptions[this.id];\n                this.dialog.terminate();\n                delete this.dialog;\n            }\n        },\n        /**\n        * @private\n        */\n        receiveRequest: function (request) {\n            var sub_state, sub = this;\n            function setExpiresTimeout() {\n                if (sub_state.expires) {\n                    SIP.Timers.clearTimeout(sub.timers.sub_duration);\n                    sub_state.expires = Math.min(sub.expires, Math.max(sub_state.expires, 0));\n                    sub.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), sub_state.expires * 900);\n                }\n            }\n            if (!this.matchEvent(request)) { //checks event and subscription_state headers\n                request.reply(489);\n                return;\n            }\n            if (!this.dialog) {\n                if (this.createConfirmedDialog(request, 'UAS')) {\n                    this.id = this.dialog.id.toString();\n                    delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n                    this.ua.subscriptions[this.id] = this;\n                    // UPDATE ROUTE SET TO BE BACKWARDS COMPATIBLE?\n                }\n            }\n            sub_state = request.parseHeader('Subscription-State');\n            request.reply(200, SIP.C.REASON_200);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.emit('notify', { request: request });\n            // if we've set state to terminated, no further processing should take place\n            // and we are only interested in cleaning up after the appropriate NOTIFY\n            if (this.state === 'terminated') {\n                if (sub_state.state === 'terminated') {\n                    this.terminateDialog();\n                    SIP.Timers.clearTimeout(this.timers.N);\n                    SIP.Timers.clearTimeout(this.timers.sub_duration);\n                    delete this.ua.subscriptions[this.id];\n                }\n                return;\n            }\n            switch (sub_state.state) {\n                case 'active':\n                    this.state = 'active';\n                    setExpiresTimeout();\n                    break;\n                case 'pending':\n                    if (this.state === 'notify_wait') {\n                        setExpiresTimeout();\n                    }\n                    this.state = 'pending';\n                    break;\n                case 'terminated':\n                    SIP.Timers.clearTimeout(this.timers.sub_duration);\n                    if (sub_state.reason) {\n                        this.logger.log('terminating subscription with reason ' + sub_state.reason);\n                        switch (sub_state.reason) {\n                            case 'deactivated':\n                            case 'timeout':\n                                this.subscribe();\n                                return;\n                            case 'probation':\n                            case 'giveup':\n                                if (sub_state.params && sub_state.params['retry-after']) {\n                                    this.timers.sub_duration = SIP.Timers.setTimeout(sub.subscribe.bind(sub), sub_state.params['retry-after']);\n                                }\n                                else {\n                                    this.subscribe();\n                                }\n                                return;\n                            case 'rejected':\n                            case 'noresource':\n                            case 'invariant':\n                                break;\n                        }\n                    }\n                    this.close();\n                    break;\n            }\n        },\n        failed: function (response, cause) {\n            this.close();\n            this.emit('failed', response, cause);\n            this.emit('rejected', response, cause);\n            return this;\n        },\n        onDialogError: function (response) {\n            this.failed(response, SIP.C.causes.DIALOG_ERROR);\n        },\n        /**\n        * @private\n        */\n        matchEvent: function (request) {\n            var event;\n            // Check mandatory header Event\n            if (!request.hasHeader('Event')) {\n                this.logger.warn('missing Event header');\n                return false;\n            }\n            // Check mandatory header Subscription-State\n            if (!request.hasHeader('Subscription-State')) {\n                this.logger.warn('missing Subscription-State header');\n                return false;\n            }\n            // Check whether the event in NOTIFY matches the event in SUBSCRIBE\n            event = request.parseHeader('event').event;\n            if (this.event !== event) {\n                this.logger.warn('event match failed');\n                request.reply(481, 'Event Match Failed');\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n    };\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SIP Publish (SIP Extension for Event State Publication RFC3903)\n */\n/**\n * @augments SIP\n * @class Class creating a SIP PublishContext.\n */\nmodule.exports = function (SIP) {\n    var PublishContext;\n    PublishContext = function (ua, target, event, options) {\n        this.options = options = (options || {});\n        this.options.extraHeaders = (options.extraHeaders || []).slice();\n        this.options.contentType = (options.contentType || 'text/plain');\n        if (typeof options.expires !== 'number' || (options.expires % 1) !== 0) {\n            this.options.expires = 3600;\n        }\n        else {\n            this.options.expires = Number(options.expires);\n        }\n        if (typeof (options.unpublishOnClose) !== \"boolean\") {\n            this.options.unpublishOnClose = true;\n        }\n        else {\n            this.options.unpublishOnClose = options.unpublishOnClose;\n        }\n        if (target === undefined || target === null || target === '') {\n            throw new SIP.Exceptions.MethodParameterError('Publish', 'Target', target);\n        }\n        else {\n            this.target = ua.normalizeTarget(target);\n        }\n        if (event === undefined || event === null || event === '') {\n            throw new SIP.Exceptions.MethodParameterError('Publish', 'Event', event);\n        }\n        else {\n            this.event = event;\n        }\n        // Call parent constructor\n        SIP.ClientContext.call(this, ua, SIP.C.PUBLISH, this.target, this.options);\n        this.logger = this.ua.getLogger('sip.publish');\n        this.pubRequestBody = null;\n        this.pubRequestExpires = this.options.expires;\n        this.pubRequestEtag = null;\n        this.publish_refresh_timer = null;\n        ua.on('transportCreated', function (transport) {\n            transport.on('transportError', this.onTransportError.bind(this));\n        }.bind(this));\n    };\n    // Extend ClientContext\n    PublishContext.prototype = Object.create(SIP.ClientContext.prototype);\n    // Restore the class constructor\n    PublishContext.prototype.constructor = PublishContext;\n    /**\n     * Publish\n     *\n     * @param {string} Event body to publish, optional\n     *\n     */\n    PublishContext.prototype.publish = function (body) {\n        // Clean up before the run\n        this.request = null;\n        SIP.Timers.clearTimeout(this.publish_refresh_timer);\n        if (body !== undefined && body !== null && body !== '') {\n            // is Inital or Modify request\n            this.options.body = body;\n            this.pubRequestBody = this.options.body;\n            if (this.pubRequestExpires === 0) {\n                // This is Initial request after unpublish\n                this.pubRequestExpires = this.options.expires;\n                this.pubRequestEtag = null;\n            }\n            if (!(this.ua.publishers[this.target.toString() + ':' + this.event])) {\n                this.ua.publishers[this.target.toString() + ':' + this.event] = this;\n            }\n        }\n        else {\n            // This is Refresh request\n            this.pubRequestBody = null;\n            if (this.pubRequestEtag === null) {\n                //Request not valid\n                throw new SIP.Exceptions.MethodParameterError('Publish', 'Body', body);\n            }\n            if (this.pubRequestExpires === 0) {\n                //Request not valid\n                throw new SIP.Exceptions.MethodParameterError('Publish', 'Expire', this.pubRequestExpires);\n            }\n        }\n        this.sendPublishRequest();\n    };\n    /**\n     * Unpublish\n     *\n     */\n    PublishContext.prototype.unpublish = function () {\n        // Clean up before the run\n        this.request = null;\n        SIP.Timers.clearTimeout(this.publish_refresh_timer);\n        this.pubRequestBody = null;\n        this.pubRequestExpires = 0;\n        if (this.pubRequestEtag !== null) {\n            this.sendPublishRequest();\n        }\n    };\n    /**\n     * Close\n     *\n     */\n    PublishContext.prototype.close = function () {\n        // Send unpublish, if requested\n        if (this.options.unpublishOnClose) {\n            this.unpublish();\n        }\n        else {\n            this.request = null;\n            SIP.Timers.clearTimeout(this.publish_refresh_timer);\n            this.pubRequestBody = null;\n            this.pubRequestExpires = 0;\n            this.pubRequestEtag = null;\n        }\n        if (this.ua.publishers[this.target.toString() + ':' + this.event]) {\n            delete this.ua.publishers[this.target.toString() + ':' + this.event];\n        }\n    };\n    /**\n     * @private\n     *\n     */\n    PublishContext.prototype.sendPublishRequest = function () {\n        var reqOptions;\n        reqOptions = Object.create(this.options || Object.prototype);\n        reqOptions.extraHeaders = (this.options.extraHeaders || []).slice();\n        reqOptions.extraHeaders.push('Event: ' + this.event);\n        reqOptions.extraHeaders.push('Expires: ' + this.pubRequestExpires);\n        if (this.pubRequestEtag !== null) {\n            reqOptions.extraHeaders.push('SIP-If-Match: ' + this.pubRequestEtag);\n        }\n        this.request = new SIP.OutgoingRequest(SIP.C.PUBLISH, this.target, this.ua, this.options.params, reqOptions.extraHeaders);\n        if (this.pubRequestBody !== null) {\n            this.request.body = {};\n            this.request.body.body = this.pubRequestBody;\n            this.request.body.contentType = this.options.contentType;\n        }\n        this.send();\n    };\n    /**\n     * @private\n     *\n     */\n    PublishContext.prototype.receiveResponse = function (response) {\n        var expires, minExpires, cause = SIP.Utils.getReasonPhrase(response.status_code);\n        switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n                this.emit('progress', response, cause);\n                break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n                // Set SIP-Etag\n                if (response.hasHeader('SIP-ETag')) {\n                    this.pubRequestEtag = response.getHeader('SIP-ETag');\n                }\n                else {\n                    this.logger.warn('SIP-ETag header missing in a 200-class response to PUBLISH');\n                }\n                // Update Expire\n                if (response.hasHeader('Expires')) {\n                    expires = Number(response.getHeader('Expires'));\n                    if (typeof expires === 'number' && expires >= 0 && expires <= this.pubRequestExpires) {\n                        this.pubRequestExpires = expires;\n                    }\n                    else {\n                        this.logger.warn('Bad Expires header in a 200-class response to PUBLISH');\n                    }\n                }\n                else {\n                    this.logger.warn('Expires header missing in a 200-class response to PUBLISH');\n                }\n                if (this.pubRequestExpires !== 0) {\n                    // Schedule refresh\n                    this.publish_refresh_timer = SIP.Timers.setTimeout(this.publish.bind(this), this.pubRequestExpires * 900);\n                    this.emit('published', response, cause);\n                }\n                else {\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            case /^412$/.test(response.status_code):\n                // 412 code means no matching ETag - possibly the PUBLISH expired\n                // Resubmit as new request, if the current request is not a \"remove\"\n                if (this.pubRequestEtag !== null && this.pubRequestExpires !== 0) {\n                    this.logger.warn('412 response to PUBLISH, recovering');\n                    this.pubRequestEtag = null;\n                    this.emit('progress', response, cause);\n                    this.publish(this.options.body);\n                }\n                else {\n                    this.logger.warn('412 response to PUBLISH, recovery failed');\n                    this.pubRequestExpires = 0;\n                    this.emit('failed', response, cause);\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            case /^423$/.test(response.status_code):\n                // 423 code means we need to adjust the Expires interval up\n                if (this.pubRequestExpires !== 0 && response.hasHeader('Min-Expires')) {\n                    minExpires = Number(response.getHeader('Min-Expires'));\n                    if (typeof minExpires === 'number' || minExpires > this.pubRequestExpires) {\n                        this.logger.warn('423 code in response to PUBLISH, adjusting the Expires value and trying to recover');\n                        this.pubRequestExpires = minExpires;\n                        this.emit('progress', response, cause);\n                        this.publish(this.options.body);\n                    }\n                    else {\n                        this.logger.warn('Bad 423 response Min-Expires header received for PUBLISH');\n                        this.pubRequestExpires = 0;\n                        this.emit('failed', response, cause);\n                        this.emit('unpublished', response, cause);\n                    }\n                }\n                else {\n                    this.logger.warn('423 response to PUBLISH, recovery failed');\n                    this.pubRequestExpires = 0;\n                    this.emit('failed', response, cause);\n                    this.emit('unpublished', response, cause);\n                }\n                break;\n            default:\n                this.pubRequestExpires = 0;\n                this.emit('failed', response, cause);\n                this.emit('unpublished', response, cause);\n                break;\n        }\n        // Do the cleanup\n        if (this.pubRequestExpires === 0) {\n            SIP.Timers.clearTimeout(this.publish_refresh_timer);\n            this.pubRequestBody = null;\n            this.pubRequestEtag = null;\n        }\n    };\n    PublishContext.prototype.onRequestTimeout = function () {\n        SIP.ClientContext.prototype.onRequestTimeout.call(this);\n        this.emit('unpublished', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    PublishContext.prototype.onTransportError = function () {\n        SIP.ClientContext.prototype.onTransportError.call(this);\n        this.emit('unpublished', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    SIP.PublishContext = PublishContext;\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @augments SIP\n * @class Class creating a SIP User Agent.\n * @param {function returning SIP.sessionDescriptionHandler} [configuration.sessionDescriptionHandlerFactory]\n *        A function will be invoked by each of the UA's Sessions to build the sessionDescriptionHandler for that Session.\n *        If no (or a falsy) value is provided, each Session will use a default (WebRTC) sessionDescriptionHandler.\n *\n * @param {Object} [configuration.media] gets passed to SIP.sessionDescriptionHandler.getDescription as mediaHint\n */\nmodule.exports = function (SIP, environment) {\n    var UA, C = {\n        // UA status codes\n        STATUS_INIT: 0,\n        STATUS_STARTING: 1,\n        STATUS_READY: 2,\n        STATUS_USER_CLOSED: 3,\n        STATUS_NOT_READY: 4,\n        // UA error codes\n        CONFIGURATION_ERROR: 1,\n        NETWORK_ERROR: 2,\n        ALLOWED_METHODS: [\n            'ACK',\n            'CANCEL',\n            'INVITE',\n            'MESSAGE',\n            'BYE',\n            'OPTIONS',\n            'INFO',\n            'NOTIFY',\n            'REFER'\n        ],\n        ACCEPTED_BODY_TYPES: [\n            'application/sdp',\n            'application/dtmf-relay'\n        ],\n        MAX_FORWARDS: 70,\n        TAG_LENGTH: 10\n    };\n    UA = function (configuration) {\n        var self = this;\n        // Helper function for forwarding events\n        function selfEmit(type) {\n            //registrationFailed handler is invoked with two arguments. Allow event handlers to be invoked with a variable no. of arguments\n            return self.emit.bind(self, type);\n        }\n        // Set Accepted Body Types\n        C.ACCEPTED_BODY_TYPES = C.ACCEPTED_BODY_TYPES.toString();\n        this.log = new SIP.LoggerFactory();\n        this.logger = this.getLogger('sip.ua');\n        this.cache = {\n            credentials: {}\n        };\n        this.configuration = {};\n        this.dialogs = {};\n        //User actions outside any session/dialog (MESSAGE)\n        this.applicants = {};\n        this.data = {};\n        this.sessions = {};\n        this.subscriptions = {};\n        this.earlySubscriptions = {};\n        this.publishers = {};\n        this.transport = null;\n        this.contact = null;\n        this.status = C.STATUS_INIT;\n        this.error = null;\n        this.transactions = {\n            nist: {},\n            nict: {},\n            ist: {},\n            ict: {}\n        };\n        Object.defineProperties(this, {\n            transactionsCount: {\n                get: function () {\n                    var type, transactions = ['nist', 'nict', 'ist', 'ict'], count = 0;\n                    for (type in transactions) {\n                        count += Object.keys(this.transactions[transactions[type]]).length;\n                    }\n                    return count;\n                }\n            },\n            nictTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['nict']).length;\n                }\n            },\n            nistTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['nist']).length;\n                }\n            },\n            ictTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['ict']).length;\n                }\n            },\n            istTransactionsCount: {\n                get: function () {\n                    return Object.keys(this.transactions['ist']).length;\n                }\n            }\n        });\n        /**\n         * Load configuration\n         *\n         * @throws {SIP.Exceptions.ConfigurationError}\n         * @throws {TypeError}\n         */\n        if (configuration === undefined) {\n            configuration = {};\n        }\n        else if (typeof configuration === 'string' || configuration instanceof String) {\n            configuration = {\n                uri: configuration\n            };\n        }\n        // Apply log configuration if present\n        if (configuration.log) {\n            if (configuration.log.hasOwnProperty('builtinEnabled')) {\n                this.log.builtinEnabled = configuration.log.builtinEnabled;\n            }\n            if (configuration.log.hasOwnProperty('level')) {\n                this.log.level = configuration.log.level;\n            }\n            if (configuration.log.hasOwnProperty('connector')) {\n                this.log.connector = configuration.log.connector;\n            }\n        }\n        try {\n            this.loadConfig(configuration);\n        }\n        catch (e) {\n            this.status = C.STATUS_NOT_READY;\n            this.error = C.CONFIGURATION_ERROR;\n            throw e;\n        }\n        // Initialize registerContext\n        this.registerContext = new SIP.RegisterContext(this);\n        this.registerContext.on('failed', selfEmit('registrationFailed'));\n        this.registerContext.on('registered', selfEmit('registered'));\n        this.registerContext.on('unregistered', selfEmit('unregistered'));\n        if (this.configuration.autostart) {\n            this.start();\n        }\n    };\n    UA.prototype = Object.create(SIP.EventEmitter.prototype);\n    //=================\n    //  High Level API\n    //=================\n    UA.prototype.register = function (options) {\n        this.configuration.register = true;\n        this.registerContext.register(options);\n        return this;\n    };\n    /**\n     * Unregister.\n     *\n     * @param {Boolean} [all] unregister all user bindings.\n     *\n     */\n    UA.prototype.unregister = function (options) {\n        this.configuration.register = false;\n        var context = this.registerContext;\n        this.transport.afterConnected(context.unregister.bind(context, options));\n        return this;\n    };\n    UA.prototype.isRegistered = function () {\n        return this.registerContext.registered;\n    };\n    /**\n     * Make an outgoing call.\n     *\n     * @param {String} target\n     * @param {Object} views\n     * @param {Object} [options.media] gets passed to SIP.sessionDescriptionHandler.getDescription as mediaHint\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.invite = function (target, options, modifiers) {\n        var context = new SIP.InviteClientContext(this, target, options, modifiers);\n        // Delay sending actual invite until the next 'tick' if we are already\n        // connected, so that API consumers can register to events fired by the\n        // the session.\n        this.transport.afterConnected(function () {\n            context.invite();\n            this.emit('inviteSent', context);\n        }.bind(this));\n        return context;\n    };\n    UA.prototype.subscribe = function (target, event, options) {\n        var sub = new SIP.Subscription(this, target, event, options);\n        this.transport.afterConnected(sub.subscribe.bind(sub));\n        return sub;\n    };\n    /**\n     * Send PUBLISH Event State Publication (RFC3903)\n     *\n     * @param {String} target\n     * @param {String} event\n     * @param {String} body\n     * @param {Object} [options]\n     *\n     * @throws {SIP.Exceptions.MethodParameterError}\n     *\n     */\n    UA.prototype.publish = function (target, event, body, options) {\n        var pub = new SIP.PublishContext(this, target, event, options);\n        this.transport.afterConnected(pub.publish.bind(pub, body));\n        return pub;\n    };\n    /**\n     * Send a message.\n     *\n     * @param {String} target\n     * @param {String} body\n     * @param {Object} [options]\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.message = function (target, body, options) {\n        if (body === undefined) {\n            throw new TypeError('Not enough arguments');\n        }\n        // There is no Message module, so it is okay that the UA handles defaults here.\n        options = Object.create(options || Object.prototype);\n        options.contentType || (options.contentType = 'text/plain');\n        options.body = body;\n        return this.request(SIP.C.MESSAGE, target, options);\n    };\n    UA.prototype.request = function (method, target, options) {\n        var req = new SIP.ClientContext(this, method, target, options);\n        this.transport.afterConnected(req.send.bind(req));\n        return req;\n    };\n    /**\n     * Gracefully close.\n     *\n     */\n    UA.prototype.stop = function () {\n        var session, subscription, applicant, publisher, ua = this;\n        function transactionsListener() {\n            if (ua.nistTransactionsCount === 0 && ua.nictTransactionsCount === 0) {\n                ua.removeListener('transactionDestroyed', transactionsListener);\n                ua.transport.disconnect();\n            }\n        }\n        this.logger.log('user requested closure...');\n        if (this.status === C.STATUS_USER_CLOSED) {\n            this.logger.warn('UA already closed');\n            return this;\n        }\n        // Close registerContext\n        this.logger.log('closing registerContext');\n        this.registerContext.close();\n        // Run  _terminate_ on every Session\n        for (session in this.sessions) {\n            this.logger.log('closing session ' + session);\n            this.sessions[session].terminate();\n        }\n        //Run _close_ on every confirmed Subscription\n        for (subscription in this.subscriptions) {\n            this.logger.log('unsubscribing from subscription ' + subscription);\n            this.subscriptions[subscription].close();\n        }\n        //Run _close_ on every early Subscription\n        for (subscription in this.earlySubscriptions) {\n            this.logger.log('unsubscribing from early subscription ' + subscription);\n            this.earlySubscriptions[subscription].close();\n        }\n        //Run _close_ on every Publisher\n        for (publisher in this.publishers) {\n            this.logger.log('unpublish ' + publisher);\n            this.publishers[publisher].close();\n        }\n        // Run  _close_ on every applicant\n        for (applicant in this.applicants) {\n            this.applicants[applicant].close();\n        }\n        this.status = C.STATUS_USER_CLOSED;\n        /*\n         * If the remaining transactions are all INVITE transactions, there is no need to\n         * wait anymore because every session has already been closed by this method.\n         * - locally originated sessions where terminated (CANCEL or BYE)\n         * - remotely originated sessions where rejected (4XX) or terminated (BYE)\n         * Remaining INVITE transactions belong tho sessions that where answered. This are in\n         * 'accepted' state due to timers 'L' and 'M' defined in [RFC 6026]\n         */\n        if (this.nistTransactionsCount === 0 && this.nictTransactionsCount === 0) {\n            this.transport.disconnect();\n        }\n        else {\n            this.on('transactionDestroyed', transactionsListener);\n        }\n        if (typeof environment.removeEventListener === 'function') {\n            // Google Chrome Packaged Apps don't allow 'unload' listeners:\n            // unload is not available in packaged apps\n            if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                environment.removeEventListener('unload', this.environListener);\n            }\n        }\n        return this;\n    };\n    /**\n     * Connect to the WS server if status = STATUS_INIT.\n     * Resume UA after being closed.\n     *\n     */\n    UA.prototype.start = function () {\n        // var server;\n        this.logger.log('user requested startup...');\n        if (this.status === C.STATUS_INIT) {\n            this.status = C.STATUS_STARTING;\n            if (!this.configuration.transportConstructor) {\n                throw new SIP.Exceptions.TransportError(\"Transport constructor not set\");\n            }\n            this.transport = new this.configuration.transportConstructor(this.getLogger('sip.transport'), this.configuration.transportOptions);\n            this.setTransportListeners();\n            this.emit('transportCreated', this.transport);\n            this.transport.connect();\n        }\n        else if (this.status === C.STATUS_USER_CLOSED) {\n            this.logger.log('resuming');\n            this.status = C.STATUS_READY;\n            this.transport.connect();\n        }\n        else if (this.status === C.STATUS_STARTING) {\n            this.logger.log('UA is in STARTING status, not opening new connection');\n        }\n        else if (this.status === C.STATUS_READY) {\n            this.logger.log('UA is in READY status, not resuming');\n        }\n        else {\n            this.logger.error('Connection is down. Auto-Recovery system is trying to connect');\n        }\n        if (this.configuration.autostop && typeof environment.addEventListener === 'function') {\n            // Google Chrome Packaged Apps don't allow 'unload' listeners:\n            // unload is not available in packaged apps\n            if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                this.environListener = this.stop.bind(this);\n                environment.addEventListener('unload', this.environListener);\n            }\n        }\n        return this;\n    };\n    /**\n     * Normalize a string into a valid SIP request URI\n     *\n     * @param {String} target\n     *\n     * @returns {SIP.URI|undefined}\n     */\n    UA.prototype.normalizeTarget = function (target) {\n        return SIP.Utils.normalizeTarget(target, this.configuration.hostportParams);\n    };\n    //===============================\n    //  Private (For internal use)\n    //===============================\n    UA.prototype.saveCredentials = function (credentials) {\n        this.cache.credentials[credentials.realm] = this.cache.credentials[credentials.realm] || {};\n        this.cache.credentials[credentials.realm][credentials.uri] = credentials;\n        return this;\n    };\n    UA.prototype.getCredentials = function (request) {\n        var realm, credentials;\n        realm = request.ruri.host;\n        if (this.cache.credentials[realm] && this.cache.credentials[realm][request.ruri]) {\n            credentials = this.cache.credentials[realm][request.ruri];\n            credentials.method = request.method;\n        }\n        return credentials;\n    };\n    UA.prototype.getLogger = function (category, label) {\n        return this.log.getLogger(category, label);\n    };\n    //==============================\n    // Event Handlers\n    //==============================\n    UA.prototype.onTransportError = function () {\n        if (this.status === C.STATUS_USER_CLOSED) {\n            return;\n        }\n        if (!this.error || this.error !== C.NETWORK_ERROR) {\n            this.status = C.STATUS_NOT_READY;\n            this.error = C.NETWORK_ERROR;\n        }\n    };\n    /**\n     * Helper function. Sets transport listeners\n     * @private\n     */\n    UA.prototype.setTransportListeners = function () {\n        this.transport.on('connected', this.onTransportConnected.bind(this));\n        this.transport.on('message', this.onTransportReceiveMsg.bind(this));\n        this.transport.on('transportError', this.onTransportError.bind(this));\n    };\n    /**\n     * Transport connection event.\n     * @private\n     * @event\n     * @param {SIP.Transport} transport.\n     */\n    UA.prototype.onTransportConnected = function () {\n        if (this.configuration.register) {\n            this.configuration.authenticationFactory.initialize().then(function () {\n                this.registerContext.onTransportConnected();\n            }.bind(this));\n        }\n    };\n    /**\n     * Transport message receipt event.\n     * @private\n     * @event\n     * @param {String} message\n     */\n    UA.prototype.onTransportReceiveMsg = function (message) {\n        var transaction;\n        message = SIP.Parser.parseMessage(message, this);\n        if (this.status === SIP.UA.C.STATUS_USER_CLOSED && message instanceof SIP.IncomingRequest) {\n            this.logger.warn('UA received message when status = USER_CLOSED - aborting');\n            return;\n        }\n        // Do some sanity check\n        if (SIP.sanityCheck(message, this, this.transport)) {\n            if (message instanceof SIP.IncomingRequest) {\n                message.transport = this.transport;\n                this.receiveRequest(message);\n            }\n            else if (message instanceof SIP.IncomingResponse) {\n                /* Unike stated in 18.1.2, if a response does not match\n                * any transaction, it is discarded here and no passed to the core\n                * in order to be discarded there.\n                */\n                switch (message.method) {\n                    case SIP.C.INVITE:\n                        transaction = this.transactions.ict[message.via_branch];\n                        if (transaction) {\n                            transaction.receiveResponse(message);\n                        }\n                        break;\n                    case SIP.C.ACK:\n                        // Just in case ;-)\n                        break;\n                    default:\n                        transaction = this.transactions.nict[message.via_branch];\n                        if (transaction) {\n                            transaction.receiveResponse(message);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    /**\n     * new Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.newTransaction = function (transaction) {\n        this.transactions[transaction.type][transaction.id] = transaction;\n        this.emit('newTransaction', { transaction: transaction });\n    };\n    /**\n     * destroy Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.destroyTransaction = function (transaction) {\n        delete this.transactions[transaction.type][transaction.id];\n        this.emit('transactionDestroyed', {\n            transaction: transaction\n        });\n    };\n    //=========================\n    // receiveRequest\n    //=========================\n    /**\n     * Request reception\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     */\n    UA.prototype.receiveRequest = function (request) {\n        var dialog, session, message, earlySubscription, method = request.method, replaces, replacedDialog, self = this;\n        function ruriMatches(uri) {\n            return uri && uri.user === request.ruri.user;\n        }\n        // Check that request URI points to us\n        if (!(ruriMatches(this.configuration.uri) ||\n            ruriMatches(this.contact.uri) ||\n            ruriMatches(this.contact.pub_gruu) ||\n            ruriMatches(this.contact.temp_gruu))) {\n            this.logger.warn('Request-URI does not point to us');\n            if (request.method !== SIP.C.ACK) {\n                request.reply_sl(404);\n            }\n            return;\n        }\n        // Check request URI scheme\n        if (request.ruri.scheme === SIP.C.SIPS) {\n            request.reply_sl(416);\n            return;\n        }\n        // Check transaction\n        if (SIP.Transactions.checkTransaction(this, request)) {\n            return;\n        }\n        /* RFC3261 12.2.2\n         * Requests that do not change in any way the state of a dialog may be\n         * received within a dialog (for example, an OPTIONS request).\n         * They are processed as if they had been received outside the dialog.\n         */\n        if (method === SIP.C.OPTIONS) {\n            new SIP.Transactions.NonInviteServerTransaction(request, this);\n            request.reply(200, null, [\n                'Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString(),\n                'Accept: ' + C.ACCEPTED_BODY_TYPES\n            ]);\n        }\n        else if (method === SIP.C.MESSAGE) {\n            message = new SIP.ServerContext(this, request);\n            message.body = request.body;\n            message.content_type = request.getHeader('Content-Type') || 'text/plain';\n            request.reply(200, null);\n            this.emit('message', message);\n        }\n        else if (method !== SIP.C.INVITE &&\n            method !== SIP.C.ACK) {\n            // Let those methods pass through to normal processing for now.\n            new SIP.ServerContext(this, request);\n        }\n        // Initial Request\n        if (!request.to_tag) {\n            switch (method) {\n                case SIP.C.INVITE:\n                    replaces =\n                        this.configuration.replaces !== SIP.C.supported.UNSUPPORTED &&\n                            request.parseHeader('replaces');\n                    if (replaces) {\n                        replacedDialog = this.dialogs[replaces.call_id + replaces.replaces_to_tag + replaces.replaces_from_tag];\n                        if (!replacedDialog) {\n                            //Replaced header without a matching dialog, reject\n                            request.reply_sl(481, null);\n                            return;\n                        }\n                        else if (replacedDialog.owner.status === SIP.Session.C.STATUS_TERMINATED) {\n                            request.reply_sl(603, null);\n                            return;\n                        }\n                        else if (replacedDialog.state === SIP.Dialog.C.STATUS_CONFIRMED && replaces.early_only) {\n                            request.reply_sl(486, null);\n                            return;\n                        }\n                    }\n                    session = new SIP.InviteServerContext(this, request);\n                    session.replacee = replacedDialog && replacedDialog.owner;\n                    self.emit('invite', session);\n                    break;\n                case SIP.C.BYE:\n                    // Out of dialog BYE received\n                    request.reply(481);\n                    break;\n                case SIP.C.CANCEL:\n                    session = this.findSession(request);\n                    if (session) {\n                        session.receiveRequest(request);\n                    }\n                    else {\n                        this.logger.warn('received CANCEL request for a non existent session');\n                    }\n                    break;\n                case SIP.C.ACK:\n                    /* Absorb it.\n                     * ACK request without a corresponding Invite Transaction\n                     * and without To tag.\n                     */\n                    break;\n                case SIP.C.NOTIFY:\n                    if (this.configuration.allowLegacyNotifications && this.listeners('notify').length > 0) {\n                        request.reply(200, null);\n                        self.emit('notify', { request: request });\n                    }\n                    else {\n                        request.reply(481, 'Subscription does not exist');\n                    }\n                    break;\n                case SIP.C.REFER:\n                    this.logger.log('Received an out of dialog refer');\n                    if (this.configuration.allowOutOfDialogRefers) {\n                        this.logger.log('Allow out of dialog refers is enabled on the UA');\n                        var referContext = new SIP.ReferServerContext(this, request);\n                        var hasReferListener = this.listeners('outOfDialogReferRequested').length;\n                        if (hasReferListener) {\n                            this.emit('outOfDialogReferRequested', referContext);\n                        }\n                        else {\n                            this.logger.log('No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer');\n                            referContext.accept({ followRefer: true });\n                        }\n                        break;\n                    }\n                    request.reply(405);\n                    break;\n                default:\n                    request.reply(405);\n                    break;\n            }\n        }\n        // In-dialog request\n        else {\n            dialog = this.findDialog(request);\n            if (dialog) {\n                if (method === SIP.C.INVITE) {\n                    new SIP.Transactions.InviteServerTransaction(request, this);\n                }\n                dialog.receiveRequest(request);\n            }\n            else if (method === SIP.C.NOTIFY) {\n                session = this.findSession(request);\n                earlySubscription = this.findEarlySubscription(request);\n                if (session) {\n                    session.receiveRequest(request);\n                }\n                else if (earlySubscription) {\n                    earlySubscription.receiveRequest(request);\n                }\n                else {\n                    this.logger.warn('received NOTIFY request for a non existent session or subscription');\n                    request.reply(481, 'Subscription does not exist');\n                }\n            }\n            /* RFC3261 12.2.2\n             * Request with to tag, but no matching dialog found.\n             * Exception: ACK for an Invite request for which a dialog has not\n             * been created.\n             */\n            else {\n                if (method !== SIP.C.ACK) {\n                    request.reply(481);\n                }\n            }\n        }\n    };\n    //=================\n    // Utils\n    //=================\n    /**\n     * Get the session to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     * @returns {SIP.OutgoingSession|SIP.IncomingSession|null}\n     */\n    UA.prototype.findSession = function (request) {\n        return this.sessions[request.call_id + request.from_tag] ||\n            this.sessions[request.call_id + request.to_tag] ||\n            null;\n    };\n    /**\n     * Get the dialog to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Dialog|null}\n     */\n    UA.prototype.findDialog = function (request) {\n        return this.dialogs[request.call_id + request.from_tag + request.to_tag] ||\n            this.dialogs[request.call_id + request.to_tag + request.from_tag] ||\n            null;\n    };\n    /**\n     * Get the subscription which has not been confirmed to which the request belongs to, if any\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Subscription|null}\n     */\n    UA.prototype.findEarlySubscription = function (request) {\n        return this.earlySubscriptions[request.call_id + request.to_tag + request.getHeader('event')] || null;\n    };\n    function checkAuthenticationFactory(authenticationFactory) {\n        if (!(authenticationFactory instanceof Function)) {\n            return;\n        }\n        if (!authenticationFactory.initialize) {\n            authenticationFactory.initialize = function initialize() {\n                return SIP.Utils.Promise.resolve();\n            };\n        }\n        return authenticationFactory;\n    }\n    /**\n     * Configuration load.\n     * @private\n     * returns {Boolean}\n     */\n    UA.prototype.loadConfig = function (configuration) {\n        // Settings and default values\n        var parameter, value, checked_value, hostportParams, registrarServer, settings = {\n            /* Host address\n            * Value to be set in Via sent_by and host part of Contact FQDN\n            */\n            viaHost: SIP.Utils.createRandomToken(12) + '.invalid',\n            uri: new SIP.URI('sip', 'anonymous.' + SIP.Utils.createRandomToken(6), 'anonymous.invalid', null, null),\n            //Custom Configuration Settings\n            custom: {},\n            //Display name\n            displayName: '',\n            // Password\n            password: null,\n            // Registration parameters\n            registerExpires: 600,\n            register: true,\n            registrarServer: null,\n            // Transport related parameters\n            transportConstructor: __webpack_require__(29)(SIP),\n            transportOptions: {},\n            //string to be inserted into User-Agent request header\n            userAgentString: SIP.C.USER_AGENT,\n            // Session parameters\n            noAnswerTimeout: 60,\n            // Hacks\n            hackViaTcp: false,\n            hackIpInContact: false,\n            hackWssInTransport: false,\n            hackAllowUnregisteredOptionTags: false,\n            // Session Description Handler Options\n            sessionDescriptionHandlerFactoryOptions: {\n                constraints: {},\n                peerConnectionOptions: {}\n            },\n            contactName: SIP.Utils.createRandomToken(8),\n            contactTransport: 'ws',\n            forceRport: false,\n            //autostarting\n            autostart: true,\n            autostop: true,\n            //Reliable Provisional Responses\n            rel100: SIP.C.supported.UNSUPPORTED,\n            // DTMF type: 'info' or 'rtp' (RFC 4733)\n            // RTP Payload Spec: https://tools.ietf.org/html/rfc4733\n            // WebRTC Audio Spec: https://tools.ietf.org/html/rfc7874\n            dtmfType: SIP.C.dtmfType.INFO,\n            // Replaces header (RFC 3891)\n            // http://tools.ietf.org/html/rfc3891\n            replaces: SIP.C.supported.UNSUPPORTED,\n            sessionDescriptionHandlerFactory: __webpack_require__(30)(SIP).defaultFactory,\n            authenticationFactory: checkAuthenticationFactory(function authenticationFactory(ua) {\n                return new SIP.DigestAuthentication(ua);\n            }),\n            allowLegacyNotifications: false,\n            allowOutOfDialogRefers: false,\n        };\n        // Pre-Configuration\n        function aliasUnderscored(parameter, logger) {\n            var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n                return m[0] + '_' + m[1].toLowerCase();\n            });\n            if (parameter === underscored) {\n                return;\n            }\n            var hasParameter = configuration.hasOwnProperty(parameter);\n            if (configuration.hasOwnProperty(underscored)) {\n                logger.warn(underscored + ' is deprecated, please use ' + parameter);\n                if (hasParameter) {\n                    logger.warn(parameter + ' overriding ' + underscored);\n                }\n            }\n            configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n        }\n        var configCheck = this.getConfigurationCheck();\n        // Check Mandatory parameters\n        for (parameter in configCheck.mandatory) {\n            aliasUnderscored(parameter, this.logger);\n            if (!configuration.hasOwnProperty(parameter)) {\n                throw new SIP.Exceptions.ConfigurationError(parameter);\n            }\n            else {\n                value = configuration[parameter];\n                checked_value = configCheck.mandatory[parameter](value);\n                if (checked_value !== undefined) {\n                    settings[parameter] = checked_value;\n                }\n                else {\n                    throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n            }\n        }\n        // Check Optional parameters\n        for (parameter in configCheck.optional) {\n            aliasUnderscored(parameter, this.logger);\n            if (configuration.hasOwnProperty(parameter)) {\n                value = configuration[parameter];\n                // If the parameter value is an empty array, but shouldn't be, apply its default value.\n                if (value instanceof Array && value.length === 0) {\n                    continue;\n                }\n                // If the parameter value is null, empty string, or undefined then apply its default value.\n                if (value === null || value === \"\" || value === undefined) {\n                    continue;\n                }\n                // If it's a number with NaN value then also apply its default value.\n                // NOTE: JS does not allow \"value === NaN\", the following does the work:\n                else if (typeof (value) === 'number' && isNaN(value)) {\n                    continue;\n                }\n                checked_value = configCheck.optional[parameter](value);\n                if (checked_value !== undefined) {\n                    settings[parameter] = checked_value;\n                }\n                else {\n                    throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n            }\n        }\n        // Post Configuration Process\n        // Allow passing 0 number as displayName.\n        if (settings.displayName === 0) {\n            settings.displayName = '0';\n        }\n        // Instance-id for GRUU\n        if (!settings.instanceId) {\n            settings.instanceId = SIP.Utils.newUUID();\n        }\n        // sipjsId instance parameter. Static random tag of length 5\n        settings.sipjsId = SIP.Utils.createRandomToken(5);\n        // String containing settings.uri without scheme and user.\n        hostportParams = settings.uri.clone();\n        hostportParams.user = null;\n        settings.hostportParams = hostportParams.toRaw().replace(/^sip:/i, '');\n        /* Check whether authorizationUser is explicitly defined.\n         * Take 'settings.uri.user' value if not.\n         */\n        if (!settings.authorizationUser) {\n            settings.authorizationUser = settings.uri.user;\n        }\n        /* If no 'registrarServer' is set use the 'uri' value without user portion. */\n        if (!settings.registrarServer) {\n            registrarServer = settings.uri.clone();\n            registrarServer.user = null;\n            settings.registrarServer = registrarServer;\n        }\n        // User noAnswerTimeout\n        settings.noAnswerTimeout = settings.noAnswerTimeout * 1000;\n        // Via Host\n        if (settings.hackIpInContact) {\n            if (typeof settings.hackIpInContact === 'boolean') {\n                settings.viaHost = SIP.Utils.getRandomTestNetIP();\n            }\n            else if (typeof settings.hackIpInContact === 'string') {\n                settings.viaHost = settings.hackIpInContact;\n            }\n        }\n        // Contact transport parameter\n        if (settings.hackWssInTransport) {\n            settings.contactTransport = 'wss';\n        }\n        this.contact = {\n            pub_gruu: null,\n            temp_gruu: null,\n            uri: new SIP.URI('sip', settings.contactName, settings.viaHost, null, { transport: settings.contactTransport }),\n            toString: function (options) {\n                options = options || {};\n                var anonymous = options.anonymous || null, outbound = options.outbound || null, contact = '<';\n                if (anonymous) {\n                    contact += (this.temp_gruu || ('sip:anonymous@anonymous.invalid;transport=' + settings.contactTransport)).toString();\n                }\n                else {\n                    contact += (this.pub_gruu || this.uri).toString();\n                }\n                if (outbound) {\n                    contact += ';ob';\n                }\n                contact += '>';\n                return contact;\n            }\n        };\n        var skeleton = {};\n        // Fill the value of the configuration_skeleton\n        for (parameter in settings) {\n            skeleton[parameter] = settings[parameter];\n        }\n        Object.assign(this.configuration, skeleton);\n        this.logger.log('configuration parameters after validation:');\n        for (parameter in settings) {\n            switch (parameter) {\n                case 'uri':\n                case 'registrarServer':\n                case 'sessionDescriptionHandlerFactory':\n                    this.logger.log('· ' + parameter + ': ' + settings[parameter]);\n                    break;\n                case 'password':\n                    this.logger.log('· ' + parameter + ': ' + 'NOT SHOWN');\n                    break;\n                case 'transportConstructor':\n                    this.logger.log('· ' + parameter + ': ' + settings[parameter].name);\n                    break;\n                default:\n                    this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n            }\n        }\n        return;\n    };\n    /**\n     * Configuration checker.\n     * @private\n     * @return {Boolean}\n     */\n    UA.prototype.getConfigurationCheck = function () {\n        return {\n            mandatory: {},\n            optional: {\n                uri: function (uri) {\n                    var parsed;\n                    if (!(/^sip:/i).test(uri)) {\n                        uri = SIP.C.SIP + ':' + uri;\n                    }\n                    parsed = SIP.URI.parse(uri);\n                    if (!parsed) {\n                        return;\n                    }\n                    else if (!parsed.user) {\n                        return;\n                    }\n                    else {\n                        return parsed;\n                    }\n                },\n                transportConstructor: function (transportConstructor) {\n                    if (transportConstructor instanceof Function) {\n                        return transportConstructor;\n                    }\n                },\n                transportOptions: function (transportOptions) {\n                    if (typeof transportOptions === 'object') {\n                        return transportOptions;\n                    }\n                },\n                authorizationUser: function (authorizationUser) {\n                    if (SIP.Grammar.parse('\"' + authorizationUser + '\"', 'quoted_string') === -1) {\n                        return;\n                    }\n                    else {\n                        return authorizationUser;\n                    }\n                },\n                displayName: function (displayName) {\n                    if (SIP.Grammar.parse('\"' + displayName + '\"', 'displayName') === -1) {\n                        return;\n                    }\n                    else {\n                        return displayName;\n                    }\n                },\n                dtmfType: function (dtmfType) {\n                    switch (dtmfType) {\n                        case SIP.C.dtmfType.RTP:\n                            return SIP.C.dtmfType.RTP;\n                        case SIP.C.dtmfType.INFO:\n                        // Fall through\n                        default:\n                            return SIP.C.dtmfType.INFO;\n                    }\n                },\n                hackViaTcp: function (hackViaTcp) {\n                    if (typeof hackViaTcp === 'boolean') {\n                        return hackViaTcp;\n                    }\n                },\n                hackIpInContact: function (hackIpInContact) {\n                    if (typeof hackIpInContact === 'boolean') {\n                        return hackIpInContact;\n                    }\n                    else if (typeof hackIpInContact === 'string' && SIP.Grammar.parse(hackIpInContact, 'host') !== -1) {\n                        return hackIpInContact;\n                    }\n                },\n                hackWssInTransport: function (hackWssInTransport) {\n                    if (typeof hackWssInTransport === 'boolean') {\n                        return hackWssInTransport;\n                    }\n                },\n                hackAllowUnregisteredOptionTags: function (hackAllowUnregisteredOptionTags) {\n                    if (typeof hackAllowUnregisteredOptionTags === 'boolean') {\n                        return hackAllowUnregisteredOptionTags;\n                    }\n                },\n                contactTransport: function (contactTransport) {\n                    if (typeof contactTransport === 'string') {\n                        return contactTransport;\n                    }\n                },\n                forceRport: function (forceRport) {\n                    if (typeof forceRport === 'boolean') {\n                        return forceRport;\n                    }\n                },\n                instanceId: function (instanceId) {\n                    if (typeof instanceId !== 'string') {\n                        return;\n                    }\n                    if ((/^uuid:/i.test(instanceId))) {\n                        instanceId = instanceId.substr(5);\n                    }\n                    if (SIP.Grammar.parse(instanceId, 'uuid') === -1) {\n                        return;\n                    }\n                    else {\n                        return instanceId;\n                    }\n                },\n                noAnswerTimeout: function (noAnswerTimeout) {\n                    var value;\n                    if (SIP.Utils.isDecimal(noAnswerTimeout)) {\n                        value = Number(noAnswerTimeout);\n                        if (value > 0) {\n                            return value;\n                        }\n                    }\n                },\n                password: function (password) {\n                    return String(password);\n                },\n                rel100: function (rel100) {\n                    if (rel100 === SIP.C.supported.REQUIRED) {\n                        return SIP.C.supported.REQUIRED;\n                    }\n                    else if (rel100 === SIP.C.supported.SUPPORTED) {\n                        return SIP.C.supported.SUPPORTED;\n                    }\n                    else {\n                        return SIP.C.supported.UNSUPPORTED;\n                    }\n                },\n                replaces: function (replaces) {\n                    if (replaces === SIP.C.supported.REQUIRED) {\n                        return SIP.C.supported.REQUIRED;\n                    }\n                    else if (replaces === SIP.C.supported.SUPPORTED) {\n                        return SIP.C.supported.SUPPORTED;\n                    }\n                    else {\n                        return SIP.C.supported.UNSUPPORTED;\n                    }\n                },\n                register: function (register) {\n                    if (typeof register === 'boolean') {\n                        return register;\n                    }\n                },\n                registerExpires: function (registerExpires) {\n                    var value;\n                    if (SIP.Utils.isDecimal(registerExpires)) {\n                        value = Number(registerExpires);\n                        if (value > 0) {\n                            return value;\n                        }\n                    }\n                },\n                registrarServer: function (registrarServer) {\n                    var parsed;\n                    if (typeof registrarServer !== 'string') {\n                        return;\n                    }\n                    if (!/^sip:/i.test(registrarServer)) {\n                        registrarServer = SIP.C.SIP + ':' + registrarServer;\n                    }\n                    parsed = SIP.URI.parse(registrarServer);\n                    if (!parsed) {\n                        return;\n                    }\n                    else if (parsed.user) {\n                        return;\n                    }\n                    else {\n                        return parsed;\n                    }\n                },\n                userAgentString: function (userAgentString) {\n                    if (typeof userAgentString === 'string') {\n                        return userAgentString;\n                    }\n                },\n                autostart: function (autostart) {\n                    if (typeof autostart === 'boolean') {\n                        return autostart;\n                    }\n                },\n                autostop: function (autostop) {\n                    if (typeof autostop === 'boolean') {\n                        return autostop;\n                    }\n                },\n                sessionDescriptionHandlerFactory: function (sessionDescriptionHandlerFactory) {\n                    if (sessionDescriptionHandlerFactory instanceof Function) {\n                        return sessionDescriptionHandlerFactory;\n                    }\n                },\n                sessionDescriptionHandlerFactoryOptions: function (options) {\n                    if (typeof options === 'object') {\n                        return options;\n                    }\n                },\n                authenticationFactory: checkAuthenticationFactory,\n                allowLegacyNotifications: function (allowLegacyNotifications) {\n                    if (typeof allowLegacyNotifications === 'boolean') {\n                        return allowLegacyNotifications;\n                    }\n                },\n                custom: function (custom) {\n                    if (typeof custom === 'object') {\n                        return custom;\n                    }\n                },\n                contactName: function (contactName) {\n                    if (typeof contactName === 'string') {\n                        return contactName;\n                    }\n                },\n            }\n        };\n    };\n    UA.C = C;\n    SIP.UA = UA;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview Transport\n */\n/**\n * @augments SIP\n * @class Transport\n * @param {Object} options\n */\nmodule.exports = function (SIP) {\n    var Transport, C = {\n        // Transport status codes\n        STATUS_CONNECTING: 0,\n        STATUS_OPEN: 1,\n        STATUS_CLOSING: 2,\n        STATUS_CLOSED: 3,\n    };\n    var WebSocket = (global.window || global).WebSocket;\n    /**\n     * Compute an amount of time in seconds to wait before sending another\n     * keep-alive.\n     * @returns {Number}\n     */\n    function computeKeepAliveTimeout(upperBound) {\n        var lowerBound = upperBound * 0.8;\n        return 1000 * (Math.random() * (upperBound - lowerBound) + lowerBound);\n    }\n    Transport = function (logger, options) {\n        options = SIP.Utils.defaultOptions({}, options);\n        this.logger = logger;\n        this.ws = null;\n        this.server = null;\n        this.connectionPromise = null;\n        this.connectDeferredResolve = null;\n        this.connectionTimeout = null;\n        this.disconnectionPromise = null;\n        this.disconnectDeferredResolve = null;\n        this.boundOnOpen = null;\n        this.boundOnMessage = null;\n        this.boundOnClose = null;\n        this.boundOnError = null;\n        this.reconnectionAttempts = 0;\n        this.reconnectTimer = null;\n        // Keep alive\n        this.keepAliveInterval = null;\n        this.keepAliveDebounceTimeout = null;\n        this.status = C.STATUS_CONNECTING;\n        this.configuration = {};\n        this.loadConfig(options);\n    };\n    Transport.prototype = Object.create(SIP.Transport.prototype, {\n        /**\n        *\n        * @returns {Boolean}\n        */\n        isConnected: { writable: true, value: function isConnected() {\n                return this.status === C.STATUS_OPEN;\n            } },\n        /**\n         * Send a message.\n         * @param {SIP.OutgoingRequest|String} msg\n         * @param {Object} [options]\n         * @returns {Promise}\n         */\n        sendPromise: { writable: true, value: function sendPromise(msg, options) {\n                options = options || {};\n                if (!this.statusAssert(C.STATUS_OPEN, options.force)) {\n                    this.onError('unable to send message - WebSocket not open');\n                    return SIP.Utils.Promise.reject();\n                }\n                var message = msg.toString();\n                if (this.ws) {\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('sending WebSocket message:\\n\\n' + message + '\\n');\n                    }\n                    this.ws.send(message);\n                    return SIP.Utils.Promise.resolve({ msg: message });\n                }\n                else {\n                    this.onError('unable to send message - WebSocket does not exist');\n                    return SIP.Utils.Promise.reject();\n                }\n            } },\n        /**\n        * Disconnect socket.\n        */\n        disconnectPromise: { writable: true, value: function disconnectPromise(options) {\n                if (this.disconnectionPromise) {\n                    return this.disconnectionPromise;\n                }\n                options = options || {};\n                if (!this.statusTransition(C.STATUS_CLOSING, options.force)) {\n                    return SIP.Utils.Promise.reject('Failed status transition - attempted to disconnect a socket that was not open');\n                }\n                this.disconnectionPromise = new SIP.Utils.Promise(function (resolve, reject) {\n                    this.disconnectDeferredResolve = resolve;\n                    if (this.reconnectTimer) {\n                        SIP.Timers.clearTimeout(this.reconnectTimer);\n                        this.reconnectTimer = null;\n                    }\n                    if (this.ws) {\n                        this.stopSendingKeepAlives();\n                        this.logger.log('closing WebSocket ' + this.server.ws_uri);\n                        this.ws.close(options.code, options.reason);\n                    }\n                    else {\n                        reject('Attempted to disconnect but the websocket doesn\\'t exist');\n                    }\n                }.bind(this));\n                return this.disconnectionPromise;\n            } },\n        /**\n        * Connect socket.\n        */\n        connectPromise: { writable: true, value: function connectPromise(options) {\n                if (this.connectionPromise) {\n                    return this.connectionPromise;\n                }\n                options = options || {};\n                this.server = this.server || this.getNextWsServer(options.force);\n                this.connectionPromise = new SIP.Utils.Promise(function (resolve, reject) {\n                    if ((this.status === C.STATUS_OPEN || this.status === C.STATUS_CLOSING) && !options.force) {\n                        this.logger.warn('WebSocket ' + this.server.ws_uri + ' is already connected');\n                        reject('Failed status check - attempted to open a connection but already open/closing');\n                        return;\n                    }\n                    this.connectDeferredResolve = resolve;\n                    this.status = C.STATUS_CONNECTING;\n                    this.logger.log('connecting to WebSocket ' + this.server.ws_uri);\n                    this.disposeWs();\n                    try {\n                        this.ws = new WebSocket(this.server.ws_uri, 'sip');\n                    }\n                    catch (e) {\n                        this.ws = null;\n                        this.status = C.STATUS_CLOSED; // force status to closed in error case\n                        this.onError('error connecting to WebSocket ' + this.server.ws_uri + ':' + e);\n                        reject('Failed to create a websocket');\n                        return;\n                    }\n                    if (!this.ws) {\n                        reject('Unexpected instance websocket not set');\n                        return;\n                    }\n                    this.connectionTimeout = SIP.Timers.setTimeout(function () {\n                        this.onError('took too long to connect - exceeded time set in configuration.connectionTimeout: ' + this.configuration.connectionTimeout + 's');\n                    }.bind(this), this.configuration.connectionTimeout * 1000);\n                    this.boundOnOpen = this.onOpen.bind(this);\n                    this.boundOnMessage = this.onMessage.bind(this);\n                    this.boundOnClose = this.onClose.bind(this);\n                    this.boundOnError = this.onError.bind(this);\n                    this.ws.addEventListener('open', this.boundOnOpen);\n                    this.ws.addEventListener('message', this.boundOnMessage);\n                    this.ws.addEventListener('close', this.boundOnClose);\n                    this.ws.addEventListener('error', this.boundOnError);\n                }.bind(this));\n                return this.connectionPromise;\n            } },\n        // Transport Event Handlers\n        /**\n        * @event\n        * @param {event} e\n        */\n        onOpen: { writable: true, value: function onOpen() {\n                this.status = C.STATUS_OPEN; // quietly force status to open\n                this.emit('connected');\n                SIP.Timers.clearTimeout(this.connectionTimeout);\n                this.logger.log('WebSocket ' + this.server.ws_uri + ' connected');\n                // Clear reconnectTimer since we are not disconnected\n                if (this.reconnectTimer !== null) {\n                    SIP.Timers.clearTimeout(this.reconnectTimer);\n                    this.reconnectTimer = null;\n                }\n                // Reset reconnectionAttempts\n                this.reconnectionAttempts = 0;\n                // Reset disconnection promise so we can disconnect from a fresh state\n                this.disconnectionPromise = null;\n                this.disconnectDeferredResolve = null;\n                // Start sending keep-alives\n                this.startSendingKeepAlives();\n                if (this.connectDeferredResolve) {\n                    this.connectDeferredResolve({ overrideEvent: true });\n                }\n                else {\n                    this.logger.warn('Unexpected websocket.onOpen with no connectDeferredResolve');\n                }\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onClose: { writable: true, value: function onClose(e) {\n                this.logger.log('WebSocket disconnected (code: ' + e.code + (e.reason ? '| reason: ' + e.reason : '') + ')');\n                this.emit('disconnected', { code: e.code, reason: e.reason });\n                if (this.status !== C.STATUS_CLOSING) {\n                    this.logger.warn('WebSocket abrupt disconnection');\n                    this.emit('transportError');\n                }\n                this.stopSendingKeepAlives();\n                // Clean up connection variables so we can connect again from a fresh state\n                SIP.Timers.clearTimeout(this.connectionTimeout);\n                this.connectionTimeout = null;\n                this.connectionPromise = null;\n                this.connectDeferredResolve = null;\n                // Check whether the user requested to close.\n                if (this.disconnectDeferredResolve) {\n                    this.disconnectDeferredResolve({ overrideEvent: true });\n                    this.statusTransition(C.STATUS_CLOSED);\n                    this.disconnectDeferredResolve = null;\n                    return;\n                }\n                this.status = C.STATUS_CLOSED; // quietly force status to closed\n                this.reconnect();\n            } },\n        /**\n        * Removes event listeners and clears the instance ws\n        * @private\n        * @param {event} e\n        */\n        disposeWs: { writable: true, value: function disposeWs() {\n                if (this.ws) {\n                    this.ws.removeEventListener('open', this.boundOnOpen);\n                    this.ws.removeEventListener('message', this.boundOnMessage);\n                    this.ws.removeEventListener('close', this.boundOnClose);\n                    this.ws.removeEventListener('error', this.boundOnError);\n                    this.boundOnOpen = null;\n                    this.boundOnMessage = null;\n                    this.boundOnClose = null;\n                    this.boundOnError = null;\n                    this.ws = null;\n                }\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onMessage: { writable: true, value: function onMessage(e) {\n                var data = e.data;\n                // CRLF Keep Alive response from server. Clear our keep alive timeout.\n                if (/^(\\r\\n)+$/.test(data)) {\n                    this.clearKeepAliveTimeout();\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket message with CRLF Keep Alive response');\n                    }\n                    return;\n                }\n                else if (!data) {\n                    this.logger.warn('received empty message, message discarded');\n                    return;\n                }\n                // WebSocket binary message.\n                else if (typeof data !== 'string') {\n                    try {\n                        data = String.fromCharCode.apply(null, new Uint8Array(data));\n                    }\n                    catch (err) {\n                        this.logger.warn('received WebSocket binary message failed to be converted into string, message discarded');\n                        return;\n                    }\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket binary message:\\n\\n' + data + '\\n');\n                    }\n                }\n                // WebSocket text message.\n                else {\n                    if (this.configuration.traceSip === true) {\n                        this.logger.log('received WebSocket text message:\\n\\n' + data + '\\n');\n                    }\n                }\n                this.emit('message', data);\n            } },\n        /**\n        * @event\n        * @param {event} e\n        */\n        onError: { writable: true, value: function onError(e) {\n                this.logger.warn('Transport error: ' + e);\n                this.emit('transportError');\n            } },\n        /**\n        * Reconnection attempt logic.\n        * @private\n        */\n        reconnect: { writable: true, value: function reconnect() {\n                if (this.reconnectionAttempts > 0) {\n                    this.logger.log('Reconnection attempt ' + this.reconnectionAttempts + ' failed');\n                }\n                if (this.noAvailableServers()) {\n                    this.logger.warn('no available ws servers left - going to closed state');\n                    this.status = C.STATUS_CLOSED;\n                    this.emit('closed');\n                    this.resetServerErrorStatus();\n                    return;\n                }\n                if (this.isConnected()) {\n                    this.logger.warn('attempted to reconnect while connected - forcing disconnect');\n                    this.disconnect({ force: true });\n                }\n                this.reconnectionAttempts += 1;\n                if (this.reconnectionAttempts > this.configuration.maxReconnectionAttempts) {\n                    this.logger.warn('maximum reconnection attempts for WebSocket ' + this.server.ws_uri);\n                    this.logger.log('transport ' + this.server.ws_uri + ' failed | connection state set to \\'error\\'');\n                    this.server.isError = true;\n                    this.emit('transportError');\n                    this.server = this.getNextWsServer();\n                    this.reconnectionAttempts = 0;\n                    this.reconnect();\n                }\n                else {\n                    this.logger.log('trying to reconnect to WebSocket ' + this.server.ws_uri + ' (reconnection attempt ' + this.reconnectionAttempts + ')');\n                    this.reconnectTimer = SIP.Timers.setTimeout(function () {\n                        this.connect();\n                        this.reconnectTimer = null;\n                    }.bind(this), (this.reconnectionAttempts === 1) ? 0 : this.configuration.reconnectionTimeout * 1000);\n                }\n            } },\n        /**\n        * Resets the error state of all servers in the configuration\n        */\n        resetServerErrorStatus: { writable: true, value: function resetServerErrorStatus() {\n                var idx, length = this.configuration.wsServers.length;\n                for (idx = 0; idx < length; idx++) {\n                    this.configuration.wsServers[idx].isError = false;\n                }\n            } },\n        /**\n        * Retrieve the next server to which connect.\n        * @private\n        * @param {Boolean} force allows bypass of server error status checking\n        * @returns {Object} wsServer\n        */\n        getNextWsServer: { writable: true, value: function getNextWsServer(force) {\n                if (this.noAvailableServers()) {\n                    this.logger.warn('attempted to get next ws server but there are no available ws servers left');\n                    return;\n                }\n                // Order servers by weight\n                var idx, length, wsServer, candidates = [];\n                length = this.configuration.wsServers.length;\n                for (idx = 0; idx < length; idx++) {\n                    wsServer = this.configuration.wsServers[idx];\n                    if (wsServer.isError && !force) {\n                        continue;\n                    }\n                    else if (candidates.length === 0) {\n                        candidates.push(wsServer);\n                    }\n                    else if (wsServer.weight > candidates[0].weight) {\n                        candidates = [wsServer];\n                    }\n                    else if (wsServer.weight === candidates[0].weight) {\n                        candidates.push(wsServer);\n                    }\n                }\n                idx = Math.floor(Math.random() * candidates.length);\n                return candidates[idx];\n            } },\n        /**\n        * Checks all configuration servers, returns true if all of them have isError: true and false otherwise\n        * @private\n        * @returns {Boolean}\n        */\n        noAvailableServers: { writable: true, value: function noAvailableServers() {\n                var server;\n                for (server in this.configuration.wsServers) {\n                    if (!this.configuration.wsServers[server].isError) {\n                        return false;\n                    }\n                }\n                return true;\n            } },\n        //==============================\n        // KeepAlive Stuff\n        //==============================\n        /**\n         * Send a keep-alive (a double-CRLF sequence).\n         * @private\n         * @returns {Boolean}\n         */\n        sendKeepAlive: { writable: true, value: function sendKeepAlive() {\n                if (this.keepAliveDebounceTimeout) {\n                    // We already have an outstanding keep alive, do not send another.\n                    return;\n                }\n                this.keepAliveDebounceTimeout = SIP.Timers.setTimeout(function () {\n                    this.emit('keepAliveDebounceTimeout');\n                    this.clearKeepAliveTimeout();\n                }.bind(this), this.configuration.keepAliveDebounce * 1000);\n                return this.send('\\r\\n\\r\\n');\n            } },\n        clearKeepAliveTimeout: { writable: true, value: function clearKeepAliveTimeout() {\n                SIP.Timers.clearTimeout(this.keepAliveDebounceTimeout);\n                this.keepAliveDebounceTimeout = null;\n            } },\n        /**\n         * Start sending keep-alives.\n         * @private\n         */\n        startSendingKeepAlives: { writable: true, value: function startSendingKeepAlives() {\n                if (this.configuration.keepAliveInterval && !this.keepAliveInterval) {\n                    this.keepAliveInterval = SIP.Timers.setInterval(function () {\n                        this.sendKeepAlive();\n                        this.startSendingKeepAlives();\n                    }.bind(this), computeKeepAliveTimeout(this.configuration.keepAliveInterval));\n                }\n            } },\n        /**\n         * Stop sending keep-alives.\n         * @private\n         */\n        stopSendingKeepAlives: { writable: true, value: function stopSendingKeepAlives() {\n                SIP.Timers.clearInterval(this.keepAliveInterval);\n                SIP.Timers.clearTimeout(this.keepAliveDebounceTimeout);\n                this.keepAliveInterval = null;\n                this.keepAliveDebounceTimeout = null;\n            } },\n        //==============================\n        // Status Stuff\n        //==============================\n        /**\n        * Checks given status against instance current status. Returns true if they match\n        * @private\n        * @param {Number} status\n        * @param {Boolean} [force]\n        * @returns {Boolean}\n        */\n        statusAssert: { writable: true, value: function statusAssert(status, force) {\n                if (status === this.status) {\n                    return true;\n                }\n                else {\n                    if (force) {\n                        this.logger.warn('Attempted to assert ' + Object.keys(C)[this.status] + ' as ' + Object.keys(C)[status] + '- continuing with option: \\'force\\'');\n                        return true;\n                    }\n                    else {\n                        this.logger.warn('Tried to assert ' + Object.keys(C)[status] + ' but is currently ' + Object.keys(C)[this.status]);\n                        return false;\n                    }\n                }\n            } },\n        /**\n        * Transitions the status. Checks for legal transition via assertion beforehand\n        * @private\n        * @param {Number} status\n        * @param {Boolean} [force]\n        * @returns {Boolean}\n        */\n        statusTransition: { writable: true, value: function statusTransition(status, force) {\n                this.logger.log('Attempting to transition status from ' + Object.keys(C)[this.status] + ' to ' + Object.keys(C)[status]);\n                if ((status === C.STATUS_OPEN && this.statusAssert(C.STATUS_CONNECTING, force)) ||\n                    (status === C.STATUS_CLOSING && this.statusAssert(C.STATUS_OPEN, force)) ||\n                    (status === C.STATUS_CLOSED && this.statusAssert(C.STATUS_CLOSING, force))) {\n                    this.status = status;\n                    return true;\n                }\n                else {\n                    this.logger.warn('Status transition failed - result: no-op - reason: either gave an nonexistent status or attempted illegal transition');\n                    return false;\n                }\n            } },\n        //==============================\n        // Configuration Handling\n        //==============================\n        /**\n         * Configuration load.\n         * @private\n         * returns {Boolean}\n         */\n        loadConfig: { writable: true, value: function loadConfig(configuration) {\n                var parameter, value, checked_value, settings = {\n                    wsServers: [{\n                            scheme: 'WSS',\n                            sip_uri: '<sip:edge.sip.onsip.com;transport=ws;lr>',\n                            weight: 0,\n                            ws_uri: 'wss://edge.sip.onsip.com',\n                            isError: false\n                        }],\n                    connectionTimeout: 5,\n                    maxReconnectionAttempts: 3,\n                    reconnectionTimeout: 4,\n                    keepAliveInterval: 0,\n                    keepAliveDebounce: 10,\n                    // Logging\n                    traceSip: false,\n                };\n                // Pre-Configuration\n                function aliasUnderscored(parameter, logger) {\n                    var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n                        return m[0] + '_' + m[1].toLowerCase();\n                    });\n                    if (parameter === underscored) {\n                        return;\n                    }\n                    var hasParameter = configuration.hasOwnProperty(parameter);\n                    if (configuration.hasOwnProperty(underscored)) {\n                        logger.warn(underscored + ' is deprecated, please use ' + parameter);\n                        if (hasParameter) {\n                            logger.warn(parameter + ' overriding ' + underscored);\n                        }\n                    }\n                    configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n                }\n                var configCheck = this.getConfigurationCheck();\n                // Check Mandatory parameters\n                for (parameter in configCheck.mandatory) {\n                    aliasUnderscored(parameter, this.logger);\n                    if (!configuration.hasOwnProperty(parameter)) {\n                        throw new SIP.Exceptions.ConfigurationError(parameter);\n                    }\n                    else {\n                        value = configuration[parameter];\n                        checked_value = configCheck.mandatory[parameter](value);\n                        if (checked_value !== undefined) {\n                            settings[parameter] = checked_value;\n                        }\n                        else {\n                            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                        }\n                    }\n                }\n                // Check Optional parameters\n                for (parameter in configCheck.optional) {\n                    aliasUnderscored(parameter, this.logger);\n                    if (configuration.hasOwnProperty(parameter)) {\n                        value = configuration[parameter];\n                        // If the parameter value is an empty array, but shouldn't be, apply its default value.\n                        if (value instanceof Array && value.length === 0) {\n                            continue;\n                        }\n                        // If the parameter value is null, empty string, or undefined then apply its default value.\n                        if (value === null || value === '' || value === undefined) {\n                            continue;\n                        }\n                        // If it's a number with NaN value then also apply its default value.\n                        // NOTE: JS does not allow \"value === NaN\", the following does the work:\n                        else if (typeof (value) === 'number' && isNaN(value)) {\n                            continue;\n                        }\n                        checked_value = configCheck.optional[parameter](value);\n                        if (checked_value !== undefined) {\n                            settings[parameter] = checked_value;\n                        }\n                        else {\n                            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                        }\n                    }\n                }\n                var skeleton = {};\n                // Fill the value of the configuration_skeleton\n                for (parameter in settings) {\n                    skeleton[parameter] = {\n                        value: settings[parameter],\n                    };\n                }\n                Object.defineProperties(this.configuration, skeleton);\n                this.logger.log('configuration parameters after validation:');\n                for (parameter in settings) {\n                    this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n                }\n                return;\n            } },\n        /**\n         * Configuration checker.\n         * @private\n         * @return {Boolean}\n         */\n        getConfigurationCheck: { writable: true, value: function getConfigurationCheck() {\n                return {\n                    mandatory: {},\n                    optional: {\n                        //Note: this function used to call 'this.logger.error' but calling 'this' with anything here is invalid\n                        wsServers: function (wsServers) {\n                            var idx, length, url;\n                            /* Allow defining wsServers parameter as:\n                             *  String: \"host\"\n                             *  Array of Strings: [\"host1\", \"host2\"]\n                             *  Array of Objects: [{ws_uri:\"host1\", weight:1}, {ws_uri:\"host2\", weight:0}]\n                             *  Array of Objects and Strings: [{ws_uri:\"host1\"}, \"host2\"]\n                             */\n                            if (typeof wsServers === 'string') {\n                                wsServers = [{ ws_uri: wsServers }];\n                            }\n                            else if (wsServers instanceof Array) {\n                                length = wsServers.length;\n                                for (idx = 0; idx < length; idx++) {\n                                    if (typeof wsServers[idx] === 'string') {\n                                        wsServers[idx] = { ws_uri: wsServers[idx] };\n                                    }\n                                }\n                            }\n                            else {\n                                return;\n                            }\n                            if (wsServers.length === 0) {\n                                return false;\n                            }\n                            length = wsServers.length;\n                            for (idx = 0; idx < length; idx++) {\n                                if (!wsServers[idx].ws_uri) {\n                                    return;\n                                }\n                                if (wsServers[idx].weight && !Number(wsServers[idx].weight)) {\n                                    return;\n                                }\n                                url = SIP.Grammar.parse(wsServers[idx].ws_uri, 'absoluteURI');\n                                if (url === -1) {\n                                    return;\n                                }\n                                else if (['wss', 'ws', 'udp'].indexOf(url.scheme) < 0) {\n                                    return;\n                                }\n                                else {\n                                    wsServers[idx].sip_uri = '<sip:' + url.host + (url.port ? ':' + url.port : '') + ';transport=' + url.scheme.replace(/^wss$/i, 'ws') + ';lr>';\n                                    if (!wsServers[idx].weight) {\n                                        wsServers[idx].weight = 0;\n                                    }\n                                    wsServers[idx].isError = false;\n                                    wsServers[idx].scheme = url.scheme.toUpperCase();\n                                }\n                            }\n                            return wsServers;\n                        },\n                        keepAliveInterval: function (keepAliveInterval) {\n                            var value;\n                            if (SIP.Utils.isDecimal(keepAliveInterval)) {\n                                value = Number(keepAliveInterval);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        keepAliveDebounce: function (keepAliveDebounce) {\n                            var value;\n                            if (SIP.Utils.isDecimal(keepAliveDebounce)) {\n                                value = Number(keepAliveDebounce);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        traceSip: function (traceSip) {\n                            if (typeof traceSip === 'boolean') {\n                                return traceSip;\n                            }\n                        },\n                        connectionTimeout: function (connectionTimeout) {\n                            var value;\n                            if (SIP.Utils.isDecimal(connectionTimeout)) {\n                                value = Number(connectionTimeout);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        maxReconnectionAttempts: function (maxReconnectionAttempts) {\n                            var value;\n                            if (SIP.Utils.isDecimal(maxReconnectionAttempts)) {\n                                value = Number(maxReconnectionAttempts);\n                                if (value >= 0) {\n                                    return value;\n                                }\n                            }\n                        },\n                        reconnectionTimeout: function (reconnectionTimeout) {\n                            var value;\n                            if (SIP.Utils.isDecimal(reconnectionTimeout)) {\n                                value = Number(reconnectionTimeout);\n                                if (value > 0) {\n                                    return value;\n                                }\n                            }\n                        }\n                    }\n                };\n            } }\n    });\n    Transport.C = C;\n    SIP.Web.Transport = Transport;\n    return Transport;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview SessionDescriptionHandler\n */\n/* SessionDescriptionHandler\n * @class PeerConnection helper Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\nmodule.exports = function (SIP) {\n    // Constructor\n    var SessionDescriptionHandler = function (logger, observer, options) {\n        // TODO: Validate the options\n        this.options = options || {};\n        this.logger = logger;\n        this.observer = observer;\n        this.dtmfSender = null;\n        this.shouldAcquireMedia = true;\n        this.CONTENT_TYPE = 'application/sdp';\n        this.C = {};\n        this.C.DIRECTION = {\n            NULL: null,\n            SENDRECV: \"sendrecv\",\n            SENDONLY: \"sendonly\",\n            RECVONLY: \"recvonly\",\n            INACTIVE: \"inactive\"\n        };\n        this.logger.log('SessionDescriptionHandlerOptions: ' + JSON.stringify(this.options));\n        this.direction = this.C.DIRECTION.NULL;\n        this.modifiers = this.options.modifiers || [];\n        if (!Array.isArray(this.modifiers)) {\n            this.modifiers = [this.modifiers];\n        }\n        var environment = global.window || global;\n        this.WebRTC = {\n            MediaStream: environment.MediaStream,\n            getUserMedia: environment.navigator.mediaDevices.getUserMedia.bind(environment.navigator.mediaDevices),\n            RTCPeerConnection: environment.RTCPeerConnection\n        };\n        this.iceGatheringDeferred = null;\n        this.iceGatheringTimeout = false;\n        this.iceGatheringTimer = null;\n        this.initPeerConnection(this.options.peerConnectionOptions);\n        this.constraints = this.checkAndDefaultConstraints(this.options.constraints);\n    };\n    /**\n     * @param {SIP.Session} session\n     * @param {Object} [options]\n     */\n    SessionDescriptionHandler.defaultFactory = function defaultFactory(session, options) {\n        var logger = session.ua.getLogger('sip.invitecontext.sessionDescriptionHandler', session.id);\n        var SessionDescriptionHandlerObserver = __webpack_require__(31);\n        var observer = new SessionDescriptionHandlerObserver(session, options);\n        return new SessionDescriptionHandler(logger, observer, options);\n    };\n    SessionDescriptionHandler.prototype = Object.create(SIP.SessionDescriptionHandler.prototype, {\n        // Functions the sesssion can use\n        /**\n         * Destructor\n         */\n        close: { writable: true, value: function () {\n                this.logger.log('closing PeerConnection');\n                // have to check signalingState since this.close() gets called multiple times\n                if (this.peerConnection && this.peerConnection.signalingState !== 'closed') {\n                    if (this.peerConnection.getSenders) {\n                        this.peerConnection.getSenders().forEach(function (sender) {\n                            if (sender.track) {\n                                sender.track.stop();\n                            }\n                        });\n                    }\n                    else {\n                        this.logger.warn('Using getLocalStreams which is deprecated');\n                        this.peerConnection.getLocalStreams().forEach(function (stream) {\n                            stream.getTracks().forEach(function (track) {\n                                track.stop();\n                            });\n                        });\n                    }\n                    if (this.peerConnection.getReceivers) {\n                        this.peerConnection.getReceivers().forEach(function (receiver) {\n                            if (receiver.track) {\n                                receiver.track.stop();\n                            }\n                        });\n                    }\n                    else {\n                        this.logger.warn('Using getRemoteStreams which is deprecated');\n                        this.peerConnection.getRemoteStreams().forEach(function (stream) {\n                            stream.getTracks().forEach(function (track) {\n                                track.stop();\n                            });\n                        });\n                    }\n                    this.resetIceGatheringComplete();\n                    this.peerConnection.close();\n                }\n            } },\n        /**\n         * Gets the local description from the underlying media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {MediaStreamConstraints} [options.constraints] MediaStreamConstraints https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints\n         * @param {Object} [options.peerConnectionOptions] If this is set it will recreate the peer connection with the new options\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves with the local description to be used for the session\n         */\n        getDescription: { writable: true, value: function (options, modifiers) {\n                options = options || {};\n                if (options.peerConnectionOptions) {\n                    this.initPeerConnection(options.peerConnectionOptions);\n                }\n                // Merge passed constraints with saved constraints and save\n                var newConstraints = Object.assign({}, this.constraints, options.constraints);\n                newConstraints = this.checkAndDefaultConstraints(newConstraints);\n                if (JSON.stringify(newConstraints) !== JSON.stringify(this.constraints)) {\n                    this.constraints = newConstraints;\n                    this.shouldAcquireMedia = true;\n                }\n                modifiers = modifiers || [];\n                if (!Array.isArray(modifiers)) {\n                    modifiers = [modifiers];\n                }\n                modifiers = modifiers.concat(this.modifiers);\n                return SIP.Utils.Promise.resolve()\n                    .then(function () {\n                    if (this.shouldAcquireMedia) {\n                        return this.acquire(this.constraints).then(function () {\n                            this.shouldAcquireMedia = false;\n                        }.bind(this));\n                    }\n                }.bind(this))\n                    .then(function () {\n                    return this.createOfferOrAnswer(options.RTCOfferOptions, modifiers);\n                }.bind(this))\n                    .then(function (description) {\n                    this.emit('getDescription', description);\n                    return {\n                        body: description.sdp,\n                        contentType: this.CONTENT_TYPE\n                    };\n                }.bind(this));\n            } },\n        /**\n         * Check if the Session Description Handler can handle the Content-Type described by a SIP Message\n         * @param {String} contentType The content type that is in the SIP Message\n         * @returns {boolean}\n         */\n        hasDescription: { writable: true, value: function hasDescription(contentType) {\n                return contentType === this.CONTENT_TYPE;\n            } },\n        /**\n         * The modifier that should be used when the session would like to place the call on hold\n         * @param {String} [sdp] The description that will be modified\n         * @returns {Promise} Promise that resolves with modified SDP\n         */\n        holdModifier: { writable: true, value: function holdModifier(description) {\n                if (!(/a=(sendrecv|sendonly|recvonly|inactive)/).test(description.sdp)) {\n                    description.sdp = description.sdp.replace(/(m=[^\\r]*\\r\\n)/g, '$1a=sendonly\\r\\n');\n                }\n                else {\n                    description.sdp = description.sdp.replace(/a=sendrecv\\r\\n/g, 'a=sendonly\\r\\n');\n                    description.sdp = description.sdp.replace(/a=recvonly\\r\\n/g, 'a=inactive\\r\\n');\n                }\n                return SIP.Utils.Promise.resolve(description);\n            } },\n        /**\n         * Set the remote description to the underlying media implementation\n         * @param {String} sessionDescription The description provided by a SIP message to be set on the media implementation\n         * @param {Object} [options] Options object to be used by getDescription\n         * @param {MediaStreamConstraints} [options.constraints] MediaStreamConstraints https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints\n         * @param {Object} [options.peerConnectionOptions] If this is set it will recreate the peer connection with the new options\n         * @param {Array} [modifiers] Array with one time use description modifiers\n         * @returns {Promise} Promise that resolves once the description is set\n         */\n        setDescription: { writable: true, value: function setDescription(sessionDescription, options, modifiers) {\n                var _this = this;\n                var self = this;\n                options = options || {};\n                if (options.peerConnectionOptions) {\n                    this.initPeerConnection(options.peerConnectionOptions);\n                }\n                modifiers = modifiers || [];\n                if (!Array.isArray(modifiers)) {\n                    modifiers = [modifiers];\n                }\n                modifiers = modifiers.concat(this.modifiers);\n                var description = {\n                    type: this.hasOffer('local') ? 'answer' : 'offer',\n                    sdp: sessionDescription\n                };\n                return SIP.Utils.Promise.resolve()\n                    .then(function () {\n                    // Media should be acquired in getDescription unless we need to do it sooner for some reason (FF61+)\n                    if (this.shouldAcquireMedia && this.options.alwaysAcquireMediaFirst) {\n                        return this.acquire(this.constraints).then(function () {\n                            this.shouldAcquireMedia = false;\n                        }.bind(this));\n                    }\n                }.bind(this))\n                    .then(function () {\n                    return SIP.Utils.reducePromises(modifiers, description);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"setDescription\", e, \"The modifiers did not resolve successfully\");\n                    _this.logger.error(error.message);\n                    self.emit('peerConnection-setRemoteDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function (modifiedDescription) {\n                    self.emit('setDescription', modifiedDescription);\n                    return self.peerConnection.setRemoteDescription(modifiedDescription);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    // Check the original SDP for video, and ensure that we have want to do audio fallback\n                    if ((/^m=video.+$/gm).test(sessionDescription) && !options.disableAudioFallback) {\n                        // Do not try to audio fallback again\n                        options.disableAudioFallback = true;\n                        // Remove video first, then do the other modifiers\n                        return _this.setDescription(sessionDescription, options, [SIP.Web.Modifiers.stripVideo].concat(modifiers));\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"setDescription\", e);\n                    _this.logger.error(error.error);\n                    _this.emit('peerConnection-setRemoteDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function setRemoteDescriptionSuccess() {\n                    if (self.peerConnection.getReceivers) {\n                        self.emit('setRemoteDescription', self.peerConnection.getReceivers());\n                    }\n                    else {\n                        self.emit('setRemoteDescription', self.peerConnection.getRemoteStreams());\n                    }\n                    self.emit('confirmed', self);\n                });\n            } },\n        /**\n         * Send DTMF via RTP (RFC 4733)\n         * @param {String} tones A string containing DTMF digits\n         * @param {Object} [options] Options object to be used by sendDtmf\n         * @returns {boolean} true if DTMF send is successful, false otherwise\n         */\n        sendDtmf: { writable: true, value: function sendDtmf(tones, options) {\n                if (!this.dtmfSender && this.hasBrowserGetSenderSupport()) {\n                    var senders = this.peerConnection.getSenders();\n                    if (senders.length > 0) {\n                        this.dtmfSender = senders[0].dtmf;\n                    }\n                }\n                if (!this.dtmfSender && this.hasBrowserTrackSupport()) {\n                    var streams = this.peerConnection.getLocalStreams();\n                    if (streams.length > 0) {\n                        var audioTracks = streams[0].getAudioTracks();\n                        if (audioTracks.length > 0) {\n                            this.dtmfSender = this.peerConnection.createDTMFSender(audioTracks[0]);\n                        }\n                    }\n                }\n                if (!this.dtmfSender) {\n                    return false;\n                }\n                try {\n                    this.dtmfSender.insertDTMF(tones, options.duration, options.interToneGap);\n                }\n                catch (e) {\n                    if (e.type === \"InvalidStateError\" || e.type === \"InvalidCharacterError\") {\n                        this.logger.error(e);\n                        return false;\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n                this.logger.log('DTMF sent via RTP: ' + tones.toString());\n                return true;\n            } },\n        getDirection: { writable: true, value: function getDirection() {\n                return this.direction;\n            } },\n        // Internal functions\n        createOfferOrAnswer: { writable: true, value: function createOfferOrAnswer(RTCOfferOptions, modifiers) {\n                var _this = this;\n                var self = this;\n                var methodName;\n                var pc = this.peerConnection;\n                RTCOfferOptions = RTCOfferOptions || {};\n                methodName = self.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n                return pc[methodName](RTCOfferOptions)\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e, 'peerConnection-' + methodName + 'Failed');\n                    _this.emit('peerConnection-' + methodName + 'Failed', error);\n                    throw error;\n                })\n                    .then(function (sdp) {\n                    return SIP.Utils.reducePromises(modifiers, self.createRTCSessionDescriptionInit(sdp));\n                })\n                    .then(function (sdp) {\n                    self.resetIceGatheringComplete();\n                    return pc.setLocalDescription(sdp);\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e, 'peerConnection-SetLocalDescriptionFailed');\n                    _this.emit('peerConnection-SetLocalDescriptionFailed', error);\n                    throw error;\n                })\n                    .then(function onSetLocalDescriptionSuccess() {\n                    return self.waitForIceGatheringComplete();\n                })\n                    .then(function readySuccess() {\n                    var localDescription = self.createRTCSessionDescriptionInit(self.peerConnection.localDescription);\n                    return SIP.Utils.reducePromises(modifiers, localDescription);\n                })\n                    .then(function (localDescription) {\n                    self.setDirection(localDescription.sdp);\n                    return localDescription;\n                })\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"createOfferOrAnswer\", e);\n                    _this.logger.error(error);\n                    throw error;\n                });\n            } },\n        // Creates an RTCSessionDescriptionInit from an RTCSessionDescription\n        createRTCSessionDescriptionInit: { writable: true, value: function createRTCSessionDescriptionInit(RTCSessionDescription) {\n                return {\n                    type: RTCSessionDescription.type,\n                    sdp: RTCSessionDescription.sdp\n                };\n            } },\n        addDefaultIceCheckingTimeout: { writable: true, value: function addDefaultIceCheckingTimeout(peerConnectionOptions) {\n                if (peerConnectionOptions.iceCheckingTimeout === undefined) {\n                    peerConnectionOptions.iceCheckingTimeout = 5000;\n                }\n                return peerConnectionOptions;\n            } },\n        addDefaultIceServers: { writable: true, value: function addDefaultIceServers(rtcConfiguration) {\n                if (!rtcConfiguration.iceServers) {\n                    rtcConfiguration.iceServers = [{ urls: 'stun:stun.l.google.com:19302' }];\n                }\n                return rtcConfiguration;\n            } },\n        checkAndDefaultConstraints: { writable: true, value: function checkAndDefaultConstraints(constraints) {\n                var defaultConstraints = { audio: true, video: !this.options.alwaysAcquireMediaFirst };\n                constraints = constraints || defaultConstraints;\n                // Empty object check\n                if (Object.keys(constraints).length === 0 && constraints.constructor === Object) {\n                    return defaultConstraints;\n                }\n                return constraints;\n            } },\n        hasBrowserTrackSupport: { writable: true, value: function hasBrowserTrackSupport() {\n                return Boolean(this.peerConnection.addTrack);\n            } },\n        hasBrowserGetSenderSupport: { writable: true, value: function hasBrowserGetSenderSupport() {\n                return Boolean(this.peerConnection.getSenders);\n            } },\n        initPeerConnection: { writable: true, value: function initPeerConnection(options) {\n                var self = this;\n                options = options || {};\n                options = this.addDefaultIceCheckingTimeout(options);\n                options.rtcConfiguration = options.rtcConfiguration || {};\n                options.rtcConfiguration = this.addDefaultIceServers(options.rtcConfiguration);\n                this.logger.log('initPeerConnection');\n                if (this.peerConnection) {\n                    this.logger.log('Already have a peer connection for this session. Tearing down.');\n                    this.resetIceGatheringComplete();\n                    this.peerConnection.close();\n                }\n                this.peerConnection = new this.WebRTC.RTCPeerConnection(options.rtcConfiguration);\n                this.logger.log('New peer connection created');\n                if ('ontrack' in this.peerConnection) {\n                    this.peerConnection.addEventListener('track', function (e) {\n                        self.logger.log('track added');\n                        self.observer.trackAdded();\n                        self.emit('addTrack', e);\n                    });\n                }\n                else {\n                    this.logger.warn('Using onaddstream which is deprecated');\n                    this.peerConnection.onaddstream = function (e) {\n                        self.logger.log('stream added');\n                        self.emit('addStream', e);\n                    };\n                }\n                this.peerConnection.onicecandidate = function (e) {\n                    self.emit('iceCandidate', e);\n                    if (e.candidate) {\n                        self.logger.log('ICE candidate received: ' + (e.candidate.candidate === null ? null : e.candidate.candidate.trim()));\n                    }\n                    else if (e.candidate === null) {\n                        // indicates the end of candidate gathering\n                        self.logger.log('ICE candidate gathering complete');\n                        self.triggerIceGatheringComplete();\n                    }\n                };\n                this.peerConnection.onicegatheringstatechange = function () {\n                    self.logger.log('RTCIceGatheringState changed: ' + this.iceGatheringState);\n                    switch (this.iceGatheringState) {\n                        case 'gathering':\n                            self.emit('iceGathering', this);\n                            if (!self.iceGatheringTimer && options.iceCheckingTimeout) {\n                                self.iceGatheringTimeout = false;\n                                self.iceGatheringTimer = SIP.Timers.setTimeout(function () {\n                                    self.logger.log('RTCIceChecking Timeout Triggered after ' + options.iceCheckingTimeout + ' milliseconds');\n                                    self.iceGatheringTimeout = true;\n                                    self.triggerIceGatheringComplete();\n                                }, options.iceCheckingTimeout);\n                            }\n                            break;\n                        case 'complete':\n                            self.triggerIceGatheringComplete();\n                            break;\n                    }\n                };\n                this.peerConnection.oniceconnectionstatechange = function () {\n                    var stateEvent;\n                    switch (this.iceConnectionState) {\n                        case 'new':\n                            stateEvent = 'iceConnection';\n                            break;\n                        case 'checking':\n                            stateEvent = 'iceConnectionChecking';\n                            break;\n                        case 'connected':\n                            stateEvent = 'iceConnectionConnected';\n                            break;\n                        case 'completed':\n                            stateEvent = 'iceConnectionCompleted';\n                            break;\n                        case 'failed':\n                            stateEvent = 'iceConnectionFailed';\n                            break;\n                        case 'disconnected':\n                            stateEvent = 'iceConnectionDisconnected';\n                            break;\n                        case 'closed':\n                            stateEvent = 'iceConnectionClosed';\n                            break;\n                        default:\n                            self.logger.warn('Unknown iceConnection state:', this.iceConnectionState);\n                            return;\n                    }\n                    self.emit(stateEvent, this);\n                };\n            } },\n        acquire: { writable: true, value: function acquire(constraints) {\n                var _this = this;\n                // Default audio & video to true\n                constraints = this.checkAndDefaultConstraints(constraints);\n                return new SIP.Utils.Promise(function (resolve, reject) {\n                    /*\n                     * Make the call asynchronous, so that ICCs have a chance\n                     * to define callbacks to `userMediaRequest`\n                     */\n                    this.logger.log('acquiring local media');\n                    this.emit('userMediaRequest', constraints);\n                    if (constraints.audio || constraints.video) {\n                        this.WebRTC.getUserMedia(constraints)\n                            .then(function (streams) {\n                            this.observer.trackAdded();\n                            this.emit('userMedia', streams);\n                            resolve(streams);\n                        }.bind(this)).catch(function (e) {\n                            this.emit('userMediaFailed', e);\n                            reject(e);\n                        }.bind(this));\n                    }\n                    else {\n                        // Local streams were explicitly excluded.\n                        resolve([]);\n                    }\n                }.bind(this))\n                    .catch(function (e) {\n                    // TODO: This propogates downwards\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"unable to acquire streams\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                })\n                    .then(function acquireSucceeded(streams) {\n                    this.logger.log('acquired local media streams');\n                    try {\n                        // Remove old tracks\n                        if (this.peerConnection.removeTrack) {\n                            this.peerConnection.getSenders().forEach(function (sender) {\n                                this.peerConnection.removeTrack(sender);\n                            }, this);\n                        }\n                        return streams;\n                    }\n                    catch (e) {\n                        return SIP.Utils.Promise.reject(e);\n                    }\n                }.bind(this))\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"error removing streams\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                })\n                    .then(function addStreams(streams) {\n                    try {\n                        streams = [].concat(streams);\n                        streams.forEach(function (stream) {\n                            if (this.peerConnection.addTrack) {\n                                stream.getTracks().forEach(function (track) {\n                                    this.peerConnection.addTrack(track, stream);\n                                }, this);\n                            }\n                            else {\n                                // Chrome 59 does not support addTrack\n                                this.peerConnection.addStream(stream);\n                            }\n                        }, this);\n                    }\n                    catch (e) {\n                        return SIP.Utils.Promise.reject(e);\n                    }\n                    return SIP.Utils.Promise.resolve();\n                }.bind(this))\n                    .catch(function (e) {\n                    if (e instanceof SIP.Exceptions.SessionDescriptionHandlerError) {\n                        throw e;\n                    }\n                    var error = new SIP.Exceptions.SessionDescriptionHandlerError(\"acquire\", e, \"error adding stream\");\n                    _this.logger.error(error.message);\n                    _this.logger.error(error.error);\n                    throw error;\n                });\n            } },\n        hasOffer: { writable: true, value: function hasOffer(where) {\n                var offerState = 'have-' + where + '-offer';\n                return this.peerConnection.signalingState === offerState;\n            } },\n        // ICE gathering state handling\n        isIceGatheringComplete: { writable: true, value: function isIceGatheringComplete() {\n                return this.peerConnection.iceGatheringState === 'complete' || this.iceGatheringTimeout;\n            } },\n        resetIceGatheringComplete: { writable: true, value: function resetIceGatheringComplete() {\n                this.iceGatheringTimeout = false;\n                if (this.iceGatheringTimer) {\n                    SIP.Timers.clearTimeout(this.iceGatheringTimer);\n                    this.iceGatheringTimer = null;\n                }\n                if (this.iceGatheringDeferred) {\n                    this.iceGatheringDeferred.reject();\n                    this.iceGatheringDeferred = null;\n                }\n            } },\n        setDirection: { writable: true, value: function setDirection(sdp) {\n                var match = sdp.match(/a=(sendrecv|sendonly|recvonly|inactive)/);\n                if (match === null) {\n                    this.direction = this.C.DIRECTION.NULL;\n                    this.observer.directionChanged();\n                    return;\n                }\n                var direction = match[1];\n                switch (direction) {\n                    case this.C.DIRECTION.SENDRECV:\n                    case this.C.DIRECTION.SENDONLY:\n                    case this.C.DIRECTION.RECVONLY:\n                    case this.C.DIRECTION.INACTIVE:\n                        this.direction = direction;\n                        break;\n                    default:\n                        this.direction = this.C.DIRECTION.NULL;\n                        break;\n                }\n                this.observer.directionChanged();\n            } },\n        triggerIceGatheringComplete: { writable: true, value: function triggerIceGatheringComplete() {\n                if (this.isIceGatheringComplete()) {\n                    this.emit('iceGatheringComplete', this);\n                    if (this.iceGatheringTimer) {\n                        SIP.Timers.clearTimeout(this.iceGatheringTimer);\n                        this.iceGatheringTimer = null;\n                    }\n                    if (this.iceGatheringDeferred) {\n                        this.iceGatheringDeferred.resolve();\n                        this.iceGatheringDeferred = null;\n                    }\n                }\n            } },\n        waitForIceGatheringComplete: { writable: true, value: function waitForIceGatheringComplete() {\n                if (this.isIceGatheringComplete()) {\n                    return SIP.Utils.Promise.resolve();\n                }\n                else if (!this.isIceGatheringDeferred) {\n                    this.iceGatheringDeferred = SIP.Utils.defer();\n                }\n                return this.iceGatheringDeferred.promise;\n            } }\n    });\n    return SessionDescriptionHandler;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview SessionDescriptionHandlerObserver\n */\n/* SessionDescriptionHandlerObserver\n * @class SessionDescriptionHandler Observer Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n */\n// Constructor\nvar SessionDescriptionHandlerObserver = function (session, options) {\n    this.session = session || {};\n    this.options = options || {};\n};\nSessionDescriptionHandlerObserver.prototype = {\n    trackAdded: function () {\n        this.session.emit('trackAdded');\n    },\n    directionChanged: function () {\n        this.session.emit('directionChanged');\n    },\n};\nmodule.exports = SessionDescriptionHandlerObserver;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * @fileoverview Incoming SIP Message Sanity Check\n */\n/**\n * SIP message sanity check.\n * @augments SIP\n * @function\n * @param {SIP.IncomingMessage} message\n * @param {SIP.UA} ua\n * @param {SIP.Transport} transport\n * @returns {Boolean}\n */\nmodule.exports = function (SIP) {\n    var sanityCheck, requests = [], responses = [], all = [];\n    // Reply\n    function reply(status_code, message, transport) {\n        var to, response = SIP.Utils.buildStatusLine(status_code), vias = message.getHeaders('via'), length = vias.length, idx = 0;\n        for (idx; idx < length; idx++) {\n            response += \"Via: \" + vias[idx] + \"\\r\\n\";\n        }\n        to = message.getHeader('To');\n        if (!message.to_tag) {\n            to += ';tag=' + SIP.Utils.newTag();\n        }\n        response += \"To: \" + to + \"\\r\\n\";\n        response += \"From: \" + message.getHeader('From') + \"\\r\\n\";\n        response += \"Call-ID: \" + message.call_id + \"\\r\\n\";\n        response += \"CSeq: \" + message.cseq + \" \" + message.method + \"\\r\\n\";\n        response += \"\\r\\n\";\n        transport.send(response);\n    }\n    /*\n     * Sanity Check for incoming Messages\n     *\n     * Requests:\n     *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n     *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n     *   Does not look at via sent-by but at sipjsId, which is inserted as\n     *   a prefix in all initial requests generated by the ua\n     *  - _rfc3261_18_3_request_ Body Content-Length\n     *  - _rfc3261_8_2_2_2_ Merged Requests\n     *\n     * Responses:\n     *  - _rfc3261_8_1_3_3_ Multiple Via headers\n     *  - _rfc3261_18_1_2_ sent-by mismatch\n     *  - _rfc3261_18_3_response_ Body Content-Length\n     *\n     * All:\n     *  - Minimum headers in a SIP message\n     */\n    // Sanity Check functions for requests\n    function rfc3261_8_2_2_1(message, ua, transport) {\n        if (!message.ruri || message.ruri.scheme !== 'sip') {\n            reply(416, message, transport);\n            return false;\n        }\n    }\n    function rfc3261_16_3_4(message, ua, transport) {\n        if (!message.to_tag) {\n            if (message.call_id.substr(0, 5) === ua.configuration.sipjsId) {\n                reply(482, message, transport);\n                return false;\n            }\n        }\n    }\n    function rfc3261_18_3_request(message, ua, transport) {\n        var len = SIP.Utils.str_utf8_length(message.body), contentLength = message.getHeader('content-length');\n        if (len < contentLength) {\n            reply(400, message, transport);\n            return false;\n        }\n    }\n    function rfc3261_8_2_2_2(message, ua, transport) {\n        var tr, idx, fromTag = message.from_tag, call_id = message.call_id, cseq = message.cseq;\n        if (!message.to_tag) {\n            if (message.method === SIP.C.INVITE) {\n                tr = ua.transactions.ist[message.via_branch];\n                if (tr) {\n                    return;\n                }\n                else {\n                    for (idx in ua.transactions.ist) {\n                        tr = ua.transactions.ist[idx];\n                        if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                            reply(482, message, transport);\n                            return false;\n                        }\n                    }\n                }\n            }\n            else {\n                tr = ua.transactions.nist[message.via_branch];\n                if (tr) {\n                    return;\n                }\n                else {\n                    for (idx in ua.transactions.nist) {\n                        tr = ua.transactions.nist[idx];\n                        if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                            reply(482, message, transport);\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    // Sanity Check functions for responses\n    function rfc3261_8_1_3_3(message, ua) {\n        if (message.getHeaders('via').length > 1) {\n            ua.getLogger('sip.sanitycheck').warn('More than one Via header field present in the response. Dropping the response');\n            return false;\n        }\n    }\n    function rfc3261_18_1_2(message, ua) {\n        var viaHost = ua.configuration.viaHost;\n        if (message.via.host !== viaHost || message.via.port !== undefined) {\n            ua.getLogger('sip.sanitycheck').warn('Via sent-by in the response does not match UA Via host value. Dropping the response');\n            return false;\n        }\n    }\n    function rfc3261_18_3_response(message, ua) {\n        var len = SIP.Utils.str_utf8_length(message.body), contentLength = message.getHeader('content-length');\n        if (len < contentLength) {\n            ua.getLogger('sip.sanitycheck').warn('Message body length is lower than the value in Content-Length header field. Dropping the response');\n            return false;\n        }\n    }\n    // Sanity Check functions for requests and responses\n    function minimumHeaders(message, ua) {\n        var mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'], idx = mandatoryHeaders.length;\n        while (idx--) {\n            if (!message.hasHeader(mandatoryHeaders[idx])) {\n                ua.getLogger('sip.sanitycheck').warn('Missing mandatory header field : ' + mandatoryHeaders[idx] + '. Dropping the response');\n                return false;\n            }\n        }\n    }\n    requests.push(rfc3261_8_2_2_1);\n    requests.push(rfc3261_16_3_4);\n    requests.push(rfc3261_18_3_request);\n    requests.push(rfc3261_8_2_2_2);\n    responses.push(rfc3261_8_1_3_3);\n    responses.push(rfc3261_18_1_2);\n    responses.push(rfc3261_18_3_response);\n    all.push(minimumHeaders);\n    sanityCheck = function (message, ua, transport) {\n        var len, pass;\n        len = all.length;\n        while (len--) {\n            pass = all[len](message, ua, transport);\n            if (pass === false) {\n                return false;\n            }\n        }\n        if (message instanceof SIP.IncomingRequest) {\n            len = requests.length;\n            while (len--) {\n                pass = requests[len](message, ua, transport);\n                if (pass === false) {\n                    return false;\n                }\n            }\n        }\n        else if (message instanceof SIP.IncomingResponse) {\n            len = responses.length;\n            while (len--) {\n                pass = responses[len](message, ua, transport);\n                if (pass === false) {\n                    return false;\n                }\n            }\n        }\n        //Everything is OK\n        return true;\n    };\n    SIP.sanityCheck = sanityCheck;\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar md5 = __webpack_require__(34);\n/**\n * @fileoverview SIP Digest Authentication\n */\n/**\n * SIP Digest Authentication.\n * @augments SIP.\n * @function Digest Authentication\n * @param {SIP.UA} ua\n */\nmodule.exports = function (Utils) {\n    var DigestAuthentication;\n    DigestAuthentication = function (ua) {\n        this.logger = ua.getLogger('sipjs.digestauthentication');\n        this.username = ua.configuration.authorizationUser;\n        this.password = ua.configuration.password;\n        this.cnonce = null;\n        this.nc = 0;\n        this.ncHex = '00000000';\n        this.response = null;\n    };\n    /**\n    * Performs Digest authentication given a SIP request and the challenge\n    * received in a response to that request.\n    * Returns true if credentials were successfully generated, false otherwise.\n    *\n    * @param {SIP.OutgoingRequest} request\n    * @param {Object} challenge\n    */\n    DigestAuthentication.prototype.authenticate = function (request, challenge) {\n        // Inspect and validate the challenge.\n        this.algorithm = challenge.algorithm;\n        this.realm = challenge.realm;\n        this.nonce = challenge.nonce;\n        this.opaque = challenge.opaque;\n        this.stale = challenge.stale;\n        if (this.algorithm) {\n            if (this.algorithm !== 'MD5') {\n                this.logger.warn('challenge with Digest algorithm different than \"MD5\", authentication aborted');\n                return false;\n            }\n        }\n        else {\n            this.algorithm = 'MD5';\n        }\n        if (!this.realm) {\n            this.logger.warn('challenge without Digest realm, authentication aborted');\n            return false;\n        }\n        if (!this.nonce) {\n            this.logger.warn('challenge without Digest nonce, authentication aborted');\n            return false;\n        }\n        // 'qop' can contain a list of values (Array). Let's choose just one.\n        if (challenge.qop) {\n            if (challenge.qop.indexOf('auth') > -1) {\n                this.qop = 'auth';\n            }\n            else if (challenge.qop.indexOf('auth-int') > -1) {\n                this.qop = 'auth-int';\n            }\n            else {\n                // Otherwise 'qop' is present but does not contain 'auth' or 'auth-int', so abort here.\n                this.logger.warn('challenge without Digest qop different than \"auth\" or \"auth-int\", authentication aborted');\n                return false;\n            }\n        }\n        else {\n            this.qop = null;\n        }\n        // Fill other attributes.\n        this.method = request.method;\n        this.uri = request.ruri;\n        this.cnonce = Utils.createRandomToken(12);\n        this.nc += 1;\n        this.updateNcHex();\n        // nc-value = 8LHEX. Max value = 'FFFFFFFF'.\n        if (this.nc === 4294967296) {\n            this.nc = 1;\n            this.ncHex = '00000001';\n        }\n        // Calculate the Digest \"response\" value.\n        this.calculateResponse();\n        return true;\n    };\n    /**\n    * Generate Digest 'response' value.\n    * @private\n    */\n    DigestAuthentication.prototype.calculateResponse = function () {\n        var ha1, ha2;\n        // HA1 = MD5(A1) = MD5(username:realm:password)\n        ha1 = md5(this.username + \":\" + this.realm + \":\" + this.password);\n        if (this.qop === 'auth') {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = md5(this.method + \":\" + this.uri);\n            // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth:\" + ha2);\n        }\n        else if (this.qop === 'auth-int') {\n            // HA2 = MD5(A2) = MD5(method:digestURI:MD5(entityBody))\n            ha2 = md5(this.method + \":\" + this.uri + \":\" + md5(this.body ? this.body : \"\"));\n            // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth-int:\" + ha2);\n        }\n        else if (this.qop === null) {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = md5(this.method + \":\" + this.uri);\n            // response = MD5(HA1:nonce:HA2)\n            this.response = md5(ha1 + \":\" + this.nonce + \":\" + ha2);\n        }\n    };\n    /**\n    * Return the Proxy-Authorization or WWW-Authorization header value.\n    */\n    DigestAuthentication.prototype.toString = function () {\n        var auth_params = [];\n        if (!this.response) {\n            throw new Error('response field does not exist, cannot generate Authorization header');\n        }\n        auth_params.push('algorithm=' + this.algorithm);\n        auth_params.push('username=\"' + this.username + '\"');\n        auth_params.push('realm=\"' + this.realm + '\"');\n        auth_params.push('nonce=\"' + this.nonce + '\"');\n        auth_params.push('uri=\"' + this.uri + '\"');\n        auth_params.push('response=\"' + this.response + '\"');\n        if (this.opaque) {\n            auth_params.push('opaque=\"' + this.opaque + '\"');\n        }\n        if (this.qop) {\n            auth_params.push('qop=' + this.qop);\n            auth_params.push('cnonce=\"' + this.cnonce + '\"');\n            auth_params.push('nc=' + this.ncHex);\n        }\n        return 'Digest ' + auth_params.join(', ');\n    };\n    /**\n    * Generate the 'nc' value as required by Digest in this.ncHex by reading this.nc.\n    * @private\n    */\n    DigestAuthentication.prototype.updateNcHex = function () {\n        var hex = Number(this.nc).toString(16);\n        this.ncHex = '00000000'.substr(0, 8 - hex.length) + hex;\n    };\n    return DigestAuthentication;\n};\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(35));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse {}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar Grammar = __webpack_require__(37);\nmodule.exports = function (SIP) {\n    return {\n        parse: function parseCustom(input, startRule) {\n            var options = { startRule: startRule, SIP: SIP };\n            try {\n                Grammar.parse(input, options);\n            }\n            catch (e) {\n                options.data = -1;\n            }\n            return options.data;\n        }\n    };\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleIndices = { Contact: 119, Name_Addr_Header: 156, Record_Route: 176, Request_Response: 81, SIP_URI: 45, Subscription_State: 186, Supported: 191, Require: 182, Via: 194, absoluteURI: 84, Call_ID: 118, Content_Disposition: 130, Content_Length: 135, Content_Type: 136, CSeq: 146, displayName: 122, Event: 149, From: 151, host: 52, Max_Forwards: 154, Min_SE: 213, Proxy_Authenticate: 157, quoted_string: 40, Refer_To: 178, Replaces: 179, Session_Expires: 210, stun_URI: 217, To: 192, turn_URI: 223, uuid: 226, WWW_Authenticate: 209, challenge: 158, sipfrag: 230, Referred_By: 231 },\n      peg$startRuleIndex   = 119,\n\n      peg$consts = [\n        \"\\r\\n\",\n        peg$literalExpectation(\"\\r\\n\", false),\n        /^[0-9]/,\n        peg$classExpectation([[\"0\", \"9\"]], false, false),\n        /^[a-zA-Z]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\n        /^[0-9a-fA-F]/,\n        peg$classExpectation([[\"0\", \"9\"], [\"a\", \"f\"], [\"A\", \"F\"]], false, false),\n        /^[\\0-\\xFF]/,\n        peg$classExpectation([[\"\\0\", \"\\xFF\"]], false, false),\n        /^[\"]/,\n        peg$classExpectation([\"\\\"\"], false, false),\n        \" \",\n        peg$literalExpectation(\" \", false),\n        \"\\t\",\n        peg$literalExpectation(\"\\t\", false),\n        /^[a-zA-Z0-9]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"]], false, false),\n        \";\",\n        peg$literalExpectation(\";\", false),\n        \"/\",\n        peg$literalExpectation(\"/\", false),\n        \"?\",\n        peg$literalExpectation(\"?\", false),\n        \":\",\n        peg$literalExpectation(\":\", false),\n        \"@\",\n        peg$literalExpectation(\"@\", false),\n        \"&\",\n        peg$literalExpectation(\"&\", false),\n        \"=\",\n        peg$literalExpectation(\"=\", false),\n        \"+\",\n        peg$literalExpectation(\"+\", false),\n        \"$\",\n        peg$literalExpectation(\"$\", false),\n        \",\",\n        peg$literalExpectation(\",\", false),\n        \"-\",\n        peg$literalExpectation(\"-\", false),\n        \"_\",\n        peg$literalExpectation(\"_\", false),\n        \".\",\n        peg$literalExpectation(\".\", false),\n        \"!\",\n        peg$literalExpectation(\"!\", false),\n        \"~\",\n        peg$literalExpectation(\"~\", false),\n        \"*\",\n        peg$literalExpectation(\"*\", false),\n        \"'\",\n        peg$literalExpectation(\"'\", false),\n        \"(\",\n        peg$literalExpectation(\"(\", false),\n        \")\",\n        peg$literalExpectation(\")\", false),\n        \"%\",\n        peg$literalExpectation(\"%\", false),\n        function() {return \" \"; },\n        function() {return ':'; },\n        /^[!-~]/,\n        peg$classExpectation([[\"!\", \"~\"]], false, false),\n        /^[\\x80-\\uFFFF]/,\n        peg$classExpectation([[\"\\x80\", \"\\uFFFF\"]], false, false),\n        /^[\\x80-\\xBF]/,\n        peg$classExpectation([[\"\\x80\", \"\\xBF\"]], false, false),\n        /^[a-f]/,\n        peg$classExpectation([[\"a\", \"f\"]], false, false),\n        \"`\",\n        peg$literalExpectation(\"`\", false),\n        \"<\",\n        peg$literalExpectation(\"<\", false),\n        \">\",\n        peg$literalExpectation(\">\", false),\n        \"\\\\\",\n        peg$literalExpectation(\"\\\\\", false),\n        \"[\",\n        peg$literalExpectation(\"[\", false),\n        \"]\",\n        peg$literalExpectation(\"]\", false),\n        \"{\",\n        peg$literalExpectation(\"{\", false),\n        \"}\",\n        peg$literalExpectation(\"}\", false),\n        function() {return \"*\"; },\n        function() {return \"/\"; },\n        function() {return \"=\"; },\n        function() {return \"(\"; },\n        function() {return \")\"; },\n        function() {return \">\"; },\n        function() {return \"<\"; },\n        function() {return \",\"; },\n        function() {return \";\"; },\n        function() {return \":\"; },\n        function() {return \"\\\"\"; },\n        /^[!-']/,\n        peg$classExpectation([[\"!\", \"'\"]], false, false),\n        /^[*-[]/,\n        peg$classExpectation([[\"*\", \"[\"]], false, false),\n        /^[\\]-~]/,\n        peg$classExpectation([[\"]\", \"~\"]], false, false),\n        function(contents) {\n                                return contents; },\n        /^[#-[]/,\n        peg$classExpectation([[\"#\", \"[\"]], false, false),\n        /^[\\0-\\t]/,\n        peg$classExpectation([[\"\\0\", \"\\t\"]], false, false),\n        /^[\\x0B-\\f]/,\n        peg$classExpectation([[\"\\x0B\", \"\\f\"]], false, false),\n        /^[\\x0E-\\x7F]/,\n        peg$classExpectation([[\"\\x0E\", \"\\x7F\"]], false, false),\n        function() {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                              },\n        function() {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                                delete options.data.uri_params;\n\n                                if (options.startRule === 'SIP_URI') { options.data = options.data.uri;}\n                              },\n        \"sips\",\n        peg$literalExpectation(\"sips\", true),\n        \"sip\",\n        peg$literalExpectation(\"sip\", true),\n        function(uri_scheme) {\n                            options.data.scheme = uri_scheme; },\n        function() {\n                            options.data.user = decodeURIComponent(text().slice(0, -1));},\n        function() {\n                            options.data.password = text(); },\n        function() {\n                            options.data.host = text();\n                            return options.data.host; },\n        function() {\n                          options.data.host_type = 'domain';\n                          return text(); },\n        /^[a-zA-Z0-9_\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\", \"-\"], false, false),\n        /^[a-zA-Z0-9\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"-\"], false, false),\n        function() {\n                            options.data.host_type = 'IPv6';\n                            return text(); },\n        \"::\",\n        peg$literalExpectation(\"::\", false),\n        function() {\n                          options.data.host_type = 'IPv6';\n                          return text(); },\n        function() {\n                            options.data.host_type = 'IPv4';\n                            return text(); },\n        \"25\",\n        peg$literalExpectation(\"25\", false),\n        /^[0-5]/,\n        peg$classExpectation([[\"0\", \"5\"]], false, false),\n        \"2\",\n        peg$literalExpectation(\"2\", false),\n        /^[0-4]/,\n        peg$classExpectation([[\"0\", \"4\"]], false, false),\n        \"1\",\n        peg$literalExpectation(\"1\", false),\n        /^[1-9]/,\n        peg$classExpectation([[\"1\", \"9\"]], false, false),\n        function(port) {\n                            port = parseInt(port.join(''));\n                            options.data.port = port;\n                            return port; },\n        \"transport=\",\n        peg$literalExpectation(\"transport=\", true),\n        \"udp\",\n        peg$literalExpectation(\"udp\", true),\n        \"tcp\",\n        peg$literalExpectation(\"tcp\", true),\n        \"sctp\",\n        peg$literalExpectation(\"sctp\", true),\n        \"tls\",\n        peg$literalExpectation(\"tls\", true),\n        function(transport) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['transport'] = transport.toLowerCase(); },\n        \"user=\",\n        peg$literalExpectation(\"user=\", true),\n        \"phone\",\n        peg$literalExpectation(\"phone\", true),\n        \"ip\",\n        peg$literalExpectation(\"ip\", true),\n        function(user) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['user'] = user.toLowerCase(); },\n        \"method=\",\n        peg$literalExpectation(\"method=\", true),\n        function(method) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['method'] = method; },\n        \"ttl=\",\n        peg$literalExpectation(\"ttl=\", true),\n        function(ttl) {\n                              if(!options.data.params) options.data.params={};\n                              options.data.params['ttl'] = ttl; },\n        \"maddr=\",\n        peg$literalExpectation(\"maddr=\", true),\n        function(maddr) {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['maddr'] = maddr; },\n        \"lr\",\n        peg$literalExpectation(\"lr\", true),\n        function() {\n                              if(!options.data.uri_params) options.data.uri_params={};\n                              options.data.uri_params['lr'] = undefined; },\n        function(param, value) {\n                              if(!options.data.uri_params) options.data.uri_params = {};\n                              if (value === null){\n                                value = undefined;\n                              }\n                              else {\n                                value = value[1];\n                              }\n                              options.data.uri_params[param.toLowerCase()] = value;},\n        function(hname, hvalue) {\n                              hname = hname.join('').toLowerCase();\n                              hvalue = hvalue.join('');\n                              if(!options.data.uri_headers) options.data.uri_headers = {};\n                              if (!options.data.uri_headers[hname]) {\n                                options.data.uri_headers[hname] = [hvalue];\n                              } else {\n                                options.data.uri_headers[hname].push(hvalue);\n                              }},\n        function() {\n                              // lots of tests fail if this isn't guarded...\n                              if (options.startRule === 'Refer_To') {\n                                options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                delete options.data.scheme;\n                                delete options.data.user;\n                                delete options.data.host;\n                                delete options.data.host_type;\n                                delete options.data.port;\n                                delete options.data.uri_params;\n                              }\n                            },\n        \"//\",\n        peg$literalExpectation(\"//\", false),\n        function() {\n                            options.data.scheme= text(); },\n        peg$literalExpectation(\"SIP\", true),\n        function() {\n                            options.data.sip_version = text(); },\n        \"INVITE\",\n        peg$literalExpectation(\"INVITE\", false),\n        \"ACK\",\n        peg$literalExpectation(\"ACK\", false),\n        \"VXACH\",\n        peg$literalExpectation(\"VXACH\", false),\n        \"OPTIONS\",\n        peg$literalExpectation(\"OPTIONS\", false),\n        \"BYE\",\n        peg$literalExpectation(\"BYE\", false),\n        \"CANCEL\",\n        peg$literalExpectation(\"CANCEL\", false),\n        \"REGISTER\",\n        peg$literalExpectation(\"REGISTER\", false),\n        \"SUBSCRIBE\",\n        peg$literalExpectation(\"SUBSCRIBE\", false),\n        \"NOTIFY\",\n        peg$literalExpectation(\"NOTIFY\", false),\n        \"REFER\",\n        peg$literalExpectation(\"REFER\", false),\n        \"PUBLISH\",\n        peg$literalExpectation(\"PUBLISH\", false),\n        function() {\n\n                            options.data.method = text();\n                            return options.data.method; },\n        function(status_code) {\n                          options.data.status_code = parseInt(status_code.join('')); },\n        function() {\n                          options.data.reason_phrase = text(); },\n        function() {\n                      options.data = text(); },\n        function() {\n                                var idx, length;\n                                length = options.data.multi_header.length;\n                                for (idx = 0; idx < length; idx++) {\n                                  if (options.data.multi_header[idx].parsed === null) {\n                                    options.data = null;\n                                    break;\n                                  }\n                                }\n                                if (options.data !== null) {\n                                  options.data = options.data.multi_header;\n                                } else {\n                                  options.data = -1;\n                                }},\n        function() {\n                                var header;\n                                if(!options.data.multi_header) options.data.multi_header = [];\n                                try {\n                                  header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                  delete options.data.uri;\n                                  delete options.data.displayName;\n                                  delete options.data.params;\n                                } catch(e) {\n                                  header = null;\n                                }\n                                options.data.multi_header.push( { 'position': peg$currPos,\n                                                          'offset': location().start.offset,\n                                                          'parsed': header\n                                                        });},\n        function(displayName) {\n                                displayName = text().trim();\n                                if (displayName[0] === '\\\"') {\n                                  displayName = displayName.substring(1, displayName.length-1);\n                                }\n                                options.data.displayName = displayName; },\n        \"q\",\n        peg$literalExpectation(\"q\", true),\n        function(q) {\n                                if(!options.data.params) options.data.params = {};\n                                options.data.params['q'] = q; },\n        \"expires\",\n        peg$literalExpectation(\"expires\", true),\n        function(expires) {\n                                if(!options.data.params) options.data.params = {};\n                                options.data.params['expires'] = expires; },\n        function(delta_seconds) {\n                                return parseInt(delta_seconds.join('')); },\n        \"0\",\n        peg$literalExpectation(\"0\", false),\n        function() {\n                                return parseFloat(text()); },\n        function(param, value) {\n                                if(!options.data.params) options.data.params = {};\n                                if (value === null){\n                                  value = undefined;\n                                }\n                                else {\n                                  value = value[1];\n                                }\n                                options.data.params[param.toLowerCase()] = value;},\n        \"render\",\n        peg$literalExpectation(\"render\", true),\n        \"session\",\n        peg$literalExpectation(\"session\", true),\n        \"icon\",\n        peg$literalExpectation(\"icon\", true),\n        \"alert\",\n        peg$literalExpectation(\"alert\", true),\n        function() {\n                                    if (options.startRule === 'Content_Disposition') {\n                                      options.data.type = text().toLowerCase();\n                                    }\n                                  },\n        \"handling\",\n        peg$literalExpectation(\"handling\", true),\n        \"optional\",\n        peg$literalExpectation(\"optional\", true),\n        \"required\",\n        peg$literalExpectation(\"required\", true),\n        function(length) {\n                                options.data = parseInt(length.join('')); },\n        function() {\n                                options.data = text(); },\n        \"text\",\n        peg$literalExpectation(\"text\", true),\n        \"image\",\n        peg$literalExpectation(\"image\", true),\n        \"audio\",\n        peg$literalExpectation(\"audio\", true),\n        \"video\",\n        peg$literalExpectation(\"video\", true),\n        \"application\",\n        peg$literalExpectation(\"application\", true),\n        \"message\",\n        peg$literalExpectation(\"message\", true),\n        \"multipart\",\n        peg$literalExpectation(\"multipart\", true),\n        \"x-\",\n        peg$literalExpectation(\"x-\", true),\n        function(cseq_value) {\n                          options.data.value=parseInt(cseq_value.join('')); },\n        function(expires) {options.data = expires; },\n        function(event_type) {\n                               options.data.event = event_type.toLowerCase(); },\n        function() {\n                        var tag = options.data.tag;\n                          options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                          if (tag) {options.data.setParam('tag',tag)}\n                        },\n        \"tag\",\n        peg$literalExpectation(\"tag\", true),\n        function(tag) {options.data.tag = tag; },\n        function(forwards) {\n                          options.data = parseInt(forwards.join('')); },\n        function(min_expires) {options.data = min_expires; },\n        function() {\n                                options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                              },\n        \"digest\",\n        peg$literalExpectation(\"Digest\", true),\n        \"realm\",\n        peg$literalExpectation(\"realm\", true),\n        function(realm) { options.data.realm = realm; },\n        \"domain\",\n        peg$literalExpectation(\"domain\", true),\n        \"nonce\",\n        peg$literalExpectation(\"nonce\", true),\n        function(nonce) { options.data.nonce=nonce; },\n        \"opaque\",\n        peg$literalExpectation(\"opaque\", true),\n        function(opaque) { options.data.opaque=opaque; },\n        \"stale\",\n        peg$literalExpectation(\"stale\", true),\n        \"true\",\n        peg$literalExpectation(\"true\", true),\n        function() { options.data.stale=true; },\n        \"false\",\n        peg$literalExpectation(\"false\", true),\n        function() { options.data.stale=false; },\n        \"algorithm\",\n        peg$literalExpectation(\"algorithm\", true),\n        \"md5\",\n        peg$literalExpectation(\"MD5\", true),\n        \"md5-sess\",\n        peg$literalExpectation(\"MD5-sess\", true),\n        function(algorithm) {\n                              options.data.algorithm=algorithm.toUpperCase(); },\n        \"qop\",\n        peg$literalExpectation(\"qop\", true),\n        \"auth-int\",\n        peg$literalExpectation(\"auth-int\", true),\n        \"auth\",\n        peg$literalExpectation(\"auth\", true),\n        function(qop_value) {\n                                options.data.qop || (options.data.qop=[]);\n                                options.data.qop.push(qop_value.toLowerCase()); },\n        function(rack_value) {\n                          options.data.value=parseInt(rack_value.join('')); },\n        function() {\n                          var idx, length;\n                          length = options.data.multi_header.length;\n                          for (idx = 0; idx < length; idx++) {\n                            if (options.data.multi_header[idx].parsed === null) {\n                              options.data = null;\n                              break;\n                            }\n                          }\n                          if (options.data !== null) {\n                            options.data = options.data.multi_header;\n                          } else {\n                            options.data = -1;\n                          }},\n        function() {\n                          var header;\n                          if(!options.data.multi_header) options.data.multi_header = [];\n                          try {\n                            header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                            delete options.data.uri;\n                            delete options.data.displayName;\n                            delete options.data.params;\n                          } catch(e) {\n                            header = null;\n                          }\n                          options.data.multi_header.push( { 'position': peg$currPos,\n                                                    'offset': location().start.offset,\n                                                    'parsed': header\n                                                  });},\n        function() {\n                      options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                    },\n        function() {\n                              if (!(options.data.replaces_from_tag && options.data.replaces_to_tag)) {\n                                options.data = -1;\n                              }\n                            },\n        function() {\n                              options.data = {\n                                call_id: options.data\n                              };\n                            },\n        \"from-tag\",\n        peg$literalExpectation(\"from-tag\", true),\n        function(from_tag) {\n                              options.data.replaces_from_tag = from_tag;\n                            },\n        \"to-tag\",\n        peg$literalExpectation(\"to-tag\", true),\n        function(to_tag) {\n                              options.data.replaces_to_tag = to_tag;\n                            },\n        \"early-only\",\n        peg$literalExpectation(\"early-only\", true),\n        function() {\n                              options.data.early_only = true;\n                            },\n        function(head, r) {return r;},\n        function(head, tail) { return list(head, tail); },\n        function(value) {\n                        if (options.startRule === 'Require') {\n                          options.data = value || [];\n                        }\n                      },\n        function(rseq_value) {\n                          options.data.value=parseInt(rseq_value.join('')); },\n        \"active\",\n        peg$literalExpectation(\"active\", true),\n        \"pending\",\n        peg$literalExpectation(\"pending\", true),\n        \"terminated\",\n        peg$literalExpectation(\"terminated\", true),\n        function() {\n                                options.data.state = text(); },\n        \"reason\",\n        peg$literalExpectation(\"reason\", true),\n        function(reason) {\n                                if (typeof reason !== 'undefined') options.data.reason = reason; },\n        function(expires) {\n                                if (typeof expires !== 'undefined') options.data.expires = expires; },\n        \"retry_after\",\n        peg$literalExpectation(\"retry_after\", true),\n        function(retry_after) {\n                                if (typeof retry_after !== 'undefined') options.data.retry_after = retry_after; },\n        \"deactivated\",\n        peg$literalExpectation(\"deactivated\", true),\n        \"probation\",\n        peg$literalExpectation(\"probation\", true),\n        \"rejected\",\n        peg$literalExpectation(\"rejected\", true),\n        \"timeout\",\n        peg$literalExpectation(\"timeout\", true),\n        \"giveup\",\n        peg$literalExpectation(\"giveup\", true),\n        \"noresource\",\n        peg$literalExpectation(\"noresource\", true),\n        \"invariant\",\n        peg$literalExpectation(\"invariant\", true),\n        function(value) {\n                        if (options.startRule === 'Supported') {\n                          options.data = value || [];\n                        }\n                      },\n        function() {\n                      var tag = options.data.tag;\n                        options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                        if (tag) {options.data.setParam('tag',tag)}\n                      },\n        \"ttl\",\n        peg$literalExpectation(\"ttl\", true),\n        function(via_ttl_value) {\n                              options.data.ttl = via_ttl_value; },\n        \"maddr\",\n        peg$literalExpectation(\"maddr\", true),\n        function(via_maddr) {\n                              options.data.maddr = via_maddr; },\n        \"received\",\n        peg$literalExpectation(\"received\", true),\n        function(via_received) {\n                              options.data.received = via_received; },\n        \"branch\",\n        peg$literalExpectation(\"branch\", true),\n        function(via_branch) {\n                              options.data.branch = via_branch; },\n        \"rport\",\n        peg$literalExpectation(\"rport\", true),\n        function() {\n                              if(typeof response_port !== 'undefined')\n                                options.data.rport = response_port.join(''); },\n        function(via_protocol) {\n                              options.data.protocol = via_protocol; },\n        peg$literalExpectation(\"UDP\", true),\n        peg$literalExpectation(\"TCP\", true),\n        peg$literalExpectation(\"TLS\", true),\n        peg$literalExpectation(\"SCTP\", true),\n        function(via_transport) {\n                              options.data.transport = via_transport; },\n        function() {\n                              options.data.host = text(); },\n        function(via_sent_by_port) {\n                              options.data.port = parseInt(via_sent_by_port.join('')); },\n        function(ttl) {\n                              return parseInt(ttl.join('')); },\n        function(deltaSeconds) {\n                              if (options.startRule === 'Session_Expires') {\n                                options.data.deltaSeconds = deltaSeconds;\n                              }\n                            },\n        \"refresher\",\n        peg$literalExpectation(\"refresher\", false),\n        \"uas\",\n        peg$literalExpectation(\"uas\", false),\n        \"uac\",\n        peg$literalExpectation(\"uac\", false),\n        function(endpoint) {\n                              if (options.startRule === 'Session_Expires') {\n                                options.data.refresher = endpoint;\n                              }\n                            },\n        function(deltaSeconds) {\n                              if (options.startRule === 'Min_SE') {\n                                options.data = deltaSeconds;\n                              }\n                            },\n        \"stuns\",\n        peg$literalExpectation(\"stuns\", true),\n        \"stun\",\n        peg$literalExpectation(\"stun\", true),\n        function(scheme) {\n                              options.data.scheme = scheme; },\n        function(host) {\n                              options.data.host = host; },\n        \"?transport=\",\n        peg$literalExpectation(\"?transport=\", false),\n        \"turns\",\n        peg$literalExpectation(\"turns\", true),\n        \"turn\",\n        peg$literalExpectation(\"turn\", true),\n        function() {\n                              options.data.transport = transport; },\n        function() {\n                          options.data = text(); },\n        \"Referred-By\",\n        peg$literalExpectation(\"Referred-By\", false),\n        \"b\",\n        peg$literalExpectation(\"b\", false),\n        \"cid\",\n        peg$literalExpectation(\"cid\", false)\n      ],\n\n      peg$bytecode = [\n        peg$decode(\"2 \\\"\\\"6 7!\"),\n        peg$decode(\"4\\\"\\\"\\\"5!7#\"),\n        peg$decode(\"4$\\\"\\\"5!7%\"),\n        peg$decode(\"4&\\\"\\\"5!7'\"),\n        peg$decode(\";'.# &;(\"),\n        peg$decode(\"4(\\\"\\\"5!7)\"),\n        peg$decode(\"4*\\\"\\\"5!7+\"),\n        peg$decode(\"2,\\\"\\\"6,7-\"),\n        peg$decode(\"2.\\\"\\\"6.7/\"),\n        peg$decode(\"40\\\"\\\"5!71\"),\n        peg$decode(\"22\\\"\\\"6273.\\x89 &24\\\"\\\"6475.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\";).# &;,\"),\n        peg$decode(\"2F\\\"\\\"6F7G.} &2H\\\"\\\"6H7I.q &2J\\\"\\\"6J7K.e &2L\\\"\\\"6L7M.Y &2N\\\"\\\"6N7O.M &2P\\\"\\\"6P7Q.A &2R\\\"\\\"6R7S.5 &2T\\\"\\\"6T7U.) &2V\\\"\\\"6V7W\"),\n        peg$decode(\"%%2X\\\"\\\"6X7Y/5#;#/,$;#/#$+#)(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%%$;$0#*;$&/,#; /#$+\\\")(\\\"'#&'#.\\\" &\\\"/=#$;$/&#0#*;$&&&#/'$8\\\":Z\\\" )(\\\"'#&'#\"),\n        peg$decode(\";..\\\" &\\\"\"),\n        peg$decode(\"%$;'.# &;(0)*;'.# &;(&/?#28\\\"\\\"6879/0$;//'$8#:[# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#0=*%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"4\\\\\\\"\\\"5!7].# &;3\"),\n        peg$decode(\"4^\\\"\\\"5!7_\"),\n        peg$decode(\"4`\\\"\\\"5!7a\"),\n        peg$decode(\";!.) &4b\\\"\\\"5!7c\"),\n        peg$decode(\"%$;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x9E#0\\x9B*;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x92#0\\x8F*;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"2T\\\"\\\"6T7U.\\xE3 &2V\\\"\\\"6V7W.\\xD7 &2f\\\"\\\"6f7g.\\xCB &2h\\\"\\\"6h7i.\\xBF &2:\\\"\\\"6:7;.\\xB3 &2D\\\"\\\"6D7E.\\xA7 &22\\\"\\\"6273.\\x9B &28\\\"\\\"6879.\\x8F &2j\\\"\\\"6j7k.\\x83 &;&.} &24\\\"\\\"6475.q &2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &26\\\"\\\"6677.M &2>\\\"\\\"6>7?.A &2p\\\"\\\"6p7q.5 &2r\\\"\\\"6r7s.) &;'.# &;(\"),\n        peg$decode(\"%$;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s/\\u0134#0\\u0131*;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s&&&#/\\\"!&,)\"),\n        peg$decode(\"%;//?#2P\\\"\\\"6P7Q/0$;//'$8#:t# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#24\\\"\\\"6475/0$;//'$8#:u# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2>\\\"\\\"6>7?/0$;//'$8#:v# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2T\\\"\\\"6T7U/0$;//'$8#:w# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2V\\\"\\\"6V7W/0$;//'$8#:x# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2h\\\"\\\"6h7i/0#;//'$8\\\":y\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//6#2f\\\"\\\"6f7g/'$8\\\":z\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2D\\\"\\\"6D7E/0$;//'$8#:{# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#22\\\"\\\"6273/0$;//'$8#:|# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#28\\\"\\\"6879/0$;//'$8#:}# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//0#;&/'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;&/0#;//'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"4\\x7F\\\"\\\"5!7\\x80.A &4\\x81\\\"\\\"5!7\\x82.5 &4\\x83\\\"\\\"5!7\\x84.) &;3.# &;.\"),\n        peg$decode(\"%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\\\"!&,)/1$;&/($8$:\\x85$!!)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";..G &2L\\\"\\\"6L7M.; &4\\x86\\\"\\\"5!7\\x87./ &4\\x83\\\"\\\"5!7\\x84.# &;3\"),\n        peg$decode(\"%2j\\\"\\\"6j7k/J#4\\x88\\\"\\\"5!7\\x89.5 &4\\x8A\\\"\\\"5!7\\x8B.) &4\\x8C\\\"\\\"5!7\\x8D/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;N/M#28\\\"\\\"6879/>$;O.\\\" &\\\"/0$;S/'$8$:\\x8E$ )($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;N/d#28\\\"\\\"6879/U$;O.\\\" &\\\"/G$;S/>$;_/5$;l.\\\" &\\\"/'$8&:\\x8F& )(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x90\\\"\\\"5$7\\x91.) &3\\x92\\\"\\\"5#7\\x93/' 8!:\\x94!! )\"),\n        peg$decode(\"%;P/]#%28\\\"\\\"6879/,#;R/#$+\\\")(\\\"'#&'#.\\\" &\\\"/6$2:\\\"\\\"6:7;/'$8#:\\x95# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#\"),\n        peg$decode(\"2<\\\"\\\"6<7=.q &2>\\\"\\\"6>7?.e &2@\\\"\\\"6@7A.Y &2B\\\"\\\"6B7C.M &2D\\\"\\\"6D7E.A &22\\\"\\\"6273.5 &26\\\"\\\"6677.) &24\\\"\\\"6475\"),\n        peg$decode(\"%$;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E0e*;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E&/& 8!:\\x96! )\"),\n        peg$decode(\"%;T/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\x97! )\"),\n        peg$decode(\"%$%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#0<*%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#&/D#;W/;$2J\\\"\\\"6J7K.\\\" &\\\"/'$8#:\\x98# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$4\\x99\\\"\\\"5!7\\x9A/,#0)*4\\x99\\\"\\\"5!7\\x9A&&&#\"),\n        peg$decode(\"%4$\\\"\\\"5!7%/?#$4\\x9B\\\"\\\"5!7\\x9C0)*4\\x9B\\\"\\\"5!7\\x9C&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2l\\\"\\\"6l7m/?#;Y/6$2n\\\"\\\"6n7o/'$8#:\\x9D# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;Z/\\xB3#28\\\"\\\"6879/\\xA4$;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0790 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\xA4#;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u06F9 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C#;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u067A &%2\\x9E\\\"\\\"6\\x9E7\\x9F/t#;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0613 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\#;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#.\\u05C4 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/D#;Z/;$28\\\"\\\"6879/,$;[/#$+$)($'#(#'#(\\\"'#&'#.\\u058D &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;[/#$+\\\")(\\\"'#&'#.\\u056E &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;Z/#$+\\\")(\\\"'#&'#.\\u054F &%;Z/\\x9B#2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u04C7 &%;Z/\\xAA#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x83$2\\x9E\\\"\\\"6\\x9E7\\x9F/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0430 &%;Z/\\xB9#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x92$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/k$2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u038A &%;Z/\\xC8#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA1$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/z$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/S$2\\x9E\\\"\\\"6\\x9E7\\x9F/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u02D5 &%;Z/\\xD7#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;[/#$+')(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0211 &%;Z/\\xFE#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xD7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0126 &%;Z/\\u011C#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xF5$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xCE$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x80$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/Y$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/2$2\\x9E\\\"\\\"6\\x9E7\\x9F/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#/& 8!:\\xA0! )\"),\n        peg$decode(\"%;#/M#;#.\\\" &\\\"/?$;#.\\\" &\\\"/1$;#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;Z/;#28\\\"\\\"6879/,$;Z/#$+#)(#'#(\\\"'#&'#.# &;\\\\\"),\n        peg$decode(\"%;]/o#2J\\\"\\\"6J7K/`$;]/W$2J\\\"\\\"6J7K/H$;]/?$2J\\\"\\\"6J7K/0$;]/'$8':\\xA1' )(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\xA2\\\"\\\"6\\xA27\\xA3/2#4\\xA4\\\"\\\"5!7\\xA5/#$+\\\")(\\\"'#&'#.\\x98 &%2\\xA6\\\"\\\"6\\xA67\\xA7/;#4\\xA8\\\"\\\"5!7\\xA9/,$;!/#$+#)(#'#(\\\"'#&'#.j &%2\\xAA\\\"\\\"6\\xAA7\\xAB/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#.B &%4\\xAC\\\"\\\"5!7\\xAD/,#;!/#$+\\\")(\\\"'#&'#.# &;!\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\xAE!! )\"),\n        peg$decode(\"$%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#&\"),\n        peg$decode(\";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g\"),\n        peg$decode(\"%3\\xAF\\\"\\\"5*7\\xB0/a#3\\xB1\\\"\\\"5#7\\xB2.G &3\\xB3\\\"\\\"5#7\\xB4.; &3\\xB5\\\"\\\"5$7\\xB6./ &3\\xB7\\\"\\\"5#7\\xB8.# &;6/($8\\\":\\xB9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xBA\\\"\\\"5%7\\xBB/I#3\\xBC\\\"\\\"5%7\\xBD./ &3\\xBE\\\"\\\"5\\\"7\\xBF.# &;6/($8\\\":\\xC0\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC1\\\"\\\"5'7\\xC2/1#;\\x90/($8\\\":\\xC3\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC4\\\"\\\"5$7\\xC5/1#;\\xF0/($8\\\":\\xC6\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC7\\\"\\\"5&7\\xC8/1#;T/($8\\\":\\xC9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xCA\\\"\\\"5\\\"7\\xCB/N#%2>\\\"\\\"6>7?/,#;6/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xCC\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;h/P#%2>\\\"\\\"6>7?/,#;i/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xCD\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\";k.) &;+.# &;-\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &28\\\"\\\"6879.A &2<\\\"\\\"6<7=.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\"%26\\\"\\\"6677/n#;m/e$$%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#0<*%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#&/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;n/A#2>\\\"\\\"6>7?/2$;o/)$8#:\\xCE#\\\"\\\" )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#\"),\n        peg$decode(\"$;p.) &;+.# &;-0/*;p.) &;+.# &;-&\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &26\\\"\\\"6677.A &28\\\"\\\"6879.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\";\\x91.# &;r\"),\n        peg$decode(\"%;\\x90/G#;'/>$;s/5$;'/,$;\\x84/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";M.# &;t\"),\n        peg$decode(\"%;\\x7F/E#28\\\"\\\"6879/6$;u.# &;x/'$8#:\\xCF# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;v.# &;w/J#%26\\\"\\\"6677/,#;\\x83/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2\\xD0\\\"\\\"6\\xD07\\xD1/:#;\\x80/1$;w.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%24\\\"\\\"6475/,#;{/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;z/3#$;y0#*;y&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";*.) &;+.# &;-\"),\n        peg$decode(\";+.\\x8F &;-.\\x89 &22\\\"\\\"6273.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%;|/e#$%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#0<*%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;~0#*;~&/e#$%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"$;~0#*;~&\"),\n        peg$decode(\";+.w &;-.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%%;\\\"/\\x87#$;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K0M*;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K&/#$+\\\")(\\\"'#&'#/& 8!:\\xD2! )\"),\n        peg$decode(\";\\x81.# &;\\x82\"),\n        peg$decode(\"%%;O/2#2:\\\"\\\"6:7;/#$+\\\")(\\\"'#&'#.\\\" &\\\"/,#;S/#$+\\\")(\\\"'#&'#.\\\" &\\\"\"),\n        peg$decode(\"$;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A/\\x8C#0\\x89*;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A&&&#\"),\n        peg$decode(\"$;y0#*;y&\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3/q#24\\\"\\\"6475/b$$;!/&#0#*;!&&&#/L$2J\\\"\\\"6J7K/=$$;!/&#0#*;!&&&#/'$8%:\\xD4% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"2\\xD5\\\"\\\"6\\xD57\\xD6\"),\n        peg$decode(\"2\\xD7\\\"\\\"6\\xD77\\xD8\"),\n        peg$decode(\"2\\xD9\\\"\\\"6\\xD97\\xDA\"),\n        peg$decode(\"2\\xDB\\\"\\\"6\\xDB7\\xDC\"),\n        peg$decode(\"2\\xDD\\\"\\\"6\\xDD7\\xDE\"),\n        peg$decode(\"2\\xDF\\\"\\\"6\\xDF7\\xE0\"),\n        peg$decode(\"2\\xE1\\\"\\\"6\\xE17\\xE2\"),\n        peg$decode(\"2\\xE3\\\"\\\"6\\xE37\\xE4\"),\n        peg$decode(\"2\\xE5\\\"\\\"6\\xE57\\xE6\"),\n        peg$decode(\"2\\xE7\\\"\\\"6\\xE77\\xE8\"),\n        peg$decode(\"2\\xE9\\\"\\\"6\\xE97\\xEA\"),\n        peg$decode(\"%;\\x85.Y &;\\x86.S &;\\x88.M &;\\x89.G &;\\x8A.A &;\\x8B.; &;\\x8C.5 &;\\x8F./ &;\\x8D.) &;\\x8E.# &;6/& 8!:\\xEB! )\"),\n        peg$decode(\"%;\\x84/G#;'/>$;\\x92/5$;'/,$;\\x94/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x93/' 8!:\\xEC!! )\"),\n        peg$decode(\"%;!/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:\\xED! )\"),\n        peg$decode(\"%;\\xB6/Y#$%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;9/N#%2:\\\"\\\"6:7;/,#;9/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xEE\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;:.c &%;\\x98/Y#$%;A/,#;\\x98/#$+\\\")(\\\"'#&'#06*%;A/,#;\\x98/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/& 8!:\\xEF! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#06*%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#&/'$8\\\":\\xF0\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9A.\\\" &\\\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;6/Y#$%;./,#;6/#$+\\\")(\\\"'#&'#06*%;./,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#.# &;H/' 8!:\\xF1!! )\"),\n        peg$decode(\";\\x9C.) &;\\x9D.# &;\\xA0\"),\n        peg$decode(\"%3\\xF2\\\"\\\"5!7\\xF3/:#;</1$;\\x9F/($8#:\\xF4#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\xF7#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\xF8!! )\"),\n        peg$decode(\"%2\\xF9\\\"\\\"6\\xF97\\xFA/o#%2J\\\"\\\"6J7K/M#;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xFB\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;6/J#%;</,#;\\xA1/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xFC\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\";6.) &;T.# &;H\"),\n        peg$decode(\"%;\\xA3/Y#$%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\xFD\\\"\\\"5&7\\xFE.G &3\\xFF\\\"\\\"5'7\\u0100.; &3\\u0101\\\"\\\"5$7\\u0102./ &3\\u0103\\\"\\\"5%7\\u0104.# &;6/& 8!:\\u0105! )\"),\n        peg$decode(\";\\xA5.# &;\\xA0\"),\n        peg$decode(\"%3\\u0106\\\"\\\"5(7\\u0107/M#;</D$3\\u0108\\\"\\\"5(7\\u0109./ &3\\u010A\\\"\\\"5(7\\u010B.# &;6/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u010C!! )\"),\n        peg$decode(\"%;\\xA9/& 8!:\\u010D! )\"),\n        peg$decode(\"%;\\xAA/k#;;/b$;\\xAF/Y$$%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xAB.# &;\\xAC\"),\n        peg$decode(\"3\\u010E\\\"\\\"5$7\\u010F.S &3\\u0110\\\"\\\"5%7\\u0111.G &3\\u0112\\\"\\\"5%7\\u0113.; &3\\u0114\\\"\\\"5%7\\u0115./ &3\\u0116\\\"\\\"5+7\\u0117.# &;\\xAD\"),\n        peg$decode(\"3\\u0118\\\"\\\"5'7\\u0119./ &3\\u011A\\\"\\\"5)7\\u011B.# &;\\xAD\"),\n        peg$decode(\";6.# &;\\xAE\"),\n        peg$decode(\"%3\\u011C\\\"\\\"5\\\"7\\u011D/,#;6/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";\\xAD.# &;6\"),\n        peg$decode(\"%;6/5#;</,$;\\xB1/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";6.# &;H\"),\n        peg$decode(\"%;\\xB3/5#;./,$;\\x90/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u011E!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u011F!! )\"),\n        peg$decode(\"%;\\xB6/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0120\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%%;7/e#$%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#0<*%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u0121\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%3\\u0122\\\"\\\"5#7\\u0123/:#;</1$;6/($8#:\\u0124#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u0125!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u0126!! )\"),\n        peg$decode(\"%$;\\x9A0#*;\\x9A&/x#;@/o$;M/f$;?/]$$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8%:\\u0127% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%3\\u0128\\\"\\\"5&7\\u0129/k#;./b$;\\xC1/Y$$%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#.# &;\\xBF\"),\n        peg$decode(\"%;6/k#;./b$;\\xC0/Y$$%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/;#;</2$;6.# &;H/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xC2.G &;\\xC4.A &;\\xC6.; &;\\xC8.5 &;\\xC9./ &;\\xCA.) &;\\xCB.# &;\\xC0\"),\n        peg$decode(\"%3\\u012A\\\"\\\"5%7\\u012B/5#;</,$;\\xC3/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u012C!! )\"),\n        peg$decode(\"%3\\u012D\\\"\\\"5&7\\u012E/\\x97#;</\\x8E$;D/\\x85$;\\xC5/|$$%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";t.# &;w\"),\n        peg$decode(\"%3\\u012F\\\"\\\"5%7\\u0130/5#;</,$;\\xC7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u0131!! )\"),\n        peg$decode(\"%3\\u0132\\\"\\\"5&7\\u0133/:#;</1$;I/($8#:\\u0134#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0135\\\"\\\"5%7\\u0136/]#;</T$%3\\u0137\\\"\\\"5$7\\u0138/& 8!:\\u0139! ).4 &%3\\u013A\\\"\\\"5%7\\u013B/& 8!:\\u013C! )/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u013D\\\"\\\"5)7\\u013E/R#;</I$3\\u013F\\\"\\\"5#7\\u0140./ &3\\u0141\\\"\\\"5(7\\u0142.# &;6/($8#:\\u0143#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0144\\\"\\\"5#7\\u0145/\\x93#;</\\x8A$;D/\\x81$%;\\xCC/e#$%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#0<*%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0146\\\"\\\"5(7\\u0147./ &3\\u0148\\\"\\\"5$7\\u0149.# &;6/' 8!:\\u014A!! )\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xCF/G#;./>$;\\xCF/5$;./,$;\\x90/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u014B!! )\"),\n        peg$decode(\"%;\\xD1/]#$%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014C\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014D\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;L.O &;\\x99.I &%;@.\\\" &\\\"/:#;t/1$;?.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014E\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\xD4/]#$%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014F\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x96/& 8!:\\u0150! )\"),\n        peg$decode(\"%3\\u0151\\\"\\\"5(7\\u0152/:#;</1$;6/($8#:\\u0153#! )(#'#(\\\"'#&'#.g &%3\\u0154\\\"\\\"5&7\\u0155/:#;</1$;6/($8#:\\u0156#! )(#'#(\\\"'#&'#.: &%3\\u0157\\\"\\\"5*7\\u0158/& 8!:\\u0159! ).# &;\\xA0\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u015C!! )\"),\n        peg$decode(\"%;\\xD8/Y#$%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/Y#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u015D!! )\"),\n        peg$decode(\"%;\\xDB/Y#$%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\u015E\\\"\\\"5&7\\u015F.; &3\\u0160\\\"\\\"5'7\\u0161./ &3\\u0162\\\"\\\"5*7\\u0163.# &;6/& 8!:\\u0164! )\"),\n        peg$decode(\"%3\\u0165\\\"\\\"5&7\\u0166/:#;</1$;\\xDD/($8#:\\u0167#! )(#'#(\\\"'#&'#.} &%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\u0168#! )(#'#(\\\"'#&'#.P &%3\\u0169\\\"\\\"5+7\\u016A/:#;</1$;\\x9E/($8#:\\u016B#! )(#'#(\\\"'#&'#.# &;\\xA0\"),\n        peg$decode(\"3\\u016C\\\"\\\"5+7\\u016D.k &3\\u016E\\\"\\\"5)7\\u016F._ &3\\u0170\\\"\\\"5(7\\u0171.S &3\\u0172\\\"\\\"5'7\\u0173.G &3\\u0174\\\"\\\"5&7\\u0175.; &3\\u0176\\\"\\\"5*7\\u0177./ &3\\u0178\\\"\\\"5)7\\u0179.# &;6\"),\n        peg$decode(\";1.\\\" &\\\"\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u017A!! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u017B\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%;\\xE3/Y#$%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEA/k#;./b$;\\xED/Y$$%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xE5.; &;\\xE6.5 &;\\xE7./ &;\\xE8.) &;\\xE9.# &;\\xA0\"),\n        peg$decode(\"%3\\u017C\\\"\\\"5#7\\u017D/:#;</1$;\\xF0/($8#:\\u017E#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u017F\\\"\\\"5%7\\u0180/:#;</1$;T/($8#:\\u0181#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0182\\\"\\\"5(7\\u0183/F#;</=$;\\\\.) &;Y.# &;X/($8#:\\u0184#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0185\\\"\\\"5&7\\u0186/:#;</1$;6/($8#:\\u0187#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0188\\\"\\\"5%7\\u0189/O#%;</3#$;!0#*;!&/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\u018A\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEB/G#;;/>$;6/5$;;/,$;\\xEC/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3.# &;6/' 8!:\\u018B!! )\"),\n        peg$decode(\"%3\\xB1\\\"\\\"5#7\\u018C.G &3\\xB3\\\"\\\"5#7\\u018D.; &3\\xB7\\\"\\\"5#7\\u018E./ &3\\xB5\\\"\\\"5$7\\u018F.# &;6/' 8!:\\u0190!! )\"),\n        peg$decode(\"%;\\xEE/D#%;C/,#;\\xEF/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\u0191! )\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\u0192!! )\"),\n        peg$decode(\"%%;!/?#;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/' 8!:\\u0193!! )\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0194\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\";\\xF4.# &;\\xA0\"),\n        peg$decode(\"%2\\u0195\\\"\\\"6\\u01957\\u0196/L#;</C$2\\u0197\\\"\\\"6\\u01977\\u0198.) &2\\u0199\\\"\\\"6\\u01997\\u019A/($8#:\\u019B#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u019C\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%;6/5#;0/,$;\\xF7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;2.) &;4.# &;.0/*;2.) &;4.# &;.&\"),\n        peg$decode(\"$;%0#*;%&\"),\n        peg$decode(\"%;\\xFA/;#28\\\"\\\"6879/,$;\\xFB/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u019D\\\"\\\"5%7\\u019E.) &3\\u019F\\\"\\\"5$7\\u01A0/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%;\\xFC/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\\\.) &;X.# &;\\x82/' 8!:\\u01A2!! )\"),\n        peg$decode(\";\\\".S &;!.M &2F\\\"\\\"6F7G.A &2J\\\"\\\"6J7K.5 &2H\\\"\\\"6H7I.) &2N\\\"\\\"6N7O\"),\n        peg$decode(\"2L\\\"\\\"6L7M.\\x95 &2B\\\"\\\"6B7C.\\x89 &2<\\\"\\\"6<7=.} &2R\\\"\\\"6R7S.q &2T\\\"\\\"6T7U.e &2V\\\"\\\"6V7W.Y &2P\\\"\\\"6P7Q.M &2@\\\"\\\"6@7A.A &2D\\\"\\\"6D7E.5 &22\\\"\\\"6273.) &2>\\\"\\\"6>7?\"),\n        peg$decode(\"%;\\u0100/b#28\\\"\\\"6879/S$;\\xFB/J$%2\\u01A3\\\"\\\"6\\u01A37\\u01A4/,#;\\xEC/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u01A5\\\"\\\"5%7\\u01A6.) &3\\u01A7\\\"\\\"5$7\\u01A8/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%;\\xEC/O#3\\xB1\\\"\\\"5#7\\xB2.6 &3\\xB3\\\"\\\"5#7\\xB4.* &$;+0#*;+&/'$8\\\":\\u01A9\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0104/\\x87#2F\\\"\\\"6F7G/x$;\\u0103/o$2F\\\"\\\"6F7G/`$;\\u0103/W$2F\\\"\\\"6F7G/H$;\\u0103/?$2F\\\"\\\"6F7G/0$;\\u0105/'$8):\\u01AA) )()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/,#;\\u0103/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/5#;\\u0103/,$;\\u0103/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x84/U#;'/L$;\\x92/C$;'/:$;\\x90/1$; .\\\" &\\\"/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\u01AB\\\"\\\"6\\u01AB7\\u01AC.) &2\\u01AD\\\"\\\"6\\u01AD7\\u01AE/w#;0/n$;\\u0108/e$$%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#0<*%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\x99.# &;L\"),\n        peg$decode(\"%2\\u01AF\\\"\\\"6\\u01AF7\\u01B0/5#;</,$;\\u010A/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;D/S#;,/J$2:\\\"\\\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\")\n      ],\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleIndices)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$decode(s) {\n    var bc = new Array(s.length), i;\n\n    for (i = 0; i < s.length; i++) {\n      bc[i] = s.charCodeAt(i) - 32;\n    }\n\n    return bc;\n  }\n\n  function peg$parseRule(index) {\n    var bc    = peg$bytecode[index],\n        ip    = 0,\n        ips   = [],\n        end   = bc.length,\n        ends  = [],\n        stack = [],\n        params, i;\n\n    while (true) {\n      while (ip < end) {\n        switch (bc[ip]) {\n          case 0:\n            stack.push(peg$consts[bc[ip + 1]]);\n            ip += 2;\n            break;\n\n          case 1:\n            stack.push(void 0);\n            ip++;\n            break;\n\n          case 2:\n            stack.push(null);\n            ip++;\n            break;\n\n          case 3:\n            stack.push(peg$FAILED);\n            ip++;\n            break;\n\n          case 4:\n            stack.push([]);\n            ip++;\n            break;\n\n          case 5:\n            stack.push(peg$currPos);\n            ip++;\n            break;\n\n          case 6:\n            stack.pop();\n            ip++;\n            break;\n\n          case 7:\n            peg$currPos = stack.pop();\n            ip++;\n            break;\n\n          case 8:\n            stack.length -= bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 9:\n            stack.splice(-2, 1);\n            ip++;\n            break;\n\n          case 10:\n            stack[stack.length - 2].push(stack.pop());\n            ip++;\n            break;\n\n          case 11:\n            stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 12:\n            stack.push(input.substring(stack.pop(), peg$currPos));\n            ip++;\n            break;\n\n          case 13:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1]) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 14:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] === peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 15:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 16:\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              ends.push(end);\n              ips.push(ip);\n\n              end = ip + 2 + bc[ip + 1];\n              ip += 2;\n            } else {\n              ip += 2 + bc[ip + 1];\n            }\n\n            break;\n\n          case 17:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (input.length > peg$currPos) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 18:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 19:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 20:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 21:\n            stack.push(input.substr(peg$currPos, bc[ip + 1]));\n            peg$currPos += bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 22:\n            stack.push(peg$consts[bc[ip + 1]]);\n            peg$currPos += peg$consts[bc[ip + 1]].length;\n            ip += 2;\n            break;\n\n          case 23:\n            stack.push(peg$FAILED);\n            if (peg$silentFails === 0) {\n              peg$fail(peg$consts[bc[ip + 1]]);\n            }\n            ip += 2;\n            break;\n\n          case 24:\n            peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];\n            ip += 2;\n            break;\n\n          case 25:\n            peg$savedPos = peg$currPos;\n            ip++;\n            break;\n\n          case 26:\n            params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);\n            for (i = 0; i < bc[ip + 3]; i++) {\n              params[i] = stack[stack.length - 1 - params[i]];\n            }\n\n            stack.splice(\n              stack.length - bc[ip + 2],\n              bc[ip + 2],\n              peg$consts[bc[ip + 1]].apply(null, params)\n            );\n\n            ip += 4 + bc[ip + 3];\n            break;\n\n          case 27:\n            stack.push(peg$parseRule(bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 28:\n            peg$silentFails++;\n            ip++;\n            break;\n\n          case 29:\n            peg$silentFails--;\n            ip++;\n            break;\n\n          default:\n            throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n        }\n      }\n\n      if (ends.length > 0) {\n        end = ends.pop();\n        ip = ips.pop();\n      } else {\n        break;\n      }\n    }\n\n    return stack[0];\n  }\n\n\n    options.data = {}; // Object to which header attributes will be assigned during parsing\n\n    function list (head, tail) {\n      return [head].concat(tail);\n    }\n\n\n  peg$result = peg$parseRule(peg$startRuleIndex);\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * @name SIP\n * @namespace\n */\n\nmodule.exports = function (SIP) {\n    var Modifiers;\n    function stripPayload(sdp, payload) {\n        var i;\n        var media_descs = [];\n        var current_media_desc;\n        var lines = sdp.split(/\\r\\n/);\n        for (i = 0; i < lines.length;) {\n            var line = lines[i];\n            if (/^m=(?:audio|video)/.test(line)) {\n                current_media_desc = {\n                    index: i,\n                    stripped: []\n                };\n                media_descs.push(current_media_desc);\n            }\n            else if (current_media_desc) {\n                var rtpmap = /^a=rtpmap:(\\d+) ([^/]+)\\//.exec(line);\n                if (rtpmap && payload === rtpmap[2]) {\n                    lines.splice(i, 1);\n                    current_media_desc.stripped.push(rtpmap[1]);\n                    continue; // Don't increment 'i'\n                }\n            }\n            i++;\n        }\n        for (i = 0; i < media_descs.length; i++) {\n            var mline = lines[media_descs[i].index].split(' ');\n            // Ignore the first 3 parameters of the mline. The codec information is after that\n            for (var j = 3; j < mline.length;) {\n                if (media_descs[i].stripped.indexOf(mline[j]) !== -1) {\n                    mline.splice(j, 1);\n                    continue;\n                }\n                j++;\n            }\n            lines[media_descs[i].index] = mline.join(' ');\n        }\n        return lines.join('\\r\\n');\n    }\n    function stripMediaDescription(sdp, description) {\n        var descriptionRegExp = new RegExp(\"m=\" + description + \".*$\", \"gm\");\n        var groupRegExp = new RegExp(\"^a=group:.*$\", \"gm\");\n        if (descriptionRegExp.test(sdp)) {\n            var midLineToRemove_1;\n            sdp = sdp.split(/^m=/gm).filter(function (section) {\n                if (section.substr(0, description.length) === description) {\n                    midLineToRemove_1 = section.match(/^a=mid:.*$/gm);\n                    if (midLineToRemove_1) {\n                        midLineToRemove_1 = midLineToRemove_1[0].match(/:.+$/g)[0].substr(1);\n                    }\n                    return false;\n                }\n                return true;\n            }).join('m=');\n            var groupLine = sdp.match(groupRegExp);\n            if (groupLine && groupLine.length === 1) {\n                groupLine = groupLine[0];\n                var groupRegExpReplace = new RegExp(\"\\ *\" + midLineToRemove_1 + \"[^\\ ]*\", \"g\");\n                groupLine = groupLine.replace(groupRegExpReplace, \"\");\n                sdp = sdp.split(groupRegExp).join(groupLine);\n            }\n        }\n        return sdp;\n    }\n    Modifiers = {\n        stripTcpCandidates: function (description) {\n            description.sdp = description.sdp.replace(/^a=candidate:\\d+ \\d+ tcp .*?\\r\\n/img, \"\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripTelephoneEvent: function (description) {\n            description.sdp = stripPayload(description.sdp, 'telephone-event');\n            return SIP.Utils.Promise.resolve(description);\n        },\n        cleanJitsiSdpImageattr: function (description) {\n            description.sdp = description.sdp.replace(/^(a=imageattr:.*?)(x|y)=\\[0-/gm, \"$1$2=[1:\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripG722: function (description) {\n            description.sdp = stripPayload(description.sdp, 'G722');\n            return SIP.Utils.Promise.resolve(description);\n        },\n        stripRtpPayload: function (payload) {\n            return function (description) {\n                description.sdp = stripPayload(description.sdp, payload);\n                return SIP.Utils.Promise.resolve(description);\n            };\n        },\n        stripVideo: function (description) {\n            description.sdp = stripMediaDescription(description.sdp, \"video\");\n            return SIP.Utils.Promise.resolve(description);\n        },\n        addMidLines: function (description) {\n            var sdp = description.sdp;\n            if (sdp.search(/^a=mid.*$/gm) === -1) {\n                var mlines_1 = sdp.match(/^m=.*$/gm);\n                sdp = sdp.split(/^m=.*$/gm);\n                mlines_1.forEach(function (elem, idx) {\n                    mlines_1[idx] = elem + '\\na=mid:' + idx;\n                });\n                sdp.forEach(function (elem, idx) {\n                    if (mlines_1[idx]) {\n                        sdp[idx] = elem + mlines_1[idx];\n                    }\n                });\n                sdp = sdp.join('');\n                description.sdp = sdp;\n            }\n            return SIP.Utils.Promise.resolve(description);\n        }\n    };\n    return Modifiers;\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * @fileoverview Simple\n */\n/* Simple\n * @class Simple\n */\nmodule.exports = function (SIP) {\n    var C = {\n        STATUS_NULL: 0,\n        STATUS_NEW: 1,\n        STATUS_CONNECTING: 2,\n        STATUS_CONNECTED: 3,\n        STATUS_COMPLETED: 4\n    };\n    /*\n     * @param {Object} options\n     */\n    var Simple = function (options) {\n        /*\n         *  {\n         *    media: {\n         *      remote: {\n         *        audio: <DOM element>,\n         *        video: <DOM element>\n         *      },\n         *      local: {\n         *        video: <DOM element>\n         *      }\n         *    },\n         *    ua: {\n         *       <UA Configuration Options>\n         *    }\n         *  }\n         */\n        if (options.media.remote.video) {\n            this.video = true;\n        }\n        else {\n            this.video = false;\n        }\n        if (options.media.remote.audio) {\n            this.audio = true;\n        }\n        else {\n            this.audio = false;\n        }\n        if (!this.audio && !this.video) {\n            // Need to do at least audio or video\n            // Error\n            throw new Error('At least one remote audio or video element is required for Simple.');\n        }\n        this.options = options;\n        // https://stackoverflow.com/questions/7944460/detect-safari-browser\n        var browserUa = global.navigator.userAgent.toLowerCase();\n        var isSafari = false;\n        var isFirefox = false;\n        if (browserUa.indexOf('safari') > -1 && browserUa.indexOf('chrome') < 0) {\n            isSafari = true;\n        }\n        else if (browserUa.indexOf('firefox') > -1 && browserUa.indexOf('chrome') < 0) {\n            isFirefox = true;\n        }\n        var sessionDescriptionHandlerFactoryOptions = {};\n        if (isSafari) {\n            sessionDescriptionHandlerFactoryOptions.modifiers = [SIP.Web.Modifiers.stripG722];\n        }\n        if (isFirefox) {\n            sessionDescriptionHandlerFactoryOptions.alwaysAcquireMediaFirst = true;\n        }\n        if (!this.options.ua.uri) {\n            this.anonymous = true;\n        }\n        this.ua = new SIP.UA({\n            // User Configurable Options\n            uri: this.options.ua.uri,\n            authorizationUser: this.options.ua.authorizationUser,\n            password: this.options.ua.password,\n            displayName: this.options.ua.displayName,\n            // Undocumented \"Advanced\" Options\n            userAgentString: this.options.ua.userAgentString,\n            // Fixed Options\n            register: true,\n            sessionDescriptionHandlerFactoryOptions: sessionDescriptionHandlerFactoryOptions,\n            transportOptions: {\n                traceSip: this.options.ua.traceSip,\n                wsServers: this.options.ua.wsServers\n            }\n        });\n        this.state = C.STATUS_NULL;\n        this.logger = this.ua.getLogger('sip.simple');\n        this.ua.on('registered', function () {\n            this.emit('registered', this.ua);\n        }.bind(this));\n        this.ua.on('unregistered', function () {\n            this.emit('unregistered', this.ua);\n        }.bind(this));\n        this.ua.on('failed', function () {\n            this.emit('unregistered', this.ua);\n        }.bind(this));\n        this.ua.on('invite', function (session) {\n            // If there is already an active session reject the incoming session\n            if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n                this.logger.warn('Rejecting incoming call. Simple only supports 1 call at a time');\n                session.reject();\n                return;\n            }\n            this.session = session;\n            this.setupSession();\n            this.emit('ringing', this.session);\n        }.bind(this));\n        this.ua.on('message', function (message) {\n            this.emit('message', message);\n        }.bind(this));\n        return this;\n    };\n    Simple.prototype = Object.create(SIP.EventEmitter.prototype);\n    Simple.C = C;\n    // Public\n    Simple.prototype.call = function (destination) {\n        if (!this.ua || !this.checkRegistration()) {\n            this.logger.warn('A registered UA is required for calling');\n            return;\n        }\n        if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n            this.logger.warn('Cannot make more than a single call with Simple');\n            return;\n        }\n        // Safari hack, because you cannot call .play() from a non user action\n        if (this.options.media.remote.audio) {\n            this.options.media.remote.audio.autoplay = true;\n        }\n        if (this.options.media.remote.video) {\n            this.options.media.remote.video.autoplay = true;\n        }\n        if (this.options.media.local && this.options.media.local.video) {\n            this.options.media.local.video.autoplay = true;\n            this.options.media.local.video.volume = 0;\n        }\n        this.session = this.ua.invite(destination, {\n            sessionDescriptionHandlerOptions: {\n                constraints: {\n                    audio: this.audio,\n                    video: this.video\n                }\n            }\n        });\n        this.setupSession();\n        return this.session;\n    };\n    Simple.prototype.answer = function () {\n        if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n            this.logger.warn('No call to answer');\n            return;\n        }\n        // Safari hack, because you cannot call .play() from a non user action\n        if (this.options.media.remote.audio) {\n            this.options.media.remote.audio.autoplay = true;\n        }\n        if (this.options.media.remote.video) {\n            this.options.media.remote.video.autoplay = true;\n        }\n        return this.session.accept({\n            sessionDescriptionHandlerOptions: {\n                constraints: {\n                    audio: this.audio,\n                    video: this.video\n                }\n            }\n        });\n        // emit call is active\n    };\n    Simple.prototype.reject = function () {\n        if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n            this.logger.warn('Call is already answered');\n            return;\n        }\n        return this.session.reject();\n    };\n    Simple.prototype.hangup = function () {\n        if (this.state !== C.STATUS_CONNECTED && this.state !== C.STATUS_CONNECTING && this.state !== C.STATUS_NEW) {\n            this.logger.warn('No active call to hang up on');\n            return;\n        }\n        if (this.state !== C.STATUS_CONNECTED) {\n            return this.session.cancel();\n        }\n        else {\n            return this.session.bye();\n        }\n    };\n    Simple.prototype.hold = function () {\n        if (this.state !== C.STATUS_CONNECTED || this.session.local_hold) {\n            this.logger.warn('Cannot put call on hold');\n            return;\n        }\n        this.mute();\n        this.logger.log('Placing session on hold');\n        return this.session.hold();\n    };\n    Simple.prototype.unhold = function () {\n        if (this.state !== C.STATUS_CONNECTED || !this.session.local_hold) {\n            this.logger.warn('Cannot unhold a call that is not on hold');\n            return;\n        }\n        this.unmute();\n        this.logger.log('Placing call off hold');\n        return this.session.unhold();\n    };\n    Simple.prototype.mute = function () {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An acitve call is required to mute audio');\n            return;\n        }\n        this.logger.log('Muting Audio');\n        this.toggleMute(true);\n        this.emit('mute', this);\n    };\n    Simple.prototype.unmute = function () {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An active call is required to unmute audio');\n            return;\n        }\n        this.logger.log('Unmuting Audio');\n        this.toggleMute(false);\n        this.emit('unmute', this);\n    };\n    Simple.prototype.sendDTMF = function (tone) {\n        if (this.state !== C.STATUS_CONNECTED) {\n            this.logger.warn('An active call is required to send a DTMF tone');\n            return;\n        }\n        this.logger.log('Sending DTMF tone: ' + tone);\n        this.session.dtmf(tone);\n    };\n    Simple.prototype.message = function (destination, message) {\n        if (!this.ua || !this.checkRegistration()) {\n            this.logger.warn('A registered UA is required to send a message');\n            return;\n        }\n        if (!destination || !message) {\n            this.logger.warn('A destination and message are required to send a message');\n            return;\n        }\n        this.ua.message(destination, message);\n    };\n    // Private Helpers\n    Simple.prototype.checkRegistration = function () {\n        return (this.anonymous || (this.ua && this.ua.isRegistered()));\n    };\n    Simple.prototype.setupRemoteMedia = function () {\n        // If there is a video track, it will attach the video and audio to the same element\n        var pc = this.session.sessionDescriptionHandler.peerConnection;\n        var remoteStream;\n        if (pc.getReceivers) {\n            remoteStream = new global.window.MediaStream();\n            pc.getReceivers().forEach(function (receiver) {\n                var track = receiver.track;\n                if (track) {\n                    remoteStream.addTrack(track);\n                }\n            });\n        }\n        else {\n            remoteStream = pc.getRemoteStreams()[0];\n        }\n        if (this.video) {\n            this.options.media.remote.video.srcObject = remoteStream;\n            this.options.media.remote.video.play().catch(function () {\n                this.logger.log('play was rejected');\n            }.bind(this));\n        }\n        else if (this.audio) {\n            this.options.media.remote.audio.srcObject = remoteStream;\n            this.options.media.remote.audio.play().catch(function () {\n                this.logger.log('play was rejected');\n            }.bind(this));\n        }\n    };\n    Simple.prototype.setupLocalMedia = function () {\n        if (this.video && this.options.media.local && this.options.media.local.video) {\n            var pc = this.session.sessionDescriptionHandler.peerConnection;\n            var localStream;\n            if (pc.getSenders) {\n                localStream = new global.window.MediaStream();\n                pc.getSenders().forEach(function (sender) {\n                    var track = sender.track;\n                    if (track && track.kind === 'video') {\n                        localStream.addTrack(track);\n                    }\n                });\n            }\n            else {\n                localStream = pc.getLocalStreams()[0];\n            }\n            this.options.media.local.video.srcObject = localStream;\n            this.options.media.local.video.volume = 0;\n            this.options.media.local.video.play();\n        }\n    };\n    Simple.prototype.cleanupMedia = function () {\n        if (this.video) {\n            this.options.media.remote.video.srcObject = null;\n            this.options.media.remote.video.pause();\n            if (this.options.media.local && this.options.media.local.video) {\n                this.options.media.local.video.srcObject = null;\n                this.options.media.local.video.pause();\n            }\n        }\n        if (this.audio) {\n            this.options.media.remote.audio.srcObject = null;\n            this.options.media.remote.audio.pause();\n        }\n    };\n    Simple.prototype.setupSession = function () {\n        this.state = C.STATUS_NEW;\n        this.emit('new', this.session);\n        this.session.on('progress', this.onProgress.bind(this));\n        this.session.on('accepted', this.onAccepted.bind(this));\n        this.session.on('rejected', this.onEnded.bind(this));\n        this.session.on('failed', this.onFailed.bind(this));\n        this.session.on('terminated', this.onEnded.bind(this));\n    };\n    Simple.prototype.destroyMedia = function () {\n        this.session.sessionDescriptionHandler.close();\n    };\n    Simple.prototype.toggleMute = function (mute) {\n        var pc = this.session.sessionDescriptionHandler.peerConnection;\n        if (pc.getSenders) {\n            pc.getSenders().forEach(function (sender) {\n                if (sender.track) {\n                    sender.track.enabled = !mute;\n                }\n            });\n        }\n        else {\n            pc.getLocalStreams().forEach(function (stream) {\n                stream.getAudioTracks().forEach(function (track) {\n                    track.enabled = !mute;\n                });\n                stream.getVideoTracks().forEach(function (track) {\n                    track.enabled = !mute;\n                });\n            });\n        }\n    };\n    Simple.prototype.onAccepted = function () {\n        this.state = C.STATUS_CONNECTED;\n        this.emit('connected', this.session);\n        this.setupLocalMedia();\n        this.setupRemoteMedia();\n        this.session.sessionDescriptionHandler.on('addTrack', function () {\n            this.logger.log('A track has been added, triggering new remoteMedia setup');\n            this.setupRemoteMedia();\n        }.bind(this));\n        this.session.sessionDescriptionHandler.on('addStream', function () {\n            this.logger.log('A stream has been added, trigger new remoteMedia setup');\n            this.setupRemoteMedia();\n        }.bind(this));\n        this.session.on('hold', function () {\n            this.emit('hold', this.session);\n        }.bind(this));\n        this.session.on('unhold', function () {\n            this.emit('unhold', this.session);\n        }.bind(this));\n        this.session.on('dtmf', function (tone) {\n            this.emit('dtmf', tone);\n        }.bind(this));\n        this.session.on('bye', this.onEnded.bind(this));\n    };\n    Simple.prototype.onProgress = function () {\n        this.state = C.STATUS_CONNECTING;\n        this.emit('connecting', this.session);\n    };\n    Simple.prototype.onFailed = function () {\n        this.onEnded();\n    };\n    Simple.prototype.onEnded = function () {\n        this.state = C.STATUS_COMPLETED;\n        this.emit('ended', this.session);\n        this.cleanupMedia();\n    };\n    return Simple;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\nvar toplevel = global.window || global;\nfunction getPrefixedProperty(object, name) {\n    if (object == null) {\n        return;\n    }\n    var capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n    var prefixedNames = [name, 'webkit' + capitalizedName, 'moz' + capitalizedName];\n    for (var i in prefixedNames) {\n        var property = object[prefixedNames[i]];\n        if (property) {\n            return property.bind(object);\n        }\n    }\n}\nmodule.exports = {\n    WebSocket: toplevel.WebSocket,\n    Transport: __webpack_require__(10),\n    open: toplevel.open,\n    Promise: toplevel.Promise,\n    timers: toplevel,\n    // Console is not defined in ECMAScript, so just in case...\n    console: toplevel.console || {\n        debug: function () { },\n        log: function () { },\n        warn: function () { },\n        error: function () { }\n    },\n    addEventListener: getPrefixedProperty(toplevel, 'addEventListener'),\n    removeEventListener: getPrefixedProperty(toplevel, 'removeEventListener')\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(28)))\n\n/***/ })\n/******/ ]);\n});","(function() {\n  var context = this;\n\n  (function() {\n    (function() {\n      var slice = [].slice;\n\n      this.ActionCable = {\n        INTERNAL: {\n          \"message_types\": {\n            \"welcome\": \"welcome\",\n            \"ping\": \"ping\",\n            \"confirmation\": \"confirm_subscription\",\n            \"rejection\": \"reject_subscription\"\n          },\n          \"default_mount_path\": \"/cable\",\n          \"protocols\": [\"actioncable-v1-json\", \"actioncable-unsupported\"]\n        },\n        WebSocket: window.WebSocket,\n        logger: window.console,\n        createConsumer: function(url) {\n          var ref;\n          if (url == null) {\n            url = (ref = this.getConfig(\"url\")) != null ? ref : this.INTERNAL.default_mount_path;\n          }\n          return new ActionCable.Consumer(this.createWebSocketURL(url));\n        },\n        getConfig: function(name) {\n          var element;\n          element = document.head.querySelector(\"meta[name='action-cable-\" + name + \"']\");\n          return element != null ? element.getAttribute(\"content\") : void 0;\n        },\n        createWebSocketURL: function(url) {\n          var a;\n          if (url && !/^wss?:/i.test(url)) {\n            a = document.createElement(\"a\");\n            a.href = url;\n            a.href = a.href;\n            a.protocol = a.protocol.replace(\"http\", \"ws\");\n            return a.href;\n          } else {\n            return url;\n          }\n        },\n        startDebugging: function() {\n          return this.debugging = true;\n        },\n        stopDebugging: function() {\n          return this.debugging = null;\n        },\n        log: function() {\n          var messages, ref;\n          messages = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          if (this.debugging) {\n            messages.push(Date.now());\n            return (ref = this.logger).log.apply(ref, [\"[ActionCable]\"].concat(slice.call(messages)));\n          }\n        }\n      };\n\n    }).call(this);\n  }).call(context);\n\n  var ActionCable = context.ActionCable;\n\n  (function() {\n    (function() {\n      var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n      ActionCable.ConnectionMonitor = (function() {\n        var clamp, now, secondsSince;\n\n        ConnectionMonitor.pollInterval = {\n          min: 3,\n          max: 30\n        };\n\n        ConnectionMonitor.staleThreshold = 6;\n\n        function ConnectionMonitor(connection) {\n          this.connection = connection;\n          this.visibilityDidChange = bind(this.visibilityDidChange, this);\n          this.reconnectAttempts = 0;\n        }\n\n        ConnectionMonitor.prototype.start = function() {\n          if (!this.isRunning()) {\n            this.startedAt = now();\n            delete this.stoppedAt;\n            this.startPolling();\n            document.addEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor started. pollInterval = \" + (this.getPollInterval()) + \" ms\");\n          }\n        };\n\n        ConnectionMonitor.prototype.stop = function() {\n          if (this.isRunning()) {\n            this.stoppedAt = now();\n            this.stopPolling();\n            document.removeEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor stopped\");\n          }\n        };\n\n        ConnectionMonitor.prototype.isRunning = function() {\n          return (this.startedAt != null) && (this.stoppedAt == null);\n        };\n\n        ConnectionMonitor.prototype.recordPing = function() {\n          return this.pingedAt = now();\n        };\n\n        ConnectionMonitor.prototype.recordConnect = function() {\n          this.reconnectAttempts = 0;\n          this.recordPing();\n          delete this.disconnectedAt;\n          return ActionCable.log(\"ConnectionMonitor recorded connect\");\n        };\n\n        ConnectionMonitor.prototype.recordDisconnect = function() {\n          this.disconnectedAt = now();\n          return ActionCable.log(\"ConnectionMonitor recorded disconnect\");\n        };\n\n        ConnectionMonitor.prototype.startPolling = function() {\n          this.stopPolling();\n          return this.poll();\n        };\n\n        ConnectionMonitor.prototype.stopPolling = function() {\n          return clearTimeout(this.pollTimeout);\n        };\n\n        ConnectionMonitor.prototype.poll = function() {\n          return this.pollTimeout = setTimeout((function(_this) {\n            return function() {\n              _this.reconnectIfStale();\n              return _this.poll();\n            };\n          })(this), this.getPollInterval());\n        };\n\n        ConnectionMonitor.prototype.getPollInterval = function() {\n          var interval, max, min, ref;\n          ref = this.constructor.pollInterval, min = ref.min, max = ref.max;\n          interval = 5 * Math.log(this.reconnectAttempts + 1);\n          return Math.round(clamp(interval, min, max) * 1000);\n        };\n\n        ConnectionMonitor.prototype.reconnectIfStale = function() {\n          if (this.connectionIsStale()) {\n            ActionCable.log(\"ConnectionMonitor detected stale connection. reconnectAttempts = \" + this.reconnectAttempts + \", pollInterval = \" + (this.getPollInterval()) + \" ms, time disconnected = \" + (secondsSince(this.disconnectedAt)) + \" s, stale threshold = \" + this.constructor.staleThreshold + \" s\");\n            this.reconnectAttempts++;\n            if (this.disconnectedRecently()) {\n              return ActionCable.log(\"ConnectionMonitor skipping reopening recent disconnect\");\n            } else {\n              ActionCable.log(\"ConnectionMonitor reopening\");\n              return this.connection.reopen();\n            }\n          }\n        };\n\n        ConnectionMonitor.prototype.connectionIsStale = function() {\n          var ref;\n          return secondsSince((ref = this.pingedAt) != null ? ref : this.startedAt) > this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.disconnectedRecently = function() {\n          return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.visibilityDidChange = function() {\n          if (document.visibilityState === \"visible\") {\n            return setTimeout((function(_this) {\n              return function() {\n                if (_this.connectionIsStale() || !_this.connection.isOpen()) {\n                  ActionCable.log(\"ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = \" + document.visibilityState);\n                  return _this.connection.reopen();\n                }\n              };\n            })(this), 200);\n          }\n        };\n\n        now = function() {\n          return new Date().getTime();\n        };\n\n        secondsSince = function(time) {\n          return (now() - time) / 1000;\n        };\n\n        clamp = function(number, min, max) {\n          return Math.max(min, Math.min(max, number));\n        };\n\n        return ConnectionMonitor;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var i, message_types, protocols, ref, supportedProtocols, unsupportedProtocol,\n        slice = [].slice,\n        bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      ref = ActionCable.INTERNAL, message_types = ref.message_types, protocols = ref.protocols;\n\n      supportedProtocols = 2 <= protocols.length ? slice.call(protocols, 0, i = protocols.length - 1) : (i = 0, []), unsupportedProtocol = protocols[i++];\n\n      ActionCable.Connection = (function() {\n        Connection.reopenDelay = 500;\n\n        function Connection(consumer) {\n          this.consumer = consumer;\n          this.open = bind(this.open, this);\n          this.subscriptions = this.consumer.subscriptions;\n          this.monitor = new ActionCable.ConnectionMonitor(this);\n          this.disconnected = true;\n        }\n\n        Connection.prototype.send = function(data) {\n          if (this.isOpen()) {\n            this.webSocket.send(JSON.stringify(data));\n            return true;\n          } else {\n            return false;\n          }\n        };\n\n        Connection.prototype.open = function() {\n          if (this.isActive()) {\n            ActionCable.log(\"Attempted to open WebSocket, but existing socket is \" + (this.getState()));\n            return false;\n          } else {\n            ActionCable.log(\"Opening WebSocket, current state is \" + (this.getState()) + \", subprotocols: \" + protocols);\n            if (this.webSocket != null) {\n              this.uninstallEventHandlers();\n            }\n            this.webSocket = new ActionCable.WebSocket(this.consumer.url, protocols);\n            this.installEventHandlers();\n            this.monitor.start();\n            return true;\n          }\n        };\n\n        Connection.prototype.close = function(arg) {\n          var allowReconnect, ref1;\n          allowReconnect = (arg != null ? arg : {\n            allowReconnect: true\n          }).allowReconnect;\n          if (!allowReconnect) {\n            this.monitor.stop();\n          }\n          if (this.isActive()) {\n            return (ref1 = this.webSocket) != null ? ref1.close() : void 0;\n          }\n        };\n\n        Connection.prototype.reopen = function() {\n          var error;\n          ActionCable.log(\"Reopening WebSocket, current state is \" + (this.getState()));\n          if (this.isActive()) {\n            try {\n              return this.close();\n            } catch (error1) {\n              error = error1;\n              return ActionCable.log(\"Failed to reopen WebSocket\", error);\n            } finally {\n              ActionCable.log(\"Reopening WebSocket in \" + this.constructor.reopenDelay + \"ms\");\n              setTimeout(this.open, this.constructor.reopenDelay);\n            }\n          } else {\n            return this.open();\n          }\n        };\n\n        Connection.prototype.getProtocol = function() {\n          var ref1;\n          return (ref1 = this.webSocket) != null ? ref1.protocol : void 0;\n        };\n\n        Connection.prototype.isOpen = function() {\n          return this.isState(\"open\");\n        };\n\n        Connection.prototype.isActive = function() {\n          return this.isState(\"open\", \"connecting\");\n        };\n\n        Connection.prototype.isProtocolSupported = function() {\n          var ref1;\n          return ref1 = this.getProtocol(), indexOf.call(supportedProtocols, ref1) >= 0;\n        };\n\n        Connection.prototype.isState = function() {\n          var ref1, states;\n          states = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return ref1 = this.getState(), indexOf.call(states, ref1) >= 0;\n        };\n\n        Connection.prototype.getState = function() {\n          var ref1, state, value;\n          for (state in WebSocket) {\n            value = WebSocket[state];\n            if (value === ((ref1 = this.webSocket) != null ? ref1.readyState : void 0)) {\n              return state.toLowerCase();\n            }\n          }\n          return null;\n        };\n\n        Connection.prototype.installEventHandlers = function() {\n          var eventName, handler;\n          for (eventName in this.events) {\n            handler = this.events[eventName].bind(this);\n            this.webSocket[\"on\" + eventName] = handler;\n          }\n        };\n\n        Connection.prototype.uninstallEventHandlers = function() {\n          var eventName;\n          for (eventName in this.events) {\n            this.webSocket[\"on\" + eventName] = function() {};\n          }\n        };\n\n        Connection.prototype.events = {\n          message: function(event) {\n            var identifier, message, ref1, type;\n            if (!this.isProtocolSupported()) {\n              return;\n            }\n            ref1 = JSON.parse(event.data), identifier = ref1.identifier, message = ref1.message, type = ref1.type;\n            switch (type) {\n              case message_types.welcome:\n                this.monitor.recordConnect();\n                return this.subscriptions.reload();\n              case message_types.ping:\n                return this.monitor.recordPing();\n              case message_types.confirmation:\n                return this.subscriptions.notify(identifier, \"connected\");\n              case message_types.rejection:\n                return this.subscriptions.reject(identifier);\n              default:\n                return this.subscriptions.notify(identifier, \"received\", message);\n            }\n          },\n          open: function() {\n            ActionCable.log(\"WebSocket onopen event, using '\" + (this.getProtocol()) + \"' subprotocol\");\n            this.disconnected = false;\n            if (!this.isProtocolSupported()) {\n              ActionCable.log(\"Protocol is unsupported. Stopping monitor and disconnecting.\");\n              return this.close({\n                allowReconnect: false\n              });\n            }\n          },\n          close: function(event) {\n            ActionCable.log(\"WebSocket onclose event\");\n            if (this.disconnected) {\n              return;\n            }\n            this.disconnected = true;\n            this.monitor.recordDisconnect();\n            return this.subscriptions.notifyAll(\"disconnected\", {\n              willAttemptReconnect: this.monitor.isRunning()\n            });\n          },\n          error: function() {\n            return ActionCable.log(\"WebSocket onerror event\");\n          }\n        };\n\n        return Connection;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var slice = [].slice;\n\n      ActionCable.Subscriptions = (function() {\n        function Subscriptions(consumer) {\n          this.consumer = consumer;\n          this.subscriptions = [];\n        }\n\n        Subscriptions.prototype.create = function(channelName, mixin) {\n          var channel, params, subscription;\n          channel = channelName;\n          params = typeof channel === \"object\" ? channel : {\n            channel: channel\n          };\n          subscription = new ActionCable.Subscription(this.consumer, params, mixin);\n          return this.add(subscription);\n        };\n\n        Subscriptions.prototype.add = function(subscription) {\n          this.subscriptions.push(subscription);\n          this.consumer.ensureActiveConnection();\n          this.notify(subscription, \"initialized\");\n          this.sendCommand(subscription, \"subscribe\");\n          return subscription;\n        };\n\n        Subscriptions.prototype.remove = function(subscription) {\n          this.forget(subscription);\n          if (!this.findAll(subscription.identifier).length) {\n            this.sendCommand(subscription, \"unsubscribe\");\n          }\n          return subscription;\n        };\n\n        Subscriptions.prototype.reject = function(identifier) {\n          var i, len, ref, results, subscription;\n          ref = this.findAll(identifier);\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            this.forget(subscription);\n            this.notify(subscription, \"rejected\");\n            results.push(subscription);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.forget = function(subscription) {\n          var s;\n          this.subscriptions = (function() {\n            var i, len, ref, results;\n            ref = this.subscriptions;\n            results = [];\n            for (i = 0, len = ref.length; i < len; i++) {\n              s = ref[i];\n              if (s !== subscription) {\n                results.push(s);\n              }\n            }\n            return results;\n          }).call(this);\n          return subscription;\n        };\n\n        Subscriptions.prototype.findAll = function(identifier) {\n          var i, len, ref, results, s;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            s = ref[i];\n            if (s.identifier === identifier) {\n              results.push(s);\n            }\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.reload = function() {\n          var i, len, ref, results, subscription;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.sendCommand(subscription, \"subscribe\"));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notifyAll = function() {\n          var args, callbackName, i, len, ref, results, subscription;\n          callbackName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.notify.apply(this, [subscription, callbackName].concat(slice.call(args))));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notify = function() {\n          var args, callbackName, i, len, results, subscription, subscriptions;\n          subscription = arguments[0], callbackName = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n          if (typeof subscription === \"string\") {\n            subscriptions = this.findAll(subscription);\n          } else {\n            subscriptions = [subscription];\n          }\n          results = [];\n          for (i = 0, len = subscriptions.length; i < len; i++) {\n            subscription = subscriptions[i];\n            results.push(typeof subscription[callbackName] === \"function\" ? subscription[callbackName].apply(subscription, args) : void 0);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.sendCommand = function(subscription, command) {\n          var identifier;\n          identifier = subscription.identifier;\n          return this.consumer.send({\n            command: command,\n            identifier: identifier\n          });\n        };\n\n        return Subscriptions;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Subscription = (function() {\n        var extend;\n\n        function Subscription(consumer, params, mixin) {\n          this.consumer = consumer;\n          if (params == null) {\n            params = {};\n          }\n          this.identifier = JSON.stringify(params);\n          extend(this, mixin);\n        }\n\n        Subscription.prototype.perform = function(action, data) {\n          if (data == null) {\n            data = {};\n          }\n          data.action = action;\n          return this.send(data);\n        };\n\n        Subscription.prototype.send = function(data) {\n          return this.consumer.send({\n            command: \"message\",\n            identifier: this.identifier,\n            data: JSON.stringify(data)\n          });\n        };\n\n        Subscription.prototype.unsubscribe = function() {\n          return this.consumer.subscriptions.remove(this);\n        };\n\n        extend = function(object, properties) {\n          var key, value;\n          if (properties != null) {\n            for (key in properties) {\n              value = properties[key];\n              object[key] = value;\n            }\n          }\n          return object;\n        };\n\n        return Subscription;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Consumer = (function() {\n        function Consumer(url) {\n          this.url = url;\n          this.subscriptions = new ActionCable.Subscriptions(this);\n          this.connection = new ActionCable.Connection(this);\n        }\n\n        Consumer.prototype.send = function(data) {\n          return this.connection.send(data);\n        };\n\n        Consumer.prototype.connect = function() {\n          return this.connection.open();\n        };\n\n        Consumer.prototype.disconnect = function() {\n          return this.connection.close({\n            allowReconnect: false\n          });\n        };\n\n        Consumer.prototype.ensureActiveConnection = function() {\n          if (!this.connection.isActive()) {\n            return this.connection.open();\n          }\n        };\n\n        return Consumer;\n\n      })();\n\n    }).call(this);\n  }).call(this);\n\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = ActionCable;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(ActionCable);\n  }\n}).call(this);\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","/*eslint no-console: 0*/\n\n/**\n * eyeson Logger implement debug|info|warn|error methods.\n **/\nexport default (function() {\n  return {\n    error: function(...args) {\n      return console.error(...args);\n    },\n    warn: function(...args) {\n      return console.warn(...args);\n    },\n    info: function(...args) {\n      return console.log(...args);\n    },\n    debug: function(...args) {\n      if (!console.debug) {\n        return null;\n      }\n      return console.debug(...args);\n    }\n  };\n}());\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\n\n/**\n * eyeson Communications Api\n **/\nclass ComApi {\n  constructor(uri, token) {\n    this.uri = uri;\n    this.token = token.replace(/\\W+/g, '');\n    this.cache = { users: [] };\n    this.onError = null;\n    this._handleError = this._handleError.bind(this);\n  }\n\n  _request(path, options = {}) {\n    return fetch(new Request(this.uri + path), options).then(response => {\n      const contentType = response.headers.get('content-type');\n\n      if (\n        contentType &&\n        contentType.indexOf('application/json') !== -1 &&\n        response.ok\n      ) {\n        return response.json();\n      }\n\n      // not json - e.g. broadcast stop\n      if (response.ok) {\n        return response.text();\n      }\n\n      throw new Error(`ComApiError: ${response.status}`);\n    });\n  }\n\n  /**\n   * NOTE: slightly adjusted from:\n   * https://gist.github.com/ghinda/8442a57f22099bdb2e34\n   **/\n  /* eslint-disable */\n  _objectToFormData(obj, form, namespace) {\n    let fd = form || new FormData();\n    let formKey = null;\n\n    for (let property in obj) {\n      if (!obj.hasOwnProperty(property)) {\n        return;\n      }\n      if (namespace) {\n        // adjusted, skip \"int props\" for layout api\n        let prop = isNaN(parseInt(property)) ? property : '';\n        formKey = namespace + '[' + prop + ']';\n      } else {\n        formKey = property;\n      }\n      // if the property is an object, but not a File, use recursivity.\n      if (\n        typeof obj[property] === 'object' &&\n        !(obj[property] instanceof File)\n      ) {\n        this._objectToFormData(obj[property], fd, property);\n      } else {\n        // if it's a string or a File object\n        fd.append(formKey, obj[property]);\n      }\n    }\n\n    return fd;\n  }\n  /* eslint-enable */\n\n  _post(path, data) {\n    return this._request(path, {\n      method: 'POST',\n      body: this._objectToFormData(data)\n    });\n  }\n\n  _put(path, data) {\n    const formData = new FormData();\n    /* eslint-disable guard-for-in */\n    for (const key in data) {\n      formData.append(key, data[key]);\n    }\n    /* eslint-enable */\n    return this._request(path, {\n      method: 'PUT',\n      body: formData\n    });\n  }\n\n  _handleError(error) {\n    Logger.error('ComApi::handleError', error);\n    if (this.onError) {\n      this.onError(error);\n    }\n  }\n\n  onError(callback) {\n    this.onError = callback;\n  }\n\n  /**\n   * Fetch room details including the user and credentials from com-api.\n   **/\n  getRoom(callback) {\n    return this._request(`/rooms/${this.token}`)\n      .then(callback)\n      .catch(error => {\n        return callback ? callback({ error: error }) : { error: error };\n      });\n  }\n\n  /**\n   * Retrieve user information. Will use cache on multiple requests.\n   **/\n  getUser(userId, callback) {\n    const user = this.cache.users.find(cachedUser => cachedUser.id === userId);\n\n    if (user) {\n      callback(user);\n      return null;\n    }\n\n    return this._request(`/rooms/${this.token}/users/${userId}`)\n      .then(apiUser => {\n        let users = this.cache.users.filter(\n          cachedUser => cachedUser.id !== userId\n        );\n        let extendedUser = this.addUserAttributes(apiUser, userId);\n        users.push(extendedUser);\n        this.cache.users = users;\n        callback(extendedUser);\n      })\n      .catch(this._handleError);\n  }\n\n  addUserAttributes(user, userId) {\n    let largeAvatarUrl = user.avatar;\n\n    try {\n      largeAvatarUrl = `${user.avatar}?size=large`;\n    } catch (error) {\n      Logger.warn('ComApi::addUserAttributes missing', user);\n    }\n\n    return Object.assign(user, {\n      id: userId,\n      apiId: user.id,\n      sipId: (user.sip && user.sip.authorizationUser) || null,\n      largeAvatar: largeAvatarUrl\n    });\n  }\n\n  /**\n   * Request a guest user from api.\n   **/\n  requestUser(user, callback) {\n    return this._post(`/guests/${this.token}`, {\n      name: user.name,\n      email: user.email\n    })\n      .then(callback)\n      .catch(error => callback({ error: error }));\n  }\n\n  /**\n   * Broadcast to a platform.\n   **/\n  /* eslint-disable camelcase */\n  startBroadcast(data, platform) {\n    return this._post(`/rooms/${this.token}/broadcasts`, {\n      platform: platform,\n      player_url: data.playerUrl || '',\n      stream_url: data.streamUrl\n    });\n  }\n  /* eslint-enable camelcase */\n\n  /**\n   * Broadcast to a platform.\n   **/\n  /* eslint-disable camelcase */\n  publishBroadcast(data, platform) {\n    return this._put(`/rooms/${this.token}/broadcasts/${platform}`, {\n      player_url: data.playerUrl\n    });\n  }\n  /* eslint-enable camelcase */\n\n  /**\n   * Stop a broadcast from a platform.\n   **/\n  stopBroadcast(platform) {\n    return this._request(`/rooms/${this.token}/broadcasts/${platform}`, {\n      method: 'DELETE'\n    });\n  }\n\n  /**\n   * Stop all broadcasts.\n   **/\n  stopAllBroadcasts() {\n    return this._request(`/rooms/${this.token}/broadcasts`, {\n      method: 'DELETE'\n    });\n  }\n\n  /**\n   * Start a recording.\n   **/\n  startRecording() {\n    return this._post(`/rooms/${this.token}/recording`, {});\n  }\n\n  /**\n   * Stop a recording\n   **/\n  stopRecording() {\n    return this._request(`/rooms/${this.token}/recording`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Set layout\n   * params object either as { layout: 'auto' } or { users: [ id1, id2 ...] }\n   **/\n  setLayout(params) {\n    return this._post(`/rooms/${this.token}/layout`, params).catch(\n      this._handleError\n    );\n  }\n\n  /**\n   * Set layer\n   *\n   * params object: {\n   *   insert: {\n   *     icon:    user['avatar'],\n   *     title:   \"#{user['name']}:\",\n   *     content: question.truncate(280)\n   *   }\n   * }\n   *\n   **/\n  setLayer(params) {\n    return this._post(`/rooms/${this.token}/layers`, params).catch(\n      this._handleError\n    );\n  }\n\n  /**\n   * Clear front most layer\n   **/\n  clearFrontLayer() {\n    return this._request(`/rooms/${this.token}/layers/1`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Take a snapshot of the current podium\n   **/\n  takeSnapshot() {\n    return this._post(`/rooms/${this.token}/snapshot`).catch(this._handleError);\n  }\n\n  /**\n   * Annotate current podium\n   **/\n  createAnnotation(callback, onError) {\n    return this._post(`/rooms/${this.token}/annotation`)\n      .then(callback)\n      .catch(error => {\n        onError(error);\n        this._handleError(error);\n      });\n  }\n\n  /**\n   * Annotate current podium\n   **/\n  stopAnnotation() {\n    return this._request(`/rooms/${this.token}/annotation`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Start a playback\n   **/\n  startPlayback(playback) {\n    return this._post(`/rooms/${this.token}/playbacks`, {\n      playback: playback\n    }).catch(this._handleError);\n  }\n\n  /**\n   * Stop a playback identified by play_id\n   **/\n  stopPlayback(playback) {\n    return this._request(`/rooms/${this.token}/playbacks/${playback.play_id}`, {\n      method: 'DELETE'\n    }).catch(this._handleError);\n  }\n}\n\nexport default ComApi;\n/* eslint-enable max-lines */\n","/* eslint-disable */\n/**\n* Creates and returns a new, throttled version of the passed function, that,\n* when invoked repeatedly, will only actually call the original function at most\n* once per every wait milliseconds. Useful for rate-limiting events that occur\n* faster than you can keep up with.\n*\n* By default, throttle will execute the function as soon as you call it for the\n* first time, and, if you call it again any number of times during the wait\n* period, as soon as that period is over. If you'd like to disable the\n* leading-edge call, pass {leading: false}, and if you'd like to disable the\n* execution on the trailing-edge, pass {trailing: false}.\n*\n* @see http://underscorejs.org/#throttle\n**/\nexport default (func, wait, options) => {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function() {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n/* eslint-enable */\n","import Logger from './../Logger';\n\nclass BaseEvent {\n  constructor(context) {\n    this.context = context;\n  }\n\n  handle(msg) {\n    Logger.error('BaseEvent::handle is not implemented', msg);\n  }\n}\n\nexport default BaseEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartPlaybackEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.startPlayback(msg.playback);\n  }\n}\n\nclass StopPlaybackEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.stopPlayback(msg.playback);\n  }\n}\n\nexport { StartPlaybackEvent, StopPlaybackEvent };\n","import BaseEvent from './BaseEvent';\n\nclass PublicEvent extends BaseEvent {\n  handle(msg) {\n    if (msg._src === 'client') {\n      return;\n    }\n\n    Reflect.deleteProperty(msg, '_src');\n    this.context.listeners.forEach(callback => callback(msg));\n  }\n}\n\nexport default PublicEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StartAnnotationEvent extends PublicEvent {\n  handle() {\n    this.context.annotationLoop = window.setInterval(() => {\n      this.context._api.createAnnotation(\n        response => {\n          return super.handle({ type: 'annotation', annotation: response });\n        },\n        () => {\n          window.clearInterval(this.context.annotationLoop);\n        }\n      );\n    }, 1000);\n  }\n}\n\nclass StopAnnotationEvent extends PublicEvent {\n  handle() {\n    window.clearInterval(this.context.annotationLoop);\n    this.context._api.stopAnnotation();\n  }\n}\n\nexport { StartAnnotationEvent, StopAnnotationEvent };\n","import PublicEvent from './PublicEvent';\n\nclass StfuEvent extends PublicEvent {\n  handle() {\n    this.context._rtConnection.send({ message: 'stfu' });\n  }\n}\n\nexport default StfuEvent;\n","import BaseEvent from './BaseEvent';\n\nclass IgnoreEvent extends BaseEvent {\n  handle() {\n    // do nothing.\n  }\n}\n\nexport default IgnoreEvent;\n","import BaseEvent from './BaseEvent';\n\nclass ForwardEvent extends BaseEvent {\n  handle(msg) {\n    this.context.listeners.forEach(callback => callback(msg));\n  }\n}\n\nexport default ForwardEvent;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  const {navigator} = window;\n\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions. Native support planned for Chrome M77.\n      if (browserDetails.version < 78 &&\n        arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\nexport function fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    const nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track) {\n        const stream = arguments[1];\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (!this._localStreams.includes(stream)) {\n            this._localStreams.push(stream);\n          }\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter = adapterFactory({window});\nexport default adapter;\n","import FeatureDetector from './FeatureDetector';\n\n/**\n * Wrapper around localStorage API in order to prefix keys to be stored and\n * offer default values on demand. If no localStorage is provided by\n * the user-agent, we use a temporary fallbackStorage.\n **/\nexport default (function() {\n  const prefix = 'eyeson.';\n  let fallbackStorage = {};\n  const hasLocalStorage = FeatureDetector.hasLocalStorage();\n\n  return {\n    store: function(key, value) {\n      if (!hasLocalStorage) {\n        fallbackStorage[key] = value;\n        return;\n      }\n      window.localStorage.setItem(prefix + key, JSON.stringify(value));\n    },\n    load: function(key, defaultValueParam) {\n      let defaultValue = defaultValueParam;\n      if (typeof defaultValue === 'object' && !Array.isArray(defaultValue)) {\n        defaultValue = Object.assign({}, defaultValue);\n      }\n      if (!hasLocalStorage) {\n        return fallbackStorage[key] || defaultValue;\n      }\n      let storedValue = window.localStorage.getItem(prefix + key);\n      if (!storedValue) {\n        return defaultValue;\n      }\n      return JSON.parse(storedValue);\n    }\n  };\n}());\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","import screenfull from 'screenfull';\n\nclass FullscreenHelper {\n  constructor() {\n    this.onChange = this.onChange.bind(this);\n    this.hasSupport = Boolean(screenfull.isEnabled);\n  }\n\n  toggle() {\n    return this.isFullscreen() ? screenfull.exit() : screenfull.request();\n  }\n\n  canFullscreen() {\n    return this.hasSupport;\n  }\n\n  isFullscreen() {\n    return this.hasSupport && screenfull.isFullscreen;\n  }\n\n  onChange(callback) {\n    if (!this.hasSupport) {\n      return;\n    }\n\n    screenfull.on('change', () => callback(this.isFullscreen()));\n  }\n\n  off() {\n    if (!this.hasSupport) {\n      return;\n    }\n\n    screenfull.off('change');\n  }\n}\n\nexport default FullscreenHelper;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport adapter from 'webrtc-adapter';\nimport platform from 'platform';\nimport FullscreenHelper from './FullscreenHelper';\n\n/**\n * Feature Detector.\n **/\nexport default (function() {\n  return {\n    environment: function() {\n      return {\n        canMix: this.canMix(),\n        canPip: this.hasPipSupport(),\n        canSFU: this.canSFU(),\n        isPhone: this.isPhone(),\n        inIframe: this.inIframe(),\n        canUseEyeson: this.canUseEyeson(),\n        canFullscreen: this.canFullscreen(),\n        hasMobileDevice: this.hasMobileDevice(),\n        canToggleCamera: this.canToggleCamera(),\n        canPresentFiles: this.canPresentFiles(),\n        canScreenCapture: this.canScreenCapture(),\n        canAdjustSettings: this.canAdjustDeviceSettings(),\n        isExperimentalBrowser: this.isExperimentalBrowser()\n      };\n    },\n\n    platform: () => platform,\n\n    /**\n     * Test if browser should be able to use eyeson.\n     **/\n    canUseEyeson: function() {\n      return (\n        !this.isWebView() &&\n        this.hasGetUserMedia() &&\n        this.hasPeerConnection() &&\n        this.isRecentBrowser()\n      );\n    },\n\n    hasGetUserMedia: function() {\n      return (\n        'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices\n      );\n    },\n\n    hasGetDisplayMedia: function() {\n      return (\n        'mediaDevices' in navigator &&\n        'getDisplayMedia' in navigator.mediaDevices\n      );\n    },\n\n    hasPeerConnection: function() {\n      return 'RTCPeerConnection' in window;\n    },\n\n    isRecentBrowser: function() {\n      if (this.isChrome()) {\n        return this.isRecentChrome();\n      }\n      if (this.isFF()) {\n        return this.isRecentFF();\n      }\n      if (this.isEdge()) {\n        return this.isRecentEdge();\n      }\n      if (this.isSafari()) {\n        return this.isRecentSafari();\n      }\n      return false;\n    },\n\n    hasCaptureStream: function() {\n      return (\n        'captureStream' in window.HTMLMediaElement.prototype ||\n        'mozCaptureStream' in window.HTMLMediaElement.prototype\n      );\n    },\n\n    hasCanvasCaptureSupport: function() {\n      return (\n        'CanvasCaptureMediaStream' in window ||\n        'CanvasCaptureMediaStreamTrack' in window\n      );\n    },\n\n    hasSenders: function() {\n      return 'RTCRtpSender' in window;\n    },\n\n    /**\n     * 07 Aug 2019 - Safari doesn't seem to fire the event properly.\n     **/\n    hasTrackOnUnmute: function() {\n      if (this.isSafari() || this.isEdge()) {\n        return false;\n      }\n      return 'onunmute' in MediaStreamTrack.prototype;\n    },\n\n    /**\n     * https://caniuse.com/#feat=webp\n     **/\n    hasWebpSupport: function() {\n      if (this.isRecentChrome()) {\n        return true;\n      }\n      if (this.isFF()) {\n        return adapter.browserDetails.version >= 65;\n      }\n      if (this.isEdge()) {\n        return true;\n      }\n\n      return false;\n    },\n    /**\n     * Test if user agent supports changing of audio output.\n     **/\n    canChangeAudioOutput: function() {\n      return 'setSinkId' in document.createElement('video');\n    },\n\n    /**\n     * Test if user agent supports changing the microphone.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeMicrophone: function() {\n      return adapter.browserDetails.browser !== 'safari' && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports remembering devices.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeCamera: function() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports screen capture feature.\n     **/\n    canScreenCapture: function() {\n      if (this.isTestSuite() || !this.canUseEyeson() || this.isEdge()) {\n        return false;\n      }\n      return (\n        this.hasGetDisplayMedia() || (this.isFF() && this.hasGetUserMedia())\n      );\n    },\n\n    canPresentFiles: function() {\n      if (\n        this.isTestSuite() ||\n        !this.canUseEyeson() ||\n        this.isEdge() ||\n        (this.isFF() && adapter.browserDetails.version <= 60) ||\n        this.isIOSDevice()\n      ) {\n        return false;\n      }\n      return true;\n    },\n\n    /**\n     * Unfortunately we had issues with higher resolution constraints on\n     * Safari (iOS and Mac).\n     **/\n    requiresLowerConstraints: function() {\n      return adapter.browserDetails.browser === 'safari';\n    },\n\n    browserName: function() {\n      let name = adapter.browserDetails.browser.replace(/\\w\\S*/g, txt => {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n      return name;\n    },\n\n    browserVersion: function() {\n      return adapter.browserDetails.version;\n    },\n\n    isEdge: function() {\n      return adapter.browserDetails.browser === 'edge';\n    },\n\n    isFF: function() {\n      return adapter.browserDetails.browser === 'firefox';\n    },\n\n    isChrome: function() {\n      return adapter.browserDetails.browser === 'chrome';\n    },\n\n    isSafari: function() {\n      return adapter.browserDetails.browser === 'safari';\n    },\n\n    /**\n     * Older versions of Edge (20.10240) et al. pass through adapter until\n     * they hit RTCIceTransport and blow up.\n     **/\n    isRecentEdge: function() {\n      if (!this.isEdge()) {\n        return false;\n      }\n      return adapter.browserDetails.version > 15000;\n    },\n\n    /**\n     * https://en.wikipedia.org/wiki/Firefox_version_history\n     * A customer is on WinXP (hello 2019) and FF seems\n     * to be locked at 52 with an extended support version on that OS.\n     * May god have mercy on those poor souls.\n     **/\n    isRecentFF: function() {\n      if (!this.isFF()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 52;\n    },\n\n    /**\n     * https://en.wikipedia.org/wiki/Google_Chrome_version_history\n     **/\n    isRecentChrome: function() {\n      if (!this.isChrome()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 70;\n    },\n\n    isRecentSafari: function() {\n      if (!this.isSafari()) {\n        return false;\n      }\n      return adapter.browserDetails.version >= 10;\n    },\n\n    isExperimentalBrowser: function() {\n      return ['safari', 'edge'].includes(adapter.browserDetails.browser);\n    },\n\n    /**\n     * Unfortunately Safari on iOS pauses the local camera during PIP,\n     * and afterwards the remote video is frozen.\n     **/\n    hasPipSupport: function() {\n      const video = document.createElement('video');\n      const hasSupport = Boolean(\n        video.webkitSupportsPresentationMode ||\n          'pictureInPictureEnabled' in document\n      );\n      if (video.remove) {\n        video.remove();\n      }\n      return hasSupport && !this.isIOSDevice();\n    },\n\n    /**\n     * Check user agent if it is an Android device.\n     **/\n    isAndroidDevice: function() {\n      return Boolean(navigator.userAgent.match(/Android/i));\n    },\n\n    /**\n     * Check user agent if it is an iOS device.\n     **/\n    isIOSDevice: function() {\n      return Boolean(navigator.userAgent.match(/iPhone|iPad|iPod/i));\n    },\n\n    /**\n     * Check user agent if it is an iPhone.\n     **/\n    isIPhone: function() {\n      return Boolean(navigator.userAgent.match(/iPhone/i));\n    },\n\n    /**\n     * As a solution for mobile sites, our Android engineers recommend to\n     * specifically detect “mobile” in the User-Agent string as well as\n     * “android.”\n     *\n     * https://webmasters.googleblog.com/2011/03/mo-better-to-also-detect-mobile-user.html\n     **/\n    isAndroidPhone: function() {\n      const isAndroid = /(android)/i.test(navigator.userAgent);\n      const isMobile = /(mobile)/i.test(navigator.userAgent);\n      return isAndroid && isMobile;\n    },\n\n    /**\n     * Is the app running inside an iFrame.\n     * https://stackoverflow.com/a/326076/980524\n     **/\n    inIframe: function() {\n      try {\n        return window.self !== window.top;\n      } catch (error) {\n        return true;\n      }\n    },\n\n    /**\n     * Phone vs. tablet\n     **/\n    isPhone: function() {\n      return this.isIPhone() || this.isAndroidPhone();\n    },\n\n    /**\n     * ...\n     **/\n    hasMobileDevice: function() {\n      return this.isIOSDevice() || this.isAndroidDevice();\n    },\n\n    /**\n     * Is the app running on a touch device.\n     * https://stackoverflow.com/a/4819886/980524\n     * Note: touch device, might be a laptop with a touch display or those\n     * dell tablets we have laying around here.\n     **/\n    isTouchDevice: function() {\n      return Boolean('ontouchstart' in window || navigator.maxTouchPoints);\n    },\n\n    /**\n     * Unfortunately the facebook streaming procedure doesn't work on Safari\n     * on iOS. Facebook's popup hints that it is not compatible with EDGE.\n     **/\n    canLiveStreamToFacebook: function() {\n      return !this.isIOSDevice() && !this.isEdge() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't propagate tap events to react when we have display tooltips.\n     * This results in annoying \"double taps\" from the user.\n     * But the tooltips aren't designed for touch devices anyway.\n     **/\n    canDisplayTooltips: function() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canAdjustDeviceSettings: function() {\n      return !this.isIOSDevice();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canToggleCamera: function() {\n      return !this.isIOSDevice();\n    },\n\n    canMix: function() {\n      return (\n        this.isChrome() && this.canScreenCapture() && this.hasCaptureStream()\n      );\n    },\n\n    /**\n     * Browsers don't behave the same way when setting the .enabled property of\n     * a MediaSTreamTrack to false.\n     * In Chrome (as of May 2019) the activity indicator stays active even if\n     * the track is disabled (enabled: false).\n     * https://bugs.chromium.org/p/webrtc/issues/detail?id=5942\n     * While in Firefox the indicator is turned off.\n     */\n    stopsDeviceActivityIndicatorOnDisable: function() {\n      if (this.isFF()) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Edge doesn't have this property and raises an error when trying to\n     * access it.\n     **/\n    supportsBlurOnSVG: function() {\n      return (\n        typeof SVGElement !== 'undefined' &&\n        typeof SVGElement.prototype.blur !== 'undefined'\n      );\n    },\n\n    /**\n     * Chrome will throw a SecurityException when trying to read the\n     * `localStorage` property.\n     **/\n    hasLocalStorage: function() {\n      try {\n        const hasLocalStorage =\n          typeof window.localStorage === 'object' &&\n          window.localStorage !== null;\n        window.localStorage.setItem('eyeson.test', 'test');\n        const canGet = window.localStorage.getItem('eyeson.test') === 'test';\n        return hasLocalStorage && canGet;\n      } catch (error) {\n        Logger.debug('FeatureDetector::hasLocalStorage:', error.message);\n        return false;\n      }\n    },\n\n    canFullscreen: function() {\n      return new FullscreenHelper().canFullscreen();\n    },\n\n    isFullscreen: function() {\n      return new FullscreenHelper().isFullscreen();\n    },\n\n    canSFU: function() {\n      const safariWithoutVP8 =\n        this.isSafari() && adapter.browserDetails.version <= 605;\n      return !this.isEdge() && !safariWithoutVP8 && !this.isTestSuite();\n    },\n\n    canShare: function() {\n      return Boolean(navigator.share);\n    },\n\n    /**\n     * https://developer.chrome.com/multidevice/user-agent#webview_user_agent\n     *\n     * If you’re attempting to differentiate between the WebView and Chrome for\n     * Android, you should look for the presence of the Version/_X.X_ string in\n     * the WebView user-agent string.\n     *\n     * In the newer versions of WebView, you can differentiate the WebView by\n     * looking for the wv field as highlighted below\n     **/\n    isWebView: function() {\n      return (\n        /Version\\/|wv/i.test(navigator.userAgent) && this.isAndroidDevice()\n      );\n    },\n\n    /* eslint-disable no-process-env */\n    /* global process */\n    isTestSuite: function() {\n      return (\n        process.env.NODE_ENV === 'test' ||\n        adapter.browserDetails.browser === 'test-suite'\n      );\n    }\n    /* eslint-enable no-process-env */\n  };\n})();\n/* eslint-enable max-lines */\n","/**\n * Ninja Stream\n **/\nclass NinjaStream {\n  constructor() {\n    this._stream = this.createStream();\n  }\n\n  get stream() {\n    return this._stream;\n  }\n\n  /**\n   * Create a dummy stream from a canvas element.\n   **/\n  createStream() {\n    const width = 0;\n    const height = 0;\n    let canvas = Object.assign(document.createElement('canvas'), {\n      width,\n      height\n    });\n    canvas.id = 'eyeson-ninja-stream';\n    canvas.getContext('2d').fillRect(0, 0, width, height);\n    return canvas.captureStream();\n  }\n}\n\nexport default NinjaStream;\n","import FeatureDetector from '../FeatureDetector';\n\nconst CanvasMedia =\n  window.CanvasCaptureMediaStream || window.CanvasCaptureMediaStreamTrack;\n\nexport const hasAudio = stream => {\n  return Boolean(\n    stream &&\n      stream.getAudioTracks().length > 0 &&\n      stream.getAudioTracks()[0].enabled\n  );\n};\n\nexport const hasVideo = stream => {\n  return Boolean(\n    stream &&\n      stream.getVideoTracks().length > 0 &&\n      stream.getVideoTracks()[0].enabled\n  );\n};\n\nexport const disableAudio = stream => {\n  stream.getAudioTracks().forEach(track => (track.enabled = false));\n  return stream;\n};\n\nexport const enableAudio = stream => {\n  stream.getAudioTracks().forEach(track => (track.enabled = true));\n  return stream;\n};\n\n// In order to be \"informed\" about track ending in compose_canvas where we\n// create offscreen/hidden video elements and need to clean them up afterwards,\n// we need to dispatch 'stopped' ourselves. The 'ended' event is not emitted\n// after stopping the track, as one might expect see:\n// https://stackoverflow.com/q/55953038/980524\nexport const stopTrack = track => {\n  track.stop();\n  return track.dispatchEvent(new Event('stopped'));\n};\n\nexport const stopStream = stream => {\n  stream.getTracks().forEach(stopTrack);\n};\n\nconst isScreenTrack = track => {\n  return (\n    /screen|monitor|window|web-contents-media-stream/i.test(track.label) ||\n    track.type === 'screen-track'\n  );\n};\n\nconst isCanvasTrack = track => {\n  return Boolean(\n    (track.type === 'canvas-track' || track instanceof CanvasMedia) &&\n      track.canvas &&\n      track.canvas.id !== 'eyeson-ninja-stream'\n  );\n};\n\nconst isCameraTrack = track => {\n  return !isCanvasTrack(track) && !isScreenTrack(track);\n};\n\nexport const getScreenTracks = stream => {\n  return stream.getVideoTracks().filter(isScreenTrack);\n};\n\nexport const getCameraTracks = stream => {\n  return stream.getVideoTracks().filter(isCameraTrack);\n};\n\nexport const stopCamera = stream => {\n  getCameraTracks(stream).forEach(stopTrack);\n};\n\nexport const disableCamera = stream => {\n  getCameraTracks(stream).forEach(track => (track.enabled = false));\n  return stream;\n};\n\nexport const enableCamera = stream => {\n  getCameraTracks(stream).forEach(track => (track.enabled = true));\n  return stream;\n};\n\nexport const toggleCamera = (stream, enabled) => {\n  getCameraTracks(stream).forEach(track => (track.enabled = enabled));\n  return stream;\n};\n\nexport const getCanvasTracks = stream => {\n  // current FF implementation\n  if (stream instanceof CanvasMedia) {\n    return stream.getVideoTracks();\n  }\n\n  return stream.getVideoTracks().filter(isCanvasTrack);\n};\n\nexport const isScreenStream = stream => {\n  return hasVideo(stream) && stream.getVideoTracks().some(isScreenTrack);\n};\n\nexport const isCanvasStream = stream => {\n  if (!FeatureDetector.hasCanvasCaptureSupport()) {\n    return false;\n  }\n\n  return stream.getVideoTracks().some(isCanvasTrack);\n};\n\nexport const isCameraStream = stream => {\n  return hasVideo(stream) && !isScreenStream(stream) && !isCanvasStream(stream);\n};\n\nexport const isCanvasPresentationStream = stream => {\n  if (!stream) {\n    return false;\n  }\n  return isCanvasStream(stream) && stream.getVideoTracks().some(isCanvasTrack);\n};\n\nexport const isPresentationStream = stream => {\n  return isScreenStream(stream) || isCanvasStream(stream);\n};\n\nexport const hasCameraVideo = stream => {\n  return getCameraTracks(stream).some(track => track.enabled);\n};\n\n// try to make FF's captureStream handling track based.\nexport const captureStream = canvas => {\n  // NOTE: getContext is needed for firefox, otherwise we get an exception:\n  // NS_ERROR_NOT_INITIALIZED when calling .captureStream on the canvas.\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1257440\n  canvas.getContext('2d');\n\n  // 0 param is fps, but since that doesn't work cross browser, we use 0\n  // and request frames manually.\n  const stream = canvas.captureStream(30);\n\n  const [track] = stream.getVideoTracks();\n  if (!('requestFrame' in track)) {\n    track.type = 'canvas-track';\n    track.canvas = canvas;\n    track.requestFrame = () => stream.requestFrame();\n  }\n\n  return stream;\n};\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport LocalStorage from './LocalStorage';\nimport { stopStream } from './utils/StreamHelpers';\n\n/**\n * eyeson Device Manager used to handle cameras, microphones and speakers.\n **/\nclass DeviceManager {\n  /* eslint-disable max-statements */\n  constructor(options) {\n    this.sinkId = 'default';\n    this.options = options || { audio: true, video: true, eco: false };\n    this.stream = null;\n    this.cameras = [];\n    this.listeners = [];\n    this.speakers = [];\n    this.microphones = [];\n    this.constraints = {};\n    this.terminationInProgress = false;\n\n    DeviceManager.getSinkId().then(sinkId => (this.sinkId = sinkId));\n\n    this.setStream = this.setStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.verifyStream = this.verifyStream.bind(this);\n    this.storeConstraints = this.storeConstraints.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  static getDevices() {\n    if (!('mediaDevices' in navigator)) {\n      return new Promise(res => res([]));\n    }\n    return navigator.mediaDevices.enumerateDevices();\n  }\n\n  /**\n   * Get constraints for specified options { audio: true, video: true }\n   * If a specific device is chosen it has to be stored in localStorage or will\n   * be ignored.\n   **/\n  static getConstraints(optionsParam) {\n    const options = optionsParam || { audio: true, video: true };\n    return DeviceManager.getDevices()\n      .then(devices => {\n        return DeviceManager.determineConstraintsForDevices(devices, options);\n      })\n      .catch(error => {\n        Logger.error('DeviceManager::getConstraints ', error);\n      });\n  }\n\n  /* eslint-disable max-statements */\n  static determineConstraintsForDevices(devices, options) {\n    let constraints = LocalStorage.load('mediaConstraints', options);\n\n    if (!('video' in constraints)) {\n      constraints.video = true;\n    }\n    if (!('audio' in constraints)) {\n      constraints.audio = true;\n    }\n\n    if (constraints.video.deviceId) {\n      const videoDeviceId = constraints.video.deviceId.exact;\n      if (!devices.find(device => device.deviceId === videoDeviceId)) {\n        constraints.video = options.video;\n      }\n    }\n    if (constraints.audio.deviceId) {\n      const audioDeviceId = constraints.audio.deviceId.exact;\n      if (!devices.find(device => device.deviceId === audioDeviceId)) {\n        constraints.audio = options.audio;\n      }\n    }\n\n    if (options.video === false && !options.eco) {\n      constraints.video = false;\n    }\n    if (options.video === true && constraints.video === false) {\n      constraints.video = true;\n    }\n    if (options.audio === true && constraints.audio === false) {\n      constraints.audio = true;\n    }\n\n    // In case we don't have a videoinput device but specify\n    // video: true, we get NotFoundError in FF & DevicesNotFoundError in\n    // Chrome.\n    if (devices.filter(device => device.kind === 'videoinput').length === 0) {\n      constraints.video = false;\n    }\n\n    return constraints;\n  }\n  /* eslint-enable max-statements */\n\n  /**\n   * For now we handle the mobile options and constraints completely separately.\n   * That way we can address the facingMode constraint.\n   **/\n  static getMobileConstraints(options) {\n    let constraints = Object.assign({ audio: true, video: true }, options);\n    return new Promise(res => res(constraints));\n  }\n\n  /**\n   * Get sinkId.\n   **/\n  static getSinkId() {\n    let sinkId = LocalStorage.load('sinkId', '');\n    return DeviceManager.getDevices().then(devices => {\n      if (!devices.find(device => device.deviceId === sinkId)) {\n        sinkId = 'default';\n      }\n      return sinkId;\n    });\n  }\n\n  /**\n   * Return available devices in a friendly format.\n   **/\n  static fetchDevices() {\n    return DeviceManager.getDevices().then(devices => {\n      return {\n        cameras: devices.filter(device => device.kind === 'videoinput'),\n        microphones: devices.filter(device => device.kind === 'audioinput'),\n        speakers: devices.filter(device => device.kind === 'audiooutput')\n      };\n    });\n  }\n\n  static fetchInputDevices() {\n    return DeviceManager.getDevices().then(devices => {\n      return devices.filter(device => device.kind.includes('input'));\n    });\n  }\n\n  /**\n   * Sets cameras, microphones, and speakers and starts a video stream\n   * with supplied options.\n   **/\n  start() {\n    this.watchForNewDevices();\n\n    return DeviceManager.fetchDevices()\n      .then(devices => {\n        this.cameras = devices.cameras;\n        this.microphones = devices.microphones;\n        this.speakers = devices.speakers;\n        this.options.audio =\n          this.microphones.length > 0 ? this.options.audio : false;\n        this.options.video =\n          this.cameras.length > 0 ? this.options.video : false;\n        this.options.eco = this.options.eco;\n        this.emit(devices);\n        return devices;\n      })\n      .then(() => DeviceManager.getConstraints(this.options))\n      .then(constraints => {\n        this.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia({\n          video: this.options.eco ? false : this.constraints.video,\n          audio: this.constraints.audio || true\n        });\n      })\n      .then(this.adjustAudioTrack)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  stopStream() {\n    if (!this.stream) {\n      return;\n    }\n\n    stopStream(this.stream);\n    this.stream = null;\n  }\n\n  /**\n   * Stop the media stream. Since we call getUserMedia on gotDevices we don't\n   * have a stream in that case.\n   **/\n  stop() {\n    this.stopStream();\n  }\n\n  terminate() {\n    this.terminationInProgress = true;\n    window.setTimeout(() => this.stop(), 10);\n  }\n\n  watchForNewDevices() {\n    navigator.mediaDevices.ondevicechange = () => {\n      DeviceManager.fetchDevices()\n        .then(devices => this.emit(devices))\n        .catch(this.handleError);\n    };\n  }\n\n  /**\n   * Register listeners for changes on devices.\n   **/\n  onChange(callback) {\n    this.listeners.push(callback);\n  }\n\n  /**\n   * Remove a listener.\n   **/\n  removeListener(callback) {\n    this.listeners = this.listeners.filter(listener => listener !== callback);\n  }\n\n  /**\n   * Wrapper around mediaDevices getUserMedia. Ensures a running stream is\n   * stopped and a new one started with newly defined constraints.\n   **/\n  update(constraints) {\n    this.constraints = constraints || this.constraints;\n    this.stop();\n\n    navigator.mediaDevices\n      .getUserMedia(this.constraints)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  /**\n   * Similar to update but instead of directly supplying constraints,\n   * update with options.\n   **/\n  updateWithOptions(options) {\n    this.options = options || this.options;\n    this.stop();\n\n    this.watchForNewDevices();\n\n    return DeviceManager.getConstraints(this.options)\n      .then(constraints => {\n        this.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia({\n          video: this.options.eco ? false : this.constraints.video,\n          audio: this.constraints.audio || true\n        });\n      })\n      .then(this.adjustAudioTrack)\n      .then(this.setStream)\n      .catch(this.handleError);\n  }\n\n  adjustAudioTrack(stream) {\n    if (stream.getAudioTracks().length === 1) {\n      stream.getAudioTracks()[0].enabled = this.options.audio;\n    }\n    return stream;\n  }\n\n  storeConstraints() {\n    Logger.debug('DeviceManager::storeConstraints', this.constraints);\n    LocalStorage.store('mediaConstraints', this.constraints);\n    LocalStorage.store('sinkId', this.sinkId);\n  }\n\n  /**\n   * Set active stream.\n   *\n   * NOTE: This can be called _after_ we have already stopped.\n   **/\n  setStream(stream) {\n    this.stream = stream;\n    if (this.terminationInProgress) {\n      this.stop();\n    }\n\n    this.emit({\n      stream: this.stream,\n      constraints: this.constraints,\n      options: this.options\n    });\n    this.verifyStream();\n  }\n\n  verifyStream() {\n    if (\n      this.constraints.video &&\n      this.stream &&\n      this.stream.getVideoTracks().length === 0 &&\n      !this.options.eco\n    ) {\n      this.handleError({ name: 'EyesonCameraError' });\n    }\n\n    if (\n      this.constraints.audio &&\n      this.stream &&\n      this.stream.getAudioTracks().length === 0\n    ) {\n      this.handleError({ name: 'EyesonMicrophoneError' });\n    }\n  }\n\n  /**\n   * Set video input selection.\n   **/\n  setVideoInput(deviceId) {\n    let videoConstraints = {};\n    Object.assign(videoConstraints, this.constraints.video, {\n      deviceId: { exact: deviceId }\n    });\n    this.constraints.video = videoConstraints;\n    this.update();\n  }\n\n  /**\n   * Set audio input selection.\n   **/\n  setAudioInput(deviceId) {\n    let audioConstraints = {};\n    Object.assign(audioConstraints, this.constraints.audio, {\n      deviceId: { exact: deviceId }\n    });\n    this.constraints.audio = audioConstraints;\n    this.update();\n  }\n\n  /**\n   * Set and store audio output selection.\n   **/\n  setAudioOutput(sinkId) {\n    this.sinkId = sinkId;\n    LocalStorage.store('sinkId', this.sinkId);\n    this.emit({ sinkId: this.sinkId });\n  }\n\n  handleError(error) {\n    Logger.error('DeviceManager::', error);\n    this.emit({ error: error, constraints: this.constraints });\n  }\n\n  /**\n   * emit bound listeners about changes.\n   **/\n  emit(state) {\n    this.listeners.forEach(listener => listener(state));\n  }\n}\n\nexport default DeviceManager;\n/* eslint-enable max-lines */\n","import Logger from './Logger';\nimport NinjaStream from './NinjaStream';\nimport DeviceManager from './DeviceManager';\nimport FeatureDetector from './FeatureDetector';\nimport {\n  stopTrack,\n  captureStream,\n  isCanvasPresentationStream,\n  isScreenStream,\n  getScreenTracks,\n  getCanvasTracks,\n  stopCamera\n} from './utils/StreamHelpers.js';\n\n/**\n * Options are basically what the user of MediaStreamBuilder \"wants\" to see in\n * the conference session. For example: no camera video -> options video: false\n * but we'd still have a media stream track with video because conference server\n * currently expects this behaviour and relies on mute_video command being\n * sent.\n **/\nclass MediaStreamBuilder {\n  constructor(\n    options = {\n      eco: false,\n      audio: true,\n      video: true,\n      screen: false,\n      canvas: null,\n      existingStream: null\n    }\n  ) {\n    this.options = options;\n\n    this.getMediaStream = this.getMediaStream.bind(this);\n    this.addNinjaTrack = this.addNinjaTrack.bind(this);\n    this.addCanvasTrack = this.addCanvasTrack.bind(this);\n    this.addScreenTrack = this.addScreenTrack.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n    this.adjustVideoTrack = this.adjustVideoTrack.bind(this);\n  }\n\n  /**\n   * We always acquire a stream with at least audio enabled and adjust\n   * the desired mute behaviour via the track.\n   * Unless, we have no camera and microphones. In that case we use a\n   * NinjaStream.\n   * If the browser does not support updating the peerConnection\n   * we acquire a audio and video stream and adjust the tracks accordingly.\n   *\n   * In case of replaceTrack support we stop the tracks before\n   * acquiring a new stream. Since stopping a track also stops the source.\n   * So, at least in Safari we'd stop the camera if the old and new track\n   * use the same source.\n   * Furthermore Safari on iOS behaves differently again. Camera muting\n   * _sometimes_ freezes the remote stream video playback (audio fine).\n   **/\n  start() {\n    Logger.debug('MediaStreamBuilder::start', this.options);\n    const { existingStream, video, screen } = this.options;\n\n    if (FeatureDetector.isIOSDevice() && existingStream) {\n      return new Promise((resolve, reject) => {\n        try {\n          existingStream.getVideoTracks()[0].enabled = video;\n          resolve(existingStream);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n\n    if (FeatureDetector.isSafari() && screen) {\n      return navigator.mediaDevices\n        .getDisplayMedia({ video: true })\n        .then(stream => {\n          return navigator.mediaDevices\n            .getUserMedia({ audio: true })\n            .then(audioStream => {\n              stream.addTrack(audioStream.getAudioTracks()[0], stream);\n              return stream;\n            });\n        })\n        .then(this.adjustAudioTrack)\n        .then(stream => {\n          const [screenTrack] = stream.getVideoTracks();\n          screenTrack.type = 'screen-track';\n          return stream;\n        });\n    }\n\n    return DeviceManager.fetchInputDevices()\n      .then(this.getMediaStream)\n      .then(this.adjustVideoTrack)\n      .then(this.adjustAudioTrack)\n      .then(this.addCanvasTrack)\n      .then(this.addScreenTrack)\n      .then(this.addNinjaTrack)\n      .catch(error => {\n        Logger.error('MediaStreamBuilder::start ', error, error.message);\n        return Promise.reject(error);\n      });\n  }\n\n  getMediaStream(devices) {\n    if (devices.length === 0) {\n      this.options = { audio: false, video: false };\n      return new NinjaStream().stream;\n    }\n    const { eco, video, existingStream } = this.options;\n    const options = {\n      video: FeatureDetector.hasCaptureStream() || eco ? video : true,\n      audio: true\n    };\n\n    if (FeatureDetector.isPhone() && existingStream) {\n      stopCamera(existingStream);\n      return DeviceManager.getMobileConstraints(options).then(\n        navigator.mediaDevices.getUserMedia\n      );\n    }\n\n    return DeviceManager.getConstraints(options).then(constraints => {\n      return navigator.mediaDevices.getUserMedia(constraints);\n    });\n  }\n\n  /**\n   * Adjust audio and video tracks according to the supplied options.\n   * We stop the video track so the camera indicator isn't active.\n   * We add a filler video track, unless we're in eco mode, which would result\n   * in sdp with media section for video & recvonly. meaning we'd still\n   * receive video.\n   **/\n  adjustVideoTrack(stream) {\n    if (stream.getVideoTracks().length === 1) {\n      const [vTrack] = stream.getVideoTracks();\n      vTrack.enabled = this.options.video;\n      if (this.options.video === false) {\n        stopTrack(vTrack);\n      }\n    }\n    return stream;\n  }\n\n  adjustAudioTrack(stream) {\n    if (stream.getAudioTracks().length === 1) {\n      stream.getAudioTracks()[0].enabled = this.options.audio;\n    }\n    return stream;\n  }\n\n  addCanvasTrack(stream) {\n    const { canvas, existingStream } = this.options;\n    if (canvas) {\n      const canvasStream = captureStream(canvas);\n      const [canvasTrack] = getCanvasTracks(canvasStream);\n      stream.addTrack(canvasTrack, stream);\n    }\n    if (isCanvasPresentationStream(existingStream)) {\n      const [canvasTrack] = getCanvasTracks(existingStream);\n      stream.addTrack(canvasTrack, stream);\n    }\n    return stream;\n  }\n\n  async addScreenTrack(stream) {\n    const { screen, existingStream } = this.options;\n    if (screen) {\n      // options required for SAFARI\n      const screenStream = await this.getDisplayMedia();\n      const [screenTrack] = screenStream.getVideoTracks();\n      screenTrack.type = 'screen-track';\n      stream.addTrack(screenTrack, stream);\n    }\n    if (isScreenStream(existingStream)) {\n      const [screenTrack] = getScreenTracks(existingStream);\n      stream.addTrack(screenTrack, stream);\n    }\n    return stream;\n  }\n\n  getDisplayMedia() {\n    if (FeatureDetector.hasGetDisplayMedia()) {\n      return navigator.mediaDevices.getDisplayMedia({\n        video: {\n          width: { max: 1920 },\n          height: { max: 1080 },\n          frameRate: { max: 15 }\n        }\n      });\n    }\n    return navigator.mediaDevices.getUserMedia({\n      video: {\n        mediaSource: 'screen',\n        width: { max: 1920 },\n        height: { max: 1040 },\n        frameRate: { max: 15 }\n      }\n    });\n  }\n\n  addNinjaTrack(stream) {\n    const { eco, video } = this.options;\n    if (eco || !FeatureDetector.hasCaptureStream()) {\n      return stream;\n    }\n    if (stream.getVideoTracks().length === 0) {\n      const [fillerTrack] = new NinjaStream().stream.getVideoTracks();\n      fillerTrack.enabled = video;\n      stream.addTrack(fillerTrack, stream);\n    }\n    return stream;\n  }\n}\n\nexport default MediaStreamBuilder;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport FeatureDetector from '../FeatureDetector';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nconst adjustMediaStreamTracks = (stream, audio, video) => {\n  stream.getAudioTracks().forEach(track => (track.enabled = audio));\n  stream.getVideoTracks().forEach(track => (track.enabled = video));\n  stream.locallyChanged = true;\n  return stream;\n};\n\n/**\n * ChangeLocalStream (optimization after PodiumEvent).\n **/\nclass ChangeLocalStreamEvent extends BaseEvent {\n  handle({ audio, video }) {\n    Logger.debug('ChangeLocalStreamEvent::handle');\n    const { _session } = this.context;\n\n    if (FeatureDetector.isIOSDevice()) {\n      const adjustedStream = adjustMediaStreamTracks(\n        _session.localStream,\n        audio,\n        video\n      );\n      _session.emit({ type: 'stream_update', localStream: adjustedStream });\n      return;\n    }\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: video,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        stream.locallyChanged = true;\n        _session.setStream(stream);\n      })\n      .catch(Logger.error);\n  }\n}\n\nexport default ChangeLocalStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport ForwardEvent from './ForwardEvent';\nimport FeatureDetector from '../FeatureDetector';\nimport ChangeLocalStreamEvent from './ChangeLocalStreamEvent';\nimport {\n  isPresentationStream,\n  isCameraStream,\n  hasAudio,\n  hasVideo\n} from './../utils/StreamHelpers';\n\nclass PodiumEvent extends BaseEvent {\n  handle(msg) {\n    // For dev\n    if (!this.context._session) {\n      return;\n    }\n    Logger.debug('PodiumEvent::handle', msg);\n    const { _session } = this.context;\n    const { localStream } = _session;\n\n    if (!msg.hasPresenter && isPresentationStream(localStream)) {\n      _session.emit({ type: 'stop_presenting' });\n    }\n\n    if (_session) {\n      this.scanMessageForLocalStreamOptimization(localStream, msg);\n    }\n\n    new ForwardEvent(this.context).handle(msg);\n  }\n\n  // Optimization to avoid streaming when not on video podium.\n  // First, we need a localStream, then we avoid adjustments when we initially\n  // join the room (isSource) and finally if we're not on the podium,\n  // but have a local camera stream with video, we change our local stream.\n  //\n  // We only re-activate the camera in the opposite case if the current\n  // localStream was locallyChanged (through this optimization) since we\n  // want to avoid situations where a user doesn't expect to be on the video\n  // podium and we suddenly turned on their camera.\n  //\n  // Last case: someone else is presenting (screen share or canvas presentation)\n  // we're still on the video podium but not actively presenting.\n  scanMessageForLocalStreamOptimization(localStream, msg) {\n    const { media, video, isSource, isPresenter, hasDesktopSources } = msg;\n\n    if (!localStream) {\n      return;\n    }\n\n    if (FeatureDetector.isFF()) {\n      return;\n    }\n\n    if (\n      !media &&\n      isSource &&\n      ((!video && isCameraStream(localStream)) ||\n        (video && !hasVideo(localStream) && localStream.locallyChanged))\n    ) {\n      new ChangeLocalStreamEvent(this.context).handle({\n        audio: hasAudio(localStream),\n        video: video\n      });\n    }\n\n    if (video && !isPresenter && hasDesktopSources) {\n      new ChangeLocalStreamEvent(this.context).handle({\n        audio: hasAudio(localStream),\n        video: false\n      });\n    }\n  }\n}\n\nexport default PodiumEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SnapshotEvent extends BaseEvent {\n  handle() {\n    this.context._api.takeSnapshot();\n  }\n}\n\nexport default SnapshotEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SetLayerEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.setLayer(msg.params);\n  }\n}\n\nexport default SetLayerEvent;\n","import BaseEvent from './BaseEvent';\n\nclass SendChatEvent extends BaseEvent {\n  handle(msg) {\n    this.context._session.send({\n      type:    'chat',\n      content: msg.content\n    });\n  }\n}\n\nexport default SendChatEvent;\n\n","import BaseEvent from './BaseEvent';\n\nclass SetLayoutEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.setLayout(msg.params);\n  }\n}\n\nexport default SetLayoutEvent;\n","/**\n * This is where we keep the list of sip events we're interested in forwarding.\n **/\nexport default [\n  'chat',\n  'recording',\n  'memberlist',\n  'source_update',\n  'voice_activity',\n  'stream_offer'\n];\n","/**\n * Podium Facade.\n **/\nclass PodiumFacade {\n  constructor(message, userId) {\n    const { src = [], psrc, asrc, vsrc, dsrc } = message;\n    this.sources = src;\n    this.presenterIdx = psrc;\n    this.audioSources = asrc;\n    this.videoSources = vsrc;\n    this.desktopSources = dsrc;\n    this.userId = userId;\n    this.userSourceIndex = this.sources.indexOf(this.userId);\n  }\n\n  get isSolo() {\n    const uniqueSources = Array.from(new Set(this.sources))\n    return uniqueSources.length === 1 && this.sources[0] === this.userId;\n  }\n\n  get isSource() {\n    return this.sources.includes(this.userId);\n  }\n\n  get isPresenter() {\n    return this.hasPresenter && this.presenter === this.userId;\n  }\n\n  get presenter() {\n    return this.hasPresenter && this.sources[this.presenterIdx];\n  }\n\n  get hasMedia() {\n    return this.sources.some(source => (/media/).test(source));\n  }\n\n  get hasPresenter() {\n    return !isNaN(this.presenterIdx);\n  }\n\n  get hasVideoSources() {\n    return Boolean(this.videoSources);\n  }\n\n  get hasDesktopSources() {\n    return !isNaN(parseInt(this.desktopSources, 10));\n  }\n\n  get hasAudioPosition() {\n    return this.audioSources.includes(this.userSourceIndex);\n  }\n\n  get hasVideoPosition() {\n    return this.videoSources.includes(this.userSourceIndex);\n  }\n\n  get hasMutedVideoPeers() {\n    return (\n      !this.hasDesktopSources &&\n      this.videoSources.filter(source => source !== this.userSourceIndex)\n        .length === 0\n    );\n  }\n}\n\nexport default PodiumFacade;\n","import Logger from './Logger';\nimport PodiumFacade from './PodiumFacade';\n\n/**\n * SipMessageTransformer\n **/\nclass SipMessageTransformer {\n  constructor(user, opts) {\n    this.opts = Object.assign({}, this.defaultOptions, opts);\n    this.user = user;\n    this.debug = this.debug.bind(this);\n    this.stamp = this.stamp.bind(this);\n    this.default = this.default.bind(this);\n    this.process = this.process.bind(this);\n    this.sourceUpdate = this.sourceUpdate.bind(this);\n    this.voiceActivity = this.voiceActivity.bind(this);\n  }\n\n  get defaultOptions() {\n    return { debug: true };\n  }\n\n  debug(...args) {\n    if (this.opts.debug) {\n      Logger.debug(args);\n    }\n  }\n\n  /**\n   * Put a stamp with _src on the message.\n   **/\n  stamp(message) {\n    return Object.assign({ _src: 'sip' }, message);\n  }\n\n  process(message) {\n    /* eslint-disable camelcase */\n    const transformation =\n      {\n        source_update: this.sourceUpdate,\n        voice_activity: this.voiceActivity\n      }[message.type] || this.default;\n    /* eslint-enable camelcase */\n\n    return transformation(this.stamp(message));\n  }\n\n  default(message) {\n    this.debug('SipMessageTransformer::default', message);\n    return message;\n  }\n\n  sourceUpdate(message) {\n    this.debug('SipMessageTransformer::sourceUpdate', message);\n\n    const podium = new PodiumFacade(message, this.user.uri);\n\n    const transformed = Object.assign({\n      type: 'podium',\n      solo: podium.isSolo,\n      audio: podium.hasAudioPosition,\n      video: podium.hasVideoPosition,\n      media: podium.hasMedia,\n      sources: podium.sources,\n      isSource: podium.isSource,\n      presenter: podium.presenter,\n      isPresenter: podium.isPresenter,\n      hasPresenter: podium.hasPresenter,\n      videoSources: podium.videoSources,\n      hasVideoSources: podium.hasVideoSources,\n      hasDesktopSources: podium.hasDesktopSources,\n      hasMutedVideoPeers: podium.hasMutedVideoPeers\n    });\n\n    return transformed;\n  }\n\n  voiceActivity(message) {\n    this.debug('SipMessageTransformer::voiceActivity', message);\n\n    // we rename the type here so we can use 'voice_activity' for passing to the\n    // ui\n    const transformed = Object.assign({\n      type: 'voice_activity_raw',\n      on: message.on,\n      userId: message.cid.split('@').shift()\n    });\n\n    return transformed;\n  }\n}\n\nexport default SipMessageTransformer;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport FeatureDetector from './FeatureDetector';\nimport 'webrtc-adapter';\nimport {\n  stopTrack,\n  getCanvasTracks,\n  isCanvasPresentationStream\n} from './utils/StreamHelpers';\n\n/**\n * SessionDescriptionHandler\n * This class implements a couple of methods that SIP.js expects.\n * For more details see:\n * https://sipjs.com/api/0.11.0/sessionDescriptionHandler/\n */\nclass SessionDescriptionHandler {\n  constructor(session, options) {\n    this.options = options || {};\n    this.session = session;\n    this.connection =\n      session.passedOptions.sessionDescriptionHandlerOptions.connection;\n    this.CONTENT_TYPE = 'application/sdp';\n    this.initPeerConnection();\n  }\n\n  /**\n   * Gets the local description from the underlying media implementation\n   */\n  getDescription(options, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::getDescription:',\n      options,\n      modifiers\n    );\n    this.localStream = options.stream;\n\n    this.localStream.getTracks().forEach(track => {\n      this.peerConnection.addTrack(track, this.localStream);\n    });\n\n    return this.createOfferOrAnswer(options.RTCConstraints, modifiers).then(\n      sdp => {\n        return { body: sdp, contentType: this.CONTENT_TYPE };\n      }\n    );\n  }\n\n  /**\n   * Set the remote description to the underlying media implementation\n   */\n  setDescription(sessionDescription, options, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::setDescription:',\n      sessionDescription,\n      options,\n      modifiers\n    );\n\n    const description = new RTCSessionDescription({\n      type: this.hasOffer('local') ? 'answer' : 'offer',\n      sdp: sessionDescription\n    });\n\n    return this.peerConnection.setRemoteDescription(description).then(() => {\n      this.session.passedOptions.sessionDescriptionHandlerOptions.remoteDescriptionUpdate(\n        description\n      );\n    });\n  }\n\n  /**\n   * Check if the Session Description Handler can handle the Content-Type\n   * described by a SIP Message\n   */\n  hasDescription(contentType) {\n    Logger.debug('SessionDescriptionHandler::hasDescription:', contentType);\n    return contentType === this.CONTENT_TYPE;\n  }\n\n  /**\n   * This accessor returns the direction of flow for the Session Description\n   * Handler. It is intended to be used as a hold indicator.\n   */\n  getDirection() {\n    Logger.warn('SessionDescriptionHandler::getDirection: NOT IMPLEMENTED');\n  }\n\n  /**\n   * The modifier that should be used when the session would like to place\n   * the call on hold\n   */\n  holdModifier(description) {\n    Logger.warn(\n      'SessionDescriptionHandler::holdModifier: NOT IMPLEMENTED.',\n      description\n    );\n  }\n\n  close() {\n    Logger.debug('SessionDescriptionHandler::close');\n    if (!this.peerConnectionClosed()) {\n      this.stopAllTracks();\n      this.peerConnection.close();\n      clearTimeout(this.iceCheckingTimeout);\n      Logger.debug(\n        'SessionDescriptionHandler::close ' +\n          'Stopped streams and closed peerConnection.'\n      );\n    }\n  }\n\n  /**\n   * Starting here, we have \"Helper\" methods. That is to say: methods not\n   * expected by and for SIP.js\n   */\n  initPeerConnection() {\n    const opts = this.buildPeerConnectionOptions();\n    Logger.debug('SessionDescriptionHandler::initPeerConnection with: ', opts);\n    this.onIceCompleted = new Promise((resolve, reject) => {\n      this.resolveIceCompleted = resolve;\n      this.rejectIceCompleted = reject;\n    });\n    try {\n      this.peerConnection = new RTCPeerConnection(opts);\n      this.peerConnection.ontrack = this.handleOntrack.bind(this);\n      this.peerConnection.onicecandidate = this.gotIceCandidate.bind(this);\n      this.peerConnection.onnegotiationneeded = this.handleNegotiation.bind(\n        this\n      );\n      this.startIceCheckingTimer(opts.iceCheckingTimeout);\n    } catch (error) {\n      Logger.error(\n        'SessionDescriptionHandler::initPeerConnection failed:',\n        error,\n        this.connection.user\n      );\n    }\n  }\n\n  peerConnectionClosed() {\n    return Boolean(\n      this.peerConnection && this.peerConnection.signalingState === 'closed'\n    );\n  }\n\n  /**\n   * Only signal (handleAccept) that we have a remote stream once ontrack\n   * says so. Is called twice, once for audio and once for video track.\n   */\n  handleOntrack(event) {\n    [this.remoteStream] = event.streams;\n    Logger.debug(\n      'SessionDescriptionHandler::handleOntrack: ',\n      event.track.kind\n    );\n    event.track.onunmute = () => {\n      this.session.passedOptions.sessionDescriptionHandlerOptions.handleUnmute(\n        event.track\n      );\n    };\n\n    this.session.passedOptions.sessionDescriptionHandlerOptions.handleAccept(\n      this.remoteStream\n    );\n  }\n\n  startIceCheckingTimer(iceCheckingTimeout) {\n    this.iceCheckingTimer = setTimeout(() => {\n      Logger.debug(\n        'iceCheckingTimeout triggered after: ' +\n          iceCheckingTimeout +\n          ' milliseconds'\n      );\n      this.resolveIceCompleted();\n    }, iceCheckingTimeout);\n  }\n\n  gotIceCandidate(event) {\n    const { candidate } = event;\n\n    if (!candidate) {\n      Logger.debug(\n        'SessionDescriptionHandler::gotIceCandidate: ' +\n          'no candidates left, onIceCompleted.'\n      );\n      this.resolveIceCompleted();\n      return;\n    }\n\n    if (candidate.type === 'relay' && candidate.sdpMid === 'video') {\n      Logger.debug(`SessionDescriptionHandler::gotIceCandidate: ${candidate}.\n                   Relay candidate found, onIceCompleted.`);\n      this.resolveIceCompleted();\n      return;\n    }\n\n    Logger.debug(`SessionDescriptionHandler::gotIceCandidate: ${candidate}`);\n  }\n\n  /**\n   * We need to re-format the iceServers here. SIP.js used to offer a\n   * higher level api and we supplied the servers in a different format e.g:\n   *\n   * { stunServers: [\"stun:stun1.visocon.com:3478\"] }\n   * { turnServers: [{ urls: [1,2,3], username: \"bob\", password: \"nob\" }] }\n   *\n   * We currently have the api set return the creds in that format.\n   * The peerConnection however expects:\n   *\n   * {\n   *   \"iceServers\": [\n   *     { \"urls\": \"stun:stun1.visocon.com:3478\" },\n   *     { \"urls\": [1,2,3], \"username\": \"bob\", \"credential\": \"nob\" }\n   *   ]\n   * }\n   *\n   * Note: Edge is a little picky when it comes to turn server urls. We need\n   * to specify the protocol via (`?transport=udp`) for edge to swallow it.\n   * But we don't want to add additional turn-server for the rest of the\n   * browsers, since FF gives us a warning \"Things will go wrong when providing\n   * more than 5 urls\". We also don't remove any turn urls, since adapter and\n   * edge will be doing that for us.\n   */\n  buildPeerConnectionOptions() {\n    const tmp = Object.assign({}, this.connection.user);\n    tmp.stunServers = { urls: tmp.stunServers };\n    tmp.turnServers = tmp.turnServers.map(server => {\n      if (FeatureDetector.isEdge()) {\n        const urlWithoutProtocol = server.urls.find(\n          url => !url.match(/transport/)\n        );\n        server.urls.push(urlWithoutProtocol + '?transport=udp');\n      }\n      server.credential = server.password;\n      return server;\n    });\n    return Object.assign({}, this.options.peerConnectionOptions, {\n      sdpSemantics: 'unified-plan',\n      iceServers: tmp.turnServers.concat(tmp.stunServers)\n    });\n  }\n\n  createOfferOrAnswer(RTCOfferOptions, modifiers) {\n    Logger.debug(\n      'SessionDescriptionHandler::createOfferOrAnswer: ',\n      RTCOfferOptions,\n      modifiers\n    );\n\n    const offerOptions = RTCOfferOptions || {};\n    const sdpModifiers = modifiers || [];\n\n    const methodName = this.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n\n    return this.peerConnection[methodName](offerOptions)\n      .then(sdp => this.peerConnection.setLocalDescription(sdp))\n      .then(() => this.onIceCompleted)\n      .then(() => {\n        let { sdp } = this.peerConnection.localDescription;\n        try {\n          sdpModifiers.forEach(modifier => {\n            sdp = modifier(sdp);\n          });\n        } catch (error) {\n          Logger.error('sdpModifier failed: ', error, sdp);\n        }\n        return sdp;\n      })\n      .catch(error => {\n        Logger.error('createOfferOrAnswer:', error);\n      });\n  }\n\n  hasOffer(type) {\n    return this.peerConnection.signalingState === `have-${type}-offer`;\n  }\n\n  getLocalStream() {\n    return this.localStream;\n  }\n\n  getRemoteStream() {\n    return this.remoteStream;\n  }\n\n  setStream(newStream) {\n    return new Promise((resolve, reject) => {\n      let oldStream = this.getLocalStream();\n      this.localStream = newStream;\n\n      const unusedTracks = oldStream\n        .getTracks()\n        .filter(track => !newStream.getTracks().includes(track));\n      unusedTracks.forEach(stopTrack);\n\n      let [audioTrack] = newStream.getAudioTracks();\n      // in case of multiple streams, the preferred video track is the\n      // canvas presentation stream\n      let [videoTrack] = isCanvasPresentationStream(newStream)\n        ? getCanvasTracks(newStream)\n        : newStream.getVideoTracks();\n\n      const audioSender = this.peerConnection\n        .getSenders()\n        .find(sender => sender.track.kind === 'audio');\n      const videoSender = this.peerConnection\n        .getSenders()\n        .find(sender => sender.track.kind === 'video');\n\n      audioSender\n        .replaceTrack(audioTrack)\n        .then(() => videoSender.replaceTrack(videoTrack))\n        .then(() => {\n          resolve({ newStream: newStream, remoteStream: this.remoteStream });\n        })\n        .catch(reject);\n    });\n  }\n\n  handleNegotiation() {\n    Logger.debug('SessionDescriptionHandler::handleNegotiation');\n  }\n\n  /**\n   * Stop all tracks\n   */\n  stopAllTracks() {\n    Logger.debug('SessionDescriptionHandler::stopAllTracks');\n    let receivers = this.peerConnection.getReceivers\n      ? this.peerConnection.getReceivers()\n      : [];\n    this.peerConnection\n      .getSenders()\n      .concat(receivers)\n      .forEach(rtp => {\n        if (rtp.track) {\n          stopTrack(rtp.track);\n        }\n      });\n  }\n}\n\nexport default SessionDescriptionHandler;\n/* eslint-enable max-lines */\n","// Due to transport errors in SIP 0.15 we're currently back to 0.11\n// https://github.com/onsip/SIP.js/issues/706\n// https://github.com/onsip/SIP.js/issues/727\n// import { UA } from 'sip.js';\nimport SIP from 'sip.js';\nimport Logger from './Logger';\nimport WHITELIST from './SipMessageWhitelist';\nimport SipMessageTransformer from './SipMessageTransformer';\nimport SessionDescriptionHandler from './SessionDescriptionHandler';\n\nconst factoryOptions = { peerConnectionOptions: { iceCheckingTimeout: 3000 } };\n\n/**\n * eyeson Sip Connection.\n *\n * Registers with provided sip credentials and handles events received.\n **/\nclass SipConnection {\n  constructor(user, room) {\n    this.user = user;\n    this._room = room;\n    this.user.sessionDescriptionHandlerFactoryOptions = factoryOptions;\n    this.user.sessionDescriptionHandlerFactory = (session, options) =>\n      new SessionDescriptionHandler(session, options);\n\n    const uaOptions = this.adjustUserAgentOptions(this.user);\n    // this.userAgent = new UA(uaOptions);\n    this.userAgent = new SIP.UA(uaOptions);\n    this.transformer = new SipMessageTransformer(this.user);\n    this.start = this.start.bind(this);\n  }\n\n  /**\n   * SIP.js introduced transportOptions somewhere after 0.9.0.\n   **/\n  adjustUserAgentOptions(user) {\n    user.autostart = false;\n    user.transportOptions = { wsServers: [user.wsServers], traceSip: true };\n    return user;\n  }\n\n  /**\n   * Connect and register to the configured WebSocket server.\n   **/\n  start() {\n    return new Promise((resolve, reject) => {\n      this.userAgent.once('transportCreated', transport => {\n        transport.on('transportError', () => {\n          reject(new Error('SipTransportError'));\n        });\n        transport.on('connected', () => resolve());\n      });\n      this.userAgent.start();\n    });\n  }\n\n  /**\n   * Start a session on current connection.\n   **/\n  startSession(options, modifiers) {\n    return this.userAgent.invite(this._room.uri, options, modifiers);\n  }\n\n  /**\n   * Stop listening for messages.\n   **/\n  close() {\n    if (!this.userAgent) {\n      return;\n    }\n    this.userAgent.removeAllListeners('message');\n    this.userAgent.unregister();\n    this.userAgent = null;\n  }\n\n  /**\n   * Parse, filter, transform and finally forward messages received from SIP\n   * connection.\n   **/\n  onMessage(callback) {\n    this.userAgent.on('message', response => {\n      Logger.debug('SipConnection::onMessage', response);\n      const message = JSON.parse(response.body);\n\n      if (!WHITELIST.includes(message.type)) {\n        Logger.debug(\n          `SipConnection::onMessage ignoring \"${message.type}\" message.`\n        );\n        return;\n      }\n\n      const transformedMessage = this.transformer.process(message);\n      callback(transformedMessage);\n    });\n  }\n\n  /**\n   * Transport a message over current connection.\n   **/\n  send(msg) {\n    msg.cid = this.user.uri;\n    if (!this.userAgent) {\n      return;\n    }\n    this.userAgent.message(this._room.uri, JSON.stringify(msg));\n  }\n}\n\nexport default SipConnection;\n","import Logger from '../Logger';\nimport PublicEvent from './PublicEvent';\nimport SipConnection from '../SipConnection';\n\nconst startSipConnection = (context, user, room) => {\n  context.connection = new SipConnection(user.sip, room.sip);\n  context._connection\n    .start()\n    .then(() => context.send({ type: 'connection', connectionStatus: 'ready' }))\n    .catch(() =>\n      context.send({ type: 'connection', connectionStatus: 'transport_error' })\n    );\n};\n\nclass RoomReceived extends PublicEvent {\n  handle(msg) {\n    super.handle(msg);\n    this.context.rtData = msg.content;\n\n    if (msg.content.ready !== true) {\n      Logger.debug('RoomReceived not ready:', msg.content);\n      return;\n    }\n\n    const { user, room, links } = msg.content;\n\n    // Update eyeson's public data\n    this.context._eyeson.room = room;\n    this.context._eyeson.user = this.context._api.addUserAttributes(\n      user,\n      user.id\n    );\n    this.context._eyeson.links = links;\n\n    startSipConnection(this.context, user, room);\n  }\n}\n\nexport default RoomReceived;\n","import PublicEvent from './PublicEvent';\n\nclass FetchRoomEvent extends PublicEvent {\n  handle() {\n    this.context._api.getRoom(room => {\n      return super.handle({ type: 'fetch_room', room });\n    });\n  }\n}\n\nexport default FetchRoomEvent;\n","import BaseEvent from './BaseEvent';\n\n/**\n * Deletes a file using the com api.\n **/\nclass DeleteFileEvent extends BaseEvent {\n  handle(msg) {\n    this.context._api.deleteFile(msg.file);\n  }\n}\n\nexport default DeleteFileEvent;\n","import PublicEvent from './PublicEvent';\n\n/**\n * Uploads a file using the com api.\n **/\n\nclass UploadFileEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.uploadFile(msg.file, this.addFile.bind(this));\n  }\n\n  addFile(response) {\n    super.handle({\n      type: 'add_file',\n      file: response\n    });\n  }\n}\n\nexport default UploadFileEvent;\n","import PublicEvent from './PublicEvent';\n\nclass ReceiveChatEvent extends PublicEvent {\n  handle(msg) {\n    const userId    = msg.cid.split('@').shift();\n\n    this.msg = msg;\n    this.context._api.getUser(userId, this.forwardMessage.bind(this));\n  }\n\n  forwardMessage(user) {\n    const timestamp = Date.parse(this.msg.ts || this.msg.created_at);\n    super.handle({\n      type:      this.msg.type,\n      user:      user,\n      timestamp: new Date(timestamp),\n      content:   this.msg.content\n    });\n  }\n}\n\nexport default ReceiveChatEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\nclass StopYouTubeEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api\n      .stopBroadcast('youtube')\n      .then(() => super.handle({ type: msg.type }))\n      .catch(error => Logger.warn(error));\n  }\n}\n\nexport default StopYouTubeEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nclass StartStreamEvent extends BaseEvent {\n  handle({ audio = true, video = true }) {\n    Logger.debug(`StartStreamEvent::handle audio: ${audio} video: ${video}`);\n    const { _session } = this.context;\n    new MediaStreamBuilder({ audio: audio, video: video })\n      .start()\n      .then(_session.setStream)\n      .catch(Logger.error);\n  }\n}\n\nexport default StartStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport FeatureDetector from '../FeatureDetector';\nimport {\n  toggleCamera,\n  isCanvasPresentationStream\n} from '../utils/StreamHelpers';\n\n/**\n * ChangeStreamEvent \"changes\" a stream with the given options.\n *\n * The MediaStream is only updated if the Browser turns off device activity\n * indicators on disable (i.e. setting the video tracks `.enabled` prop to\n * false). This is the case for Firefox (May 2019).\n *\n * For other Browsers, a totally new MediaStream is acquired. Although some\n * of its tracks might be re-used / kept alive.\n * See `.setStream` in SDH for more details of current implementation.\n **/\nclass ChangeStreamEvent extends BaseEvent {\n  handle({ audio = true, video = true }) {\n    Logger.debug(`ChangeStreamEvent::handle audio: ${audio} video: ${video}`);\n    const { _session } = this.context;\n\n    const changeStream = () => {\n      return new Promise((resolve, reject) => {\n        if (FeatureDetector.stopsDeviceActivityIndicatorOnDisable()) {\n          toggleCamera(_session.localStream, video);\n          resolve(_session.localStream);\n          return;\n        }\n        new MediaStreamBuilder({\n          audio: audio,\n          video: video,\n          existingStream: _session.localStream\n        })\n          .start()\n          .then(resolve)\n          .catch(reject);\n      });\n    };\n\n    return changeStream()\n      .then(_session.setStream)\n      .then(stream => {\n        if (isCanvasPresentationStream(stream)) {\n          _session.canvasMixer.setStream(stream);\n        } else {\n          _session.send({ type: 'mute_video', on: !video });\n        }\n      })\n      .catch(Logger.errror);\n  }\n}\n\nexport default ChangeStreamEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\n\nclass ToggleCameraEvent extends BaseEvent {\n  handle({ facingMode }) {\n    Logger.debug('ToggleCameraEvent::handle', facingMode);\n    const { _session } = this.context;\n\n    new MediaStreamBuilder({\n      audio: _session.localStream.getAudioTracks()[0].enabled,\n      video: { facingMode: facingMode },\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(_session.setStream);\n  }\n}\n\nexport default ToggleCameraEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartYouTubeEvent extends BaseEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startBroadcast(msg, 'youtube')\n      .catch(error =>\n        _session.emit({\n          type: 'start_broadcast_error',\n          platform: 'youtube',\n          error: error\n        })\n      );\n  }\n}\n\nexport default StartYouTubeEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\nclass StopFacebookEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api\n      .stopBroadcast('facebook')\n      .then(() => super.handle({ type: msg.type }))\n      .catch(error => Logger.warn(error));\n  }\n}\n\nexport default StopFacebookEvent;\n","import PublicEvent from './PublicEvent';\nimport { hasVideo } from '../utils/StreamHelpers';\n\nclass AcceptSessionEvent extends PublicEvent {\n  handle(msg) {\n    const {\n      type,\n      session: { sessionDescriptionHandler }\n    } = msg;\n    const localStream = sessionDescriptionHandler.getLocalStream();\n\n    super.handle({\n      type: type,\n      localStream: localStream,\n      remoteStream: sessionDescriptionHandler.getRemoteStream()\n    });\n\n    this.context._connection.send({\n      type: 'mute_video',\n      on: !hasVideo(localStream)\n    });\n  }\n}\n\nexport default AcceptSessionEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartFacebookEvent extends BaseEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startBroadcast(msg, 'facebook')\n      .catch(error =>\n        _session.emit({\n          type: 'start_broadcast_error',\n          platform: 'facebook',\n          error: error\n        })\n      );\n  }\n}\n\nexport default StartFacebookEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StopRecordingEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.stopRecording(msg);\n  }\n}\n\nexport default StopRecordingEvent;\n","import BaseEvent from './BaseEvent';\n\n/**\n * VoiceActivityEvent\n **/\nclass VoiceActivityEvent extends BaseEvent {\n  constructor(context) {\n    super(context);\n    this.getUser = this.getUser.bind(this);\n  }\n\n  getUser(id) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.context._api.getUser(id, resolve);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  handle(msg) {\n    this.getUser(msg.userId).then(user => {\n      this.context.send({ type: 'voice_activity', user: user, on: msg.on });\n    });\n  }\n}\n\nexport default VoiceActivityEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StartRecordingEvent extends PublicEvent {\n  handle(msg) {\n    const { _api, _session } = this.context;\n\n    _api\n      .startRecording(msg)\n      .catch(error => _session.emit({ type: 'recording_error', error: error }));\n  }\n}\n\nexport default StartRecordingEvent;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport { getScreenTracks, stopTrack } from '../utils/StreamHelpers';\n\nclass ScreenCaptureEvent extends BaseEvent {\n  handle({ audio, screen = false }) {\n    const { _session } = this.context;\n\n    const onError = error => {\n      Logger.error('ScreenCaptureEvent', error);\n      if (!error.name.match(/notallowed|permission/i) && screen) {\n        _session.emit({ type: 'capture_error', name: `error_${error.name}` });\n      }\n      _session.emit({ type: 'stop_presenting' });\n    };\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: false,\n      screen: screen,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        // cleanup when screen capture is stopped via chrome's built-in/native\n        // \"stop sharing\" button (a blue button on bottom of screen).\n        const [screenTrack] = getScreenTracks(stream);\n        if (screenTrack) {\n          screenTrack.addEventListener('ended', () => {\n            _session.emit({ type: 'stop_presenting' });\n            stopTrack(screenTrack);\n          });\n        }\n        return stream;\n      })\n      .then(stream => {\n        _session.emit({ type: 'start_presenting', stream: stream });\n      })\n      .catch(onError);\n  }\n}\n\nexport default ScreenCaptureEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StartPresentingEvent extends BaseEvent {\n  async handle({ stream = null }) {\n    let presentationStream = stream || this.context._session.localStream;\n    if (\n      this.context._session.canvasMixer &&\n      this.context._session.canvasMixer.stream\n    ) {\n      // eslint-disable-next-line prefer-destructuring\n      presentationStream = this.context._session.canvasMixer.stream;\n    }\n    await this.context._session.setStream(presentationStream);\n    this.context._session.send({ type: 'set_presenter', on: true });\n    this.context._session.send({ type: 'desktopstreaming', on: true });\n    this.context._session.emit({ type: 'presentation_started' });\n  }\n}\n\nexport default StartPresentingEvent;\n","import BaseEvent from './BaseEvent';\n\nclass StopPresentingEvent extends BaseEvent {\n  handle() {\n    if (this.context._session.canvasMixer) {\n      this.context._session.canvasMixer.stop();\n    }\n    this.context._session.send({ type: 'desktopstreaming', on: false });\n    this.context._session.send({ type: 'set_presenter', on: false });\n    this.context._session.emit({ type: 'presentation_ended' });\n  }\n}\n\nexport default StopPresentingEvent;\n","import PublicEvent from './PublicEvent';\n\nclass StopBroadcastsEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.stopAllBroadcasts()\n      .then(() => super.handle({ type: msg.type }));\n  }\n}\n\nexport default StopBroadcastsEvent;\n","import BaseEvent from './BaseEvent';\n\nclass ClearFrontLayerEvent extends BaseEvent {\n  handle() {\n    this.context._api.clearFrontLayer();\n  }\n}\n\nexport default ClearFrontLayerEvent;\n","import PublicEvent from './PublicEvent';\n\nclass PublishBroadcastEvent extends PublicEvent {\n  handle(msg) {\n    this.context._api.publishBroadcast(msg, 'facebook');\n  }\n}\n\nexport default PublishBroadcastEvent;\n","import ComApi from '../ComApi';\nimport PublicEvent from './PublicEvent';\n\n/**\n * Request a user from guest token.\n **/\nclass RequestGuestUserEvent extends PublicEvent {\n  handle(msg) {\n    return new ComApi(msg.api, msg.token).requestUser(\n      { name: msg.name, email: msg.email },\n      response => {\n        if (!response.access_key) {\n          super.handle({ type: 'error', content: 'Request guest user failed' });\n          return;\n        }\n        super.handle({ type: 'guest_user', token: response.access_key });\n      }\n    );\n  }\n}\n\nexport default RequestGuestUserEvent;\n","import Logger from './../Logger';\nimport PublicEvent from './PublicEvent';\n\n/**\n * HandleStreamOfferEvent\n *\n * Update our remote description, create an answer and resolve with new sdp.\n * Also register a cb for when the new remote stream is available.\n **/\nclass HandleStreamOfferEvent extends PublicEvent {\n  handle(msg) {\n    if (!this.context._session || !this.context._connection) {\n      Logger.warn('HandleStreamOfferEvent::no session or connection.');\n      return;\n    }\n    const { _connection, _session } = this.context;\n    const pc = _session.peerConnection;\n\n    // Note: .then(pc.createAnswer) causes \"Illegal invocation\" error on chrome\n    // for windows. That's why the more verbose answer => pc.createAnswer\n    // are needed.\n    new Promise((resolve, reject) => {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp))\n        .then(answer => pc.createAnswer(answer))\n        .then(answer => pc.setLocalDescription(answer))\n        .then(() => resolve(pc.localDescription))\n        .catch(reject);\n    })\n      .then(sdp => _connection.send({ type: 'stream_answer', sdp: sdp }))\n      .then(() => _session.remoteDescriptionUpdate(msg.sdp))\n      .catch(Logger.error);\n  }\n}\n\nexport default HandleStreamOfferEvent;\n","import Logger from './../Logger';\nimport BaseEvent from './BaseEvent';\n\n/**\n * HandleStreamAnswerEvent\n *\n * Update our remote description with provided answer.\n **/\nclass HandleStreamAnswerEvent extends BaseEvent {\n  handle(msg) {\n    Logger.debug('HandleStreamAnswerEvent: ', msg);\n    const pc = this.context._session.peerConnection;\n\n    if (pc.signalingState === 'stable') {\n      return;\n    }\n\n    pc\n      .setRemoteDescription(new RTCSessionDescription(msg.sdp))\n      .then(Logger.debug('HandleStreamAnswerEvent: set remote description'))\n      .then(() => {\n        this.context._session.remoteDescriptionUpdate(msg.sdp);\n      })\n      .catch(error => Logger.warn('HandleStreamAnswerEvent: ', error, msg.sdp));\n  }\n}\n\nexport default HandleStreamAnswerEvent;\n","import Logger from './../Logger';\nimport BaseEvent from './BaseEvent';\n\n/**\n * We handle participants list update is separated in two actions: one to\n * add, one to remove. In order to keep it easy to handle, the user data is\n * fetched from api (or later received via websocket). Not to mess with\n * comApi current handling, we keep it here for a while.\n **/\nclass ParticipantListUpdateEvent extends BaseEvent {\n  constructor(context) {\n    super(context);\n    this.getUser = this.getUser.bind(this);\n  }\n\n  getUser(id) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.context._api.getUser(id, resolve);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  handle(msg) {\n    (msg.add || []).forEach((user, idx, add) => {\n      const id = user.cid.split('@').shift();\n\n      const initial = Boolean(\n        add.find(addition => {\n          return addition.cid === this.context._connection.user.uri;\n        })\n      );\n\n      this.getUser(id)\n        .then(apiUser => {\n          this.context.send({\n            type: 'add_user',\n            user: apiUser,\n            initial: initial\n          });\n        })\n        .catch(error => Logger.error(error));\n    });\n    (msg.del || []).forEach(user => {\n      const id = user.split('@').shift();\n\n      this.getUser(id)\n        .then(apiUser => {\n          this.context.send({ type: 'remove_user', userId: id, user: apiUser });\n        })\n        .catch(error => Logger.error(error));\n    });\n    this.context.send({ type: 'playback_update', playing: msg.media || [] });\n  }\n}\n\nexport default ParticipantListUpdateEvent;\n","const toFixedNumber = number => Number(parseFloat(number).toFixed(2));\n\nconst scale = (width, height, max) => {\n  const ratio = Math.min(max.width / width, max.height / height);\n  const xScaled = toFixedNumber(width * ratio);\n  const yScaled = toFixedNumber(height * ratio);\n\n  return { width: xScaled, height: yScaled };\n};\n\nexport default scale;\n","/* eslint-disable */\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @see https://davidwalsh.name/javascript-debounce-function\n **/\nexport default (func, wait, immediate) => {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n/* eslint-enable */\n","import scale from './utils/scale';\nimport Logger from './Logger';\nimport debounce from './utils/debounce';\n\nimport {\n  isScreenStream,\n  getScreenTracks,\n  getCameraTracks,\n  getCanvasTracks,\n  stopStream\n} from './utils/StreamHelpers';\n\nconst FPS = 15;\nconst FPS_INTERVAL = 1000 / FPS;\nconst CAMERA_SMALL = { width: 220, height: 140 };\nconst CAMERA_MEDIUM = { width: 320, height: 240 };\nconst CAMERA_LARGE = { width: 420, height: 340 };\nconst CAMERA_NONE = { width: 0, height: 0 };\n\nconst defaultTrack = {\n  getSettings: () => ({ width: 0, height: 0 }),\n  addEventListener: () => null\n};\n\n// Note:\n// autoplay elements will stop playing in safari if not in viewport:\n// https://webkit.org/blog/6784/new-video-policies-for-ios/\n// that's the reason why we don't set autoplay\n// video.setAttribute('autoplay', '1');\n// but instead `.play` manually.\nconst bindVideoToStream = (video, stream) => {\n  const [track = defaultTrack] = stream.getVideoTracks();\n  const { width, height } = track.getSettings();\n  video.setAttribute('controls', 'true');\n  video.setAttribute('width', width);\n  video.setAttribute('height', height);\n  video.srcObject = stream;\n  track.addEventListener('stopped', () => (video.srcObject = null));\n  video\n    .play()\n    .catch(error =>\n      Logger.warn('bindVideoToStream: play', error, error.message)\n    );\n  return video;\n};\n\n/* eslint-disable max-statements, id-length */\nconst fitImage = (target, source) => {\n  const sourceAspectRatio = source.width / source.height;\n  const targetAspectRatio = target.width / target.height;\n\n  let { width, height } = target;\n  let x = 0;\n  let y = 0;\n\n  // Image's aspect ratio is less than target's we fit on height\n  // and place the image centrally along width\n  if (sourceAspectRatio < targetAspectRatio) {\n    width = source.width * (height / source.height);\n    x = (target.width - width) / 2;\n  }\n  // Image's aspect ratio is greater than target's we fit on width\n  // and place the image centrally along height\n  if (sourceAspectRatio > targetAspectRatio) {\n    height = source.height * (width / source.width);\n    y = (target.height - height) / 2;\n  }\n\n  return { x: x, y: y, width: width, height: height };\n};\n/* eslint-enable max-statements */\n\nclass CanvasMixer {\n  /* eslint-disable max-statements */\n  constructor(canvas, stream) {\n    this.canvas = canvas;\n    this.stream = stream;\n    this.context = this.canvas.getContext('2d', { alpha: false });\n    this.xPos = 0;\n    this.camSize = CAMERA_MEDIUM;\n\n    this.draw = this.draw.bind(this);\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this.onError = this.onError.bind(this);\n    this.onRedraw = this.onRedraw.bind(this);\n    this.setStream = this.setStream.bind(this);\n    this.setCamera = this.setCamera.bind(this);\n    this.drawFrame = this.drawFrame.bind(this);\n    this.calcSizesAndPositions = this.calcSizesAndPositions.bind(this);\n\n    this.bouncedDraw = debounce(this.draw, FPS_INTERVAL);\n  }\n  /* eslint-enable max-statements */\n\n  onError(errorCallback) {\n    this.errorCallback = errorCallback;\n  }\n\n  onRedraw(redrawCallback) {\n    this.redrawCallback = redrawCallback;\n  }\n\n  start() {\n    // build hidden video elements from which we can grab image\n    this.camera = document.createElement('video');\n    this.screen = document.createElement('video');\n\n    this.setCamera({ horizontal: 'right', vertical: 'bottom' }, 'medium');\n    this.setStream(this.stream);\n    this.draw();\n  }\n\n  stop() {\n    if (this.stream) {\n      stopStream(this.stream);\n      this.stream = null;\n      this.screenStream = null;\n      this.cameraStream = null;\n    }\n  }\n\n  setStream(newStream) {\n    this.stream = newStream;\n    this.cameraStream = new MediaStream(getCameraTracks(this.stream));\n    this.screenStream = new MediaStream(getScreenTracks(this.stream));\n    bindVideoToStream(this.camera, this.cameraStream);\n    bindVideoToStream(this.screen, this.screenStream);\n    this.calcSizesAndPositions();\n    this.redrawQueued = true;\n  }\n\n  setCamera(position, size) {\n    this.cameraPosition = position || this.cameraPosition;\n    this.cameraSizeInWords = size || this.cameraSizeInWords;\n    this.redrawQueued = true;\n  }\n\n  calcSizesAndPositions() {\n    // Fetch the latest settings (width and height) from the track directly,\n    // otherwise resized windows won't be positioned/scaled correctly...\n    const [track = defaultTrack] = this.screenStream.getVideoTracks();\n    const { width, height } = track.getSettings();\n    const fitScreen = fitImage(this.canvas, { width: width, height: height });\n\n    this.camSize = {\n      small: CAMERA_SMALL,\n      medium: CAMERA_MEDIUM,\n      large: CAMERA_LARGE,\n      none: CAMERA_NONE\n    }[this.cameraSizeInWords];\n\n    const scaledCam = scale(\n      this.camera.width,\n      this.camera.height,\n      this.camSize\n    );\n\n    this.sizes = {\n      screen: { width: fitScreen.width, height: fitScreen.height },\n      camera: { width: scaledCam.width, height: scaledCam.height }\n    };\n    /* eslint-disable id-length, camelcase */\n    const camPosition = {\n      x:\n        this.cameraPosition.horizontal === 'right'\n          ? this.canvas.width - this.sizes.camera.width\n          : 0,\n      y:\n        this.cameraPosition.vertical === 'bottom'\n          ? this.canvas.height - this.sizes.camera.height\n          : 0\n    };\n    this.positions = {\n      screen: { x: fitScreen.x, y: fitScreen.y },\n      camera: { x: camPosition.x, y: camPosition.y }\n    };\n    /* eslint-enable id-length */\n  }\n\n  /* eslint-disable max-statements */\n  draw() {\n    try {\n      if (!this.stream || !this.stream.active) {\n        return;\n      }\n\n      // Doing this on every draw due to resizeable windows while screensharing\n      this.calcSizesAndPositions();\n\n      // In case we need to report back a redraw - doc/image can re-render\n      if (this.redrawCallback && this.redrawQueued) {\n        this.redrawCallback();\n        this.redrawQueued = false;\n      }\n\n      // Actual drawing code\n      const t0 = performance.now();\n      this.drawFrame(this.screen, this.positions.screen, this.sizes.screen);\n      this.drawFrame(this.camera, this.positions.camera, this.sizes.camera);\n      const t1 = performance.now();\n      if (t1 - t0 >= FPS_INTERVAL) {\n        Logger.warn(`Mixer::drawFrame took ${t1 - t0}ms.`);\n      }\n\n      // Request a frame so remote end receives updates reliably\n      const [track] = getCanvasTracks(this.stream);\n      track.requestFrame();\n\n      // Request another draw if the stream is still active\n      this.bouncedDraw();\n    } catch (error) {\n      Logger.error(error);\n      this.errorCallback(error);\n    }\n  }\n  /* eslint-enable max-statements */\n\n  drawFrame(video, pos, size) {\n    // Pollute the canvas even if we don't have a stream, so we force a frame\n    // update.\n    if (!video || !video.srcObject || !video.srcObject.active) {\n      const imgData = this.context.createImageData(1, 1);\n      this.context.putImageData(imgData, 0, 0);\n      return;\n    }\n\n    // Clear prev drawn frames only for screen streams, otherwise old frames\n    // show up if the window is resized (smaller).\n    if (isScreenStream(video.srcObject)) {\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    this.context.drawImage(video, pos.x, pos.y, size.width, size.height);\n  }\n}\n\nexport default CanvasMixer;\n","import Logger from '../Logger';\nimport BaseEvent from './BaseEvent';\nimport CanvasMixer from '../CanvasMixer';\nimport MediaStreamBuilder from '../MediaStreamBuilder';\nimport { getScreenTracks, stopTrack } from '../utils/StreamHelpers';\n\nclass StartMixerEvent extends BaseEvent {\n  handle({\n    audio,\n    video,\n    canvas,\n    screen = false,\n    onRedraw,\n    changeStream = false\n  }) {\n    const { _session } = this.context;\n\n    const onError = error => {\n      Logger.error('StartMixerEvent', error);\n      if (!error.name.match(/notallowed|permission/i) && screen) {\n        _session.emit({ type: 'capture_error', name: `error_${error.name}` });\n      }\n      _session.emit({ type: 'stop_presenting' });\n    };\n\n    new MediaStreamBuilder({\n      audio: audio,\n      video: video,\n      screen: screen,\n      canvas: canvas,\n      existingStream: _session.localStream\n    })\n      .start()\n      .then(stream => {\n        // cleanup when screen capture is stopped via chrome's built-in/native\n        // \"stop sharing\" button (a blue button on bottom of screen).\n        const [screenTrack] = getScreenTracks(stream);\n        if (screenTrack) {\n          screenTrack.addEventListener('ended', () => {\n            _session.emit({ type: 'stop_presenting' });\n            stopTrack(screenTrack);\n          });\n        }\n        _session.canvasMixer = new CanvasMixer(canvas, stream);\n        _session.canvasMixer.onError(onError);\n        _session.canvasMixer.onRedraw(onRedraw);\n        _session.canvasMixer.start();\n        return stream;\n      })\n      .then(stream => {\n        if (changeStream) {\n          _session.emit({ type: 'start_presenting', stream: stream });\n        } else {\n          _session.emit({ type: 'stream_update', presentationStream: stream });\n        }\n      })\n      .catch(onError);\n  }\n}\n\nclass UpdateMixerEvent extends BaseEvent {\n  handle({ position, size }) {\n    const { _session } = this.context;\n    try {\n      _session.canvasMixer.setCamera(position, size);\n    } catch (error) {\n      Logger.error(error);\n    }\n  }\n}\n\nexport { StartMixerEvent, UpdateMixerEvent };\n","import Logger from './Logger';\n\nimport { StopPlaybackEvent, StartPlaybackEvent } from './events/PlaybackEvents';\n\nimport {\n  StartAnnotationEvent,\n  StopAnnotationEvent\n} from './events/AnnotationEvents';\n\nimport StfuEvent from './events/StfuEvent';\nimport IgnoreEvent from './events/IgnoreEvent';\nimport PublicEvent from './events/PublicEvent';\nimport PodiumEvent from './events/PodiumEvent';\nimport ForwardEvent from './events/ForwardEvent';\nimport SnapshotEvent from './events/SnapshotEvent';\nimport SetLayerEvent from './events/SetLayerEvent';\nimport SendChatEvent from './events/SendChatEvent';\nimport SetLayoutEvent from './events/SetLayoutEvent';\nimport RoomReceivedEvent from './events/RoomReceivedEvent';\nimport FetchRoomEvent from './events/FetchRoomEvent';\nimport DeleteFileEvent from './events/DeleteFileEvent';\nimport UploadFileEvent from './events/UploadFileEvent';\nimport ReceiveChatEvent from './events/ReceiveChatEvent';\nimport StopYouTubeEvent from './events/StopYouTubeEvent';\nimport StartStreamEvent from './events/StartStreamEvent';\nimport ChangeStreamEvent from './events/ChangeStreamEvent';\nimport ToggleCameraEvent from './events/ToggleCameraEvent';\nimport StartYouTubeEvent from './events/StartYouTubeEvent';\nimport StopFacebookEvent from './events/StopFacebookEvent';\nimport AcceptSessionEvent from './events/AcceptSessionEvent';\nimport StartFacebookEvent from './events/StartFacebookEvent';\nimport StopRecordingEvent from './events/StopRecordingEvent';\nimport VoiceActivityEvent from './events/VoiceActivityEvent';\nimport StartRecordingEvent from './events/StartRecordingEvent';\nimport StartScreenCaptureEvent from './events/ScreenCaptureEvent';\nimport StartPresentingEvent from './events/StartPresentingEvent';\nimport StopPresentingEvent from './events/StopPresentingEvent';\nimport StopBroadcastsEvent from './events/StopBroadcastsEvent';\nimport ClearFrontLayerEvent from './events/ClearFrontLayerEvent';\nimport PublishBroadcastEvent from './events/PublishBroadcastEvent';\nimport RequestGuestUserEvent from './events/RequestGuestUserEvent';\nimport HandleStreamOfferEvent from './events/HandleStreamOfferEvent';\nimport HandleStreamAnswerEvent from './events/HandleStreamAnswerEvent';\nimport ParticipantListUpdateEvent from './events/ParticipantListUpdateEvent';\nimport { StartMixerEvent, UpdateMixerEvent } from './events/MixerEvents';\n\n/**\n * Event Handler uses the connection credentials for the room and\n * the user to setup a (monitored) connection, start a session and\n * listen for any events.\n **/\nclass EventHandler {\n  constructor() {\n    this.listeners = [];\n    this._eyeson = null;\n    this._session = null;\n    this._monitor = null;\n    this._connection = null;\n    this._rtConnection = null;\n\n    this.send = this.send.bind(this);\n  }\n\n  /* eslint-disable max-statements */\n  destroy() {\n    if (this._monitor) {\n      this._monitor.destroy();\n    }\n    if (this._connection) {\n      this._connection.close();\n    }\n    if (this._rtConnection) {\n      this._rtConnection.close();\n    }\n    if (this._session) {\n      this._session.end();\n    }\n    this._api = null;\n    this._session = null;\n    this._monitor = null;\n    this._connection = null;\n    this._rtConnection = null;\n  }\n  /* eslint-enable max-statements */\n\n  set connection(con) {\n    if (this._connection) {\n      Logger.error(\n        'A connection is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._connection = con;\n    this._connection.onMessage(this.send);\n  }\n\n  set rtConnection(con) {\n    if (this._rtConnection) {\n      Logger.error(\n        'A real-time connection is already set. If you are trying to start' +\n          ' a new session you have the close the current before.'\n      );\n      return;\n    }\n    this._rtConnection = con;\n    this._rtConnection.onMessage(this.send);\n  }\n\n  set monitor(mon) {\n    if (this._monitor) {\n      Logger.error(\n        'A monitor is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._monitor = mon;\n    this._monitor.onError(this.send);\n  }\n\n  set session(ses) {\n    if (this._session) {\n      Logger.error(\n        'A session is already set. If you are trying to start a new' +\n          ' session you have to end the current one first.'\n      );\n      return;\n    }\n    this._session = ses;\n    this._session.onEvent(this.send);\n  }\n\n  set api(api) {\n    this._api = api;\n  }\n\n  set rtData(data) {\n    this._rtData = data;\n  }\n\n  set eyeson(eyeson) {\n    this._eyeson = eyeson;\n  }\n\n  get monitor() {\n    return this._monitor;\n  }\n\n  /**\n   * Register a new listener.\n   **/\n  onReceive(callback) {\n    Logger.debug('EventHandler::onReceive');\n    this.listeners.push(callback);\n  }\n\n  /**\n   * Unregisters a listener.\n   **/\n  removeListener(callback) {\n    this.listeners = this.listeners.filter(listener => listener !== callback);\n  }\n\n  /**\n   * On receiving an event, notify all registered listeners.\n   **/\n  /* eslint-disable camelcase */\n  send(msg) {\n    if (!msg.silenced) {\n      Logger.debug('EventHandler::send', msg);\n    }\n    new ({\n      stfu: ForwardEvent,\n      chat: ReceiveChatEvent,\n      accept: AcceptSessionEvent,\n      podium: PodiumEvent,\n      snapshot: SnapshotEvent,\n      send_chat: SendChatEvent,\n      set_layer: SetLayerEvent,\n      set_layout: SetLayoutEvent,\n      fetch_room: FetchRoomEvent,\n      room_ready: RoomReceivedEvent,\n      room_setup: RoomReceivedEvent,\n      memberlist: ParticipantListUpdateEvent,\n      upload_file: UploadFileEvent,\n      delete_file: DeleteFileEvent,\n      request_stfu: StfuEvent,\n      stream_offer: HandleStreamOfferEvent,\n      stop_youtube: StopYouTubeEvent,\n      stream_answer: HandleStreamAnswerEvent,\n      start_youtube: StartYouTubeEvent,\n      change_stream: ChangeStreamEvent,\n      toggle_camera: ToggleCameraEvent,\n      stop_facebook: StopFacebookEvent,\n      stop_playback: StopPlaybackEvent,\n      playback_update: ForwardEvent,\n      start_playback: StartPlaybackEvent,\n      start_stream: StartStreamEvent,\n      start_facebook: StartFacebookEvent,\n      stop_recording: StopRecordingEvent,\n      start_screen_capture: StartScreenCaptureEvent,\n      stop_broadcasts: StopBroadcastsEvent,\n      start_recording: StartRecordingEvent,\n      stop_presenting: StopPresentingEvent,\n      start_presenting: StartPresentingEvent,\n      stop_annotation: StopAnnotationEvent,\n      start_annotation: StartAnnotationEvent,\n      publish_broadcast: PublishBroadcastEvent,\n      clear_front_layer: ClearFrontLayerEvent,\n      request_guest_user: RequestGuestUserEvent,\n      voice_activity_raw: VoiceActivityEvent,\n      start_mixer: StartMixerEvent,\n      update_mixer: UpdateMixerEvent,\n\n      capture_error: ForwardEvent,\n      voice_activity: ForwardEvent,\n      options_update: ForwardEvent,\n      ext_not_installed: ForwardEvent,\n      broadcasts_update: ForwardEvent,\n      facebook_logged_in: ForwardEvent,\n      facebook_published: ForwardEvent,\n      presentation_ended: ForwardEvent,\n      handle_youtube_error: ForwardEvent,\n      handle_facebook_error: ForwardEvent,\n      status_update_youtube: ForwardEvent,\n\n      recording: IgnoreEvent,\n      ext_cancel: IgnoreEvent,\n      ext_installed: IgnoreEvent,\n      message_status: IgnoreEvent,\n      moderator_info: IgnoreEvent\n    }[msg.type] || PublicEvent)(this).handle(msg);\n  }\n  /* eslint-enable camelcase */\n}\n\nexport default EventHandler;\n","import FeatureDetector from './FeatureDetector';\n\n/**\n * Add 'Visoweb' identifier to origin field of sdp. Believe this is still\n * relevant for some remotes.\n **/\nconst addOriginToSDP = sdp => {\n  return sdp.replace('o=-', 'o=Visoweb');\n};\n\n/**\n * Add session attribute to disable sfu mode from the client.\n **/\nconst enableSFU = sdp => {\n  const splitSDP = sdp.split('\\n');\n  const aLine = 'a=sfu-capable';\n  const tLineIdx = splitSDP.findIndex(line => line.startsWith('t='));\n  // insert aLine after tLine (timing), delete 0 elements\n  splitSDP.splice(tLineIdx + 1, 0, aLine);\n  return splitSDP.join('\\n');\n};\n\nlet SDPModifiers = [addOriginToSDP];\nif (FeatureDetector.canSFU()) {\n  SDPModifiers.push(enableSFU);\n}\n\nexport default SDPModifiers;\n","/* eslint-disable max-lines */\nimport Logger from './Logger';\nimport SDPModifiers from './SDPModifiers';\nimport FeatureDetector from './FeatureDetector';\nimport MediaStreamBuilder from './MediaStreamBuilder';\n\n/**\n * Conference Session is starting a session from active connection,\n * delegating events to registered listeners.\n **/\nclass ConferenceSession {\n  /* eslint-disable max-statements */\n  constructor(connection, options = {}) {\n    this.options = options;\n    this.options.RTCConstraints = Object.assign(\n      {},\n      this.defaultRTCConstraints,\n      { offerToReceiveVideo: !this.options.eco }\n    );\n    this.accepted = false;\n    this.listeners = [];\n    this.connection = connection;\n    this.startAttempts = 0;\n    this.maxStartAttempts = 3;\n\n    this.end = this.end.bind(this);\n    this.emit = this.emit.bind(this);\n    this.setStream = this.setStream.bind(this);\n    this.endSession = this.endSession.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.initSession = this.initSession.bind(this);\n    this.handleFailed = this.handleFailed.bind(this);\n    this.handleAccept = this.handleAccept.bind(this);\n    this.handleUnmute = this.handleUnmute.bind(this);\n    this.restartSession = this.restartSession.bind(this);\n    this.tryRecoveryFrom = this.tryRecoveryFrom.bind(this);\n    this.terminateSession = this.terminateSession.bind(this);\n    this.adjustVideoPodium = this.adjustVideoPodium.bind(this);\n    this.remoteDescriptionUpdate = this.remoteDescriptionUpdate.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  get peerConnection() {\n    return this.sipSession.sessionDescriptionHandler.peerConnection;\n  }\n\n  get localStream() {\n    return this.sipSession.sessionDescriptionHandler.localStream;\n  }\n\n  get remoteStream() {\n    return this.sipSession.sessionDescriptionHandler.remoteStream;\n  }\n\n  get defaultRTCConstraints() {\n    return { offerToReceiveAudio: true, offerToReceiveVideo: true };\n  }\n\n  /**\n   * Request stream and invoke session start.\n   **/\n  start() {\n    new MediaStreamBuilder(this.options)\n      .start()\n      .then(this.initSession)\n      .catch(this.handleFailed);\n  }\n\n  buildSessionOptions(stream) {\n    return {\n      sessionDescriptionHandlerOptions: {\n        stream: stream,\n        connection: this.connection,\n        handleAccept: this.handleAccept,\n        handleUnmute: this.handleUnmute,\n        RTCConstraints: this.options.RTCConstraints,\n        remoteDescriptionUpdate: this.remoteDescriptionUpdate\n      }\n    };\n  }\n\n  /**\n   * Init session and start stream.\n   **/\n  initSession(stream) {\n    const options = this.buildSessionOptions(this.options.existingStream || stream);\n\n    this.sipSession = this.connection.startSession(options, SDPModifiers);\n    this.sipSession.on('bye', this.handleExit);\n    this.sipSession.on('failed', this.handleFailed);\n    this.sipSession.on('accepted', this.adjustVideoPodium);\n    this.sipSession.on('terminated', this.handleTermination);\n\n    window.addEventListener(\n      FeatureDetector.isIOSDevice() ? 'pagehide' : 'beforeunload',\n      this.endSession\n    );\n  }\n\n  /**\n   * End a conference session.\n   **/\n  end() {\n    this.listeners = [];\n    this.endSession();\n  }\n\n  /**\n   * Before terminating the session, remove all listeners and stop all\n   * streams.\n   **/\n  endSession() {\n    Logger.debug('ConferenceSession::endSession');\n    if (this.sipSession) {\n      this.sipSession.removeAllListeners('accepted');\n      this.sipSession.removeAllListeners('bye');\n      this.sipSession.removeAllListeners('connecting');\n      this.sipSession.removeAllListeners('terminated');\n      if (this.sipSession.sessionDescriptionHandler) {\n        this.sipSession.sessionDescriptionHandler.close();\n      }\n      this.connection.close();\n      this.terminateSession();\n    }\n  }\n\n  /**\n   * Depending on the state of the session, this function may send a CANCEL\n   * request, a non-2xx final response, a BYE request, or even no request at\n   * all.\n   * https://sipjs.com/api/0.7.0/session/#terminateoptions\n   **/\n  terminateSession() {\n    Logger.debug('ConferenceSession::terminateSession');\n    try {\n      this.sipSession.terminate();\n    } catch (error) {\n      Logger.error(error);\n    }\n  }\n\n  /**\n   * Replace the active stream with newStream and emit 'stream_update' with the\n   * new stream.\n   *\n   * In case of an error (as will be the case in current EDGE (May 2019))\n   * report back the current streams.\n   **/\n  async setStream(newStream) {\n    if (!this.sipSession) {\n      return null;\n    }\n\n    try {\n      const streams = await this.sipSession.sessionDescriptionHandler.setStream(\n        newStream\n      );\n      this.emit({\n        type: 'stream_update',\n        localStream: streams.newStream,\n        stream: streams.remoteStream\n      });\n      return streams.newStream;\n    } catch (error) {\n      Logger.error('ConferenceSession::setStream', error);\n      this.emit({\n        type: 'stream_update',\n        localStream: this.localStream,\n        stream: this.remoteStream\n      });\n      return this.localStream;\n    }\n  }\n\n  /**\n   * Register a session monitor.\n   **/\n  setMonitor(monitor) {\n    this.monitor = monitor;\n  }\n\n  /**\n   * On Termination log to debug what happened.\n   **/\n  handleTermination(msg, cause) {\n    Logger.debug(msg, cause);\n  }\n\n  /**\n   * Forward accept event, build expected message format.\n   **/\n  handleAccept(remoteStream) {\n    if (this.monitor) {\n      this.monitor.observe(this.sipSession);\n    }\n    if (!this.accepted) {\n      this.emit({ type: 'accept', session: this.sipSession });\n      this.accepted = true;\n    }\n    this.emit({ type: 'stream_update', stream: remoteStream });\n  }\n\n  handleUnmute(track) {\n    this.emit({ type: 'track_unmuted', track: track });\n  }\n\n  remoteDescriptionUpdate(sdpWrapper) {\n    Logger.debug('ConferenceSession::remoteDescriptionUpdate', sdpWrapper.sdp);\n    let sfu = false;\n\n    const splitSDP = sdpWrapper.sdp.split('\\n');\n    const sfuLine = splitSDP.find(line => line.startsWith('a=sfu-mode'));\n\n    if (sfuLine) {\n      sfu = sfuLine.includes('on');\n    }\n\n    this.emit({ type: 'remote_description_update', update: { sfu: sfu } });\n  }\n\n  /**\n   * Once we have accepted the session, we need to adjust the video podium,\n   * according to the current options.\n   **/\n  adjustVideoPodium() {\n    this.send({ type: 'mute_video', on: !this.options.video });\n  }\n\n  /**\n   * Forward exit event\n   **/\n  handleExit() {\n    this.emit({ type: 'exit', reason: 'bye' });\n  }\n\n  /**\n   * Forward failed event unless we attempt a recovery.\n   **/\n  handleFailed(reason) {\n    Logger.warn('ConferenceSession::handleFailed: ', reason);\n    let key = 'default_key';\n    if (reason) {\n      key = reason && (reason.name || reason.reasonPhrase);\n    }\n\n    if (this.tryRecoveryFrom(key)) {\n      return;\n    }\n\n    const name =\n      {\n        'Busy Here': 'session_in_use',\n        Forbidden: 'session_in_use',\n        NotFoundError: 'devices',\n        NotAllowedError: 'permission',\n        DevicesNotFoundError: 'devices',\n        PermissionDeniedError: 'permission',\n        NotReadableError: 'not_readable',\n        'Request Entity Too Large': 'request_too_large',\n        1006: 'abrupt_disconnect'\n      }[key] || 'session_failed';\n\n    this.emit({ type: 'error', name: name });\n  }\n\n  /**\n   * Conference session may recover from `failure` if a recovery for that\n   * `failure` is known and its condition applies.\n   **/\n  tryRecoveryFrom(failure) {\n    Logger.debug('ConferenceSession::tryRecoveryFrom: ', failure);\n\n    const recovery = {\n      'Not Found': {\n        condition: () => this.startAttempts < this.maxStartAttempts,\n        action: () => this.restartSession()\n      }\n    }[failure];\n\n    return Boolean(recovery && recovery.condition() && recovery.action());\n  }\n\n  /**\n   * End the previously started session, but keep already registered listeners.\n   **/\n  restartSession() {\n    Logger.debug('ConferenceSession::restartSession: ', this.startAttempts);\n    this.startAttempts += 1;\n\n    setTimeout(() => {\n      this.endSession();\n      this.start();\n    }, 1000);\n\n    return true;\n  }\n\n  /**\n   * Register event listeners.\n   **/\n  onEvent(callback) {\n    this.listeners.push(callback);\n  }\n\n  /**\n   * On receiving an event, notify all registered listeners.\n   **/\n  emit(msg) {\n    this.listeners.forEach(listener => listener(msg));\n  }\n\n  /**\n   * Transport a message over the connection.\n   **/\n  send(msg) {\n    return this.connection.send(msg);\n  }\n}\n\nexport default ConferenceSession;\n\n/* eslint-enable max-lines */\n","import Logger from './Logger';\n/**\n * Connection Monitor informs about on and offline and ice state changes.\n * I.e. when the connection to the conf server (from a webRTC point of view)\n * is breaking up or degrading.\n **/\nclass ConnectionMonitor {\n  constructor() {\n    this.listeners = [];\n    this.prevIceState = 'initial';\n\n    this.pc = null;\n\n    this.onOffline = this.onOffline.bind(this);\n    this.handleIceStateChange = this.handleIceStateChange.bind(this);\n    this.handleConnectionStateChange = this.handleConnectionStateChange.bind(\n      this\n    );\n    this.addEventListeners();\n  }\n\n  addEventListeners() {\n    window.addEventListener('offline', this.onOffline);\n  }\n\n  onOffline() {\n    this.emit({ type: 'offline' });\n  }\n\n  observe(sipSession) {\n    this.sipSession = sipSession;\n    this.pc = this.sipSession.sessionDescriptionHandler.peerConnection;\n    this.pc.oniceconnectionstatechange = this.handleIceStateChange;\n    this.pc.onconnectionstatechange = this.handleConnectionStateChange;\n  }\n\n  destroy() {\n    if (this.sipSession) {\n      this.sipSession.removeAllListeners('connecting');\n      this.pc.onconnectionstatechange = null;\n      this.pc.oniceconnectionstatechange = null;\n      window.removeEventListener('offline', this.onOffline);\n    }\n  }\n\n  onError(errorHandler) {\n    this.listeners.push(errorHandler);\n  }\n\n  emit(msg) {\n    this.listeners.forEach(listener => listener(msg));\n  }\n\n  handleConnectionStateChange(event) {\n    if (!event.currentTarget) {\n      Logger.warn(\n        'connectionStateChange: ',\n        event.currentTarget.connectionState\n      );\n    }\n  }\n\n  /* eslint-disable max-statements */\n  handleIceStateChange(event) {\n    // event doesn't have a current target in EDGE\n    if (!event.currentTarget) {\n      return;\n    }\n\n    const { iceConnectionState: currentIceState } = event.currentTarget;\n\n    if (currentIceState === 'disconnected') {\n      this.emit({ type: 'warning', name: 'ice_disconnected' });\n      // As of Chrome 76 failed is no longer emitted\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=982793&q=ice%20failed&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified\n      window.setTimeout(() => {\n        if (this.pc.iceConnectionState !== 'connected') {\n          this.emit({ type: 'error', name: 'ice_failed' });\n        }\n      }, 3000);\n    }\n\n    if (currentIceState === 'failed') {\n      this.emit({ type: 'error', name: 'ice_failed' });\n    }\n\n    if (\n      this.prevIceState === 'disconnected' &&\n      ['completed', 'connected'].includes(currentIceState)\n    ) {\n      this.emit({ type: 'clear_warning', name: 'ice_disconnected' });\n    }\n\n    this.prevIceState = currentIceState;\n  }\n  /* eslint-enable max-statements */\n}\n\nexport default ConnectionMonitor;\n","import Logger from './Logger';\nimport ActionCable from 'actioncable';\n\n/**\n * Registers with provided token and room.\n **/\nclass ActionCableConnection {\n  constructor(uri) {\n    this.onMessageHandler = null;\n\n    this.onReceived = this.onReceived.bind(this);\n    this.offMessage = this.offMessage.bind(this);\n    this.onConnected = this.onConnected.bind(this);\n    this.startSession = this.startSession.bind(this);\n    this.onDisconnected = this.onDisconnected.bind(this);\n\n    this.cable = ActionCable.createConsumer(uri);\n  }\n\n  startSession() {\n    this.cable.subscriptions.create(\n      { channel: 'RoomChannel' },\n      {\n        connected: this.onConnected,\n        received: this.onReceived,\n        disconnected: this.onDisconnected\n      }\n    );\n    this.cable.subscriptions.create(\n      { channel: 'UserChannel' },\n      { received: this.onReceived }\n    );\n  }\n\n  onConnected() {\n    if (this.disconnectTimestamp) {\n      this.handleReconnect();\n    }\n    Logger.debug('ActionCableConnection::onConnected');\n  }\n\n  handleReconnect() {\n    this.onMessageHandler({ type: 'reconnect' });\n  }\n\n  onReceived(msg) {\n    Logger.debug('ActionCableConnection::onReceived', msg);\n    msg._src = 'actioncable';\n    this.onMessageHandler(msg);\n  }\n\n  onDisconnected() {\n    Logger.debug('ActionCableConnection::onDisconnected');\n    this.disconnectTimestamp = Date.now();\n    this.onMessageHandler({ type: 'disconnect' });\n  }\n\n  onMessage(onMessageHandler) {\n    this.onMessageHandler = onMessageHandler;\n  }\n\n  offMessage() {\n    this.onMessageHandler = msg => {\n      Logger.debug('ActionCableConnection::defaultMessageHandler: ', msg);\n    };\n  }\n\n  /**\n   * msg has the format { channel: 'xyz', message: 'abc' }\n   **/\n  send({ channel: channel = 'RoomChannel', message: message = 'ping' }) {\n    const subscription = this.cable.subscriptions.subscriptions.find(\n      sub => sub.identifier === `{\"channel\":\"${channel}\"}`\n    );\n\n    if (!subscription) {\n      Logger.warn(\n        'ActionCableConnection::send no subscription found! ',\n        channel\n      );\n      return;\n    }\n\n    subscription.perform(message, { message: message });\n  }\n\n  close() {\n    this.offMessage();\n    this.onDisconnected();\n  }\n}\n\nexport default ActionCableConnection;\n","/* eslint-disable max-lines */\nimport ComApi from './ComApi';\nimport Logger from './Logger';\nimport throttle from './utils/throttle';\nimport EventHandler from './EventHandler';\nimport ConferenceSession from './ConferenceSession';\nimport ConnectionMonitor from './ConnectionMonitor';\nimport ActionCableConnection from './ActionCableConnection';\n\n/**\n * eyeson lib core.\n **/\nlet core = { eventHandler: new EventHandler() };\n\n/**\n * Initial connection status change updater.\n **/\nconst updateStatus = status =>\n  core.eventHandler.send({ type: 'connection', connectionStatus: status });\n\nconst keepRoomAlive = () => {\n  core.keepRoomAlive = setInterval(() => {\n    core.rtConnection.send({ message: 'user_joins' });\n  }, 30000);\n};\n\n/**\n * Remove this once WSS messages arrive reliably.\n **/\nconst pollingFallback = () => {\n  let counter = 1;\n  core.pollingFallbackInterval = setInterval(() => {\n    if (counter === 200) {\n      Logger.debug(\n        'eyeson::pollingFallback: max count exceeded, clearing interval.'\n      );\n      clearInterval(core.pollingFallbackInterval);\n      return;\n    }\n\n    if (core.eventHandler._connection) {\n      Logger.debug(\n        'eyeson::pollingFallback: connection set, clearing interval.'\n      );\n      clearInterval(core.pollingFallbackInterval);\n      return;\n    }\n\n    core.comApi.getRoom(data => {\n      if (data.ready === true) {\n        Logger.debug('eyeson::pollingFallback: room ready');\n        core.eventHandler.send({ type: 'room_ready', content: data });\n        return;\n      }\n      Logger.debug('eyeson::pollingFallback: room not ready', counter);\n      counter += 1;\n    });\n  }, 5000);\n};\n\n/**\n * Load initial room data.\n **/\nconst loadInitialInfos = data => {\n  if (data.broadcasts) {\n    core.eventHandler.send({\n      type: 'broadcasts_update',\n      broadcasts: data.broadcasts\n    });\n  }\n};\n\n/**\n * Join a session and listen to any events. eventHandler keeps all the\n * stuff.\n **/\nconst joinSession = function(mediaOptions) {\n  if (!core.eventHandler._connection) {\n    Logger.error(\n      'You tried to join a session that is not yet available. ' +\n        'Before calling join, a connection status of connected has ' +\n        'to be received.'\n    );\n    return;\n  }\n\n  const session = new ConferenceSession(\n    core.eventHandler._connection,\n    mediaOptions\n  );\n  session.setMonitor(core.eventHandler.monitor);\n  core.eventHandler.session = session;\n\n  session.start();\n  loadInitialInfos(core.eventHandler._rtData);\n  clearInterval(core.keepRoomAlive);\n  this.session = session; // eslint-disable-line no-invalid-this\n};\n\n/**\n * Initialise our connections.\n **/\n/* eslint-disable max-statements */\nconst prepareConnection = function(eyeson) {\n  updateStatus('fetch_room');\n\n  core.eventHandler.eyeson = eyeson;\n\n  core.comApi.onError = () =>\n    core.eventHandler.send({ type: 'warning', name: 'error:comapi' });\n\n  core.comApi.getRoom(data => {\n    if (data.error) {\n      Logger.warn('eyeson::prepareConnection', data.error);\n      updateStatus('access_denied');\n      return;\n    }\n    updateStatus('received_room');\n\n    core.rtConnection = new ActionCableConnection(data.links.websocket);\n    core.eventHandler.rtConnection = core.rtConnection;\n    core.rtConnection.startSession();\n\n    core.eventHandler.monitor = new ConnectionMonitor();\n    core.eventHandler.api = core.comApi;\n    keepRoomAlive();\n    pollingFallback();\n  });\n};\n/* eslint-enable max-statements */\n\n/****** The following represents the public API, adapt with caution! *********/\nexport default {\n  config: {\n    api: 'https://api.eyeson.team',\n    youtube: { key: '', client: '' }\n  },\n  core: core,\n\n  /****** Public data ********************************************************/\n\n  /**\n   * The room, user and links to be updated when fetched from the ComAPI.\n   **/\n  room: {},\n  user: {},\n  links: {},\n\n  /****** Public helper methods **********************************************/\n\n  /**\n   * Attach event listener\n   **/\n  onEvent: listener => {\n    if (typeof listener !== 'function') {\n      Logger.error(\n        'A listener to eyeson events has to be of type function.' +\n          ' The argument passed to onEvent is of type ' +\n          typeof listener +\n          '.'\n      );\n      return;\n    }\n    core.eventHandler.onReceive(listener);\n  },\n\n  /**\n   * Remove event listener\n   **/\n  offEvent: listener => core.eventHandler.removeListener(listener),\n\n  /**\n   * Prepare required core connections.\n   **/\n  connect: function(token) {\n    Logger.debug('eyeson::connect', token);\n    core.comApi = new ComApi(this.config.api, token);\n    prepareConnection(this);\n  },\n\n  /**\n   * Join a session with supplied mediaOptions (audio/video).\n   **/\n  join: function(mediaOptions) {\n    Logger.debug('eyeson::join', mediaOptions);\n    joinSession.bind(this, mediaOptions)();\n  },\n\n  /**\n   * Start an eyeson room meeting.\n   **/\n  start: function(token, mediaOptions = { audio: true, video: true }) {\n    Logger.debug('eyeson::start');\n    const joinOnConnect = event => {\n      if (event.connectionStatus !== 'ready') {\n        return;\n      }\n      this.offEvent(joinOnConnect);\n      this.join(mediaOptions);\n    };\n    this.onEvent(joinOnConnect);\n    this.connect(token);\n  },\n\n  /**\n   * Destroy and cleanup a session.\n   **/\n  destroy: function() {\n    Logger.debug('eyeson::destroy');\n    clearInterval(core.keepRoomAlive);\n    core.eventHandler.destroy();\n    core.eventHandler = new EventHandler();\n  },\n\n  /**\n   * Receive an event from client.\n   **/\n  send: function(msg) {\n    msg._src = 'client';\n    return core.eventHandler.send(msg);\n  },\n\n  /**\n   * When invoked repeatedly, will only actually call the original function at\n   * most once per every wait milliseconds.\n   **/\n  throttledSend: function(msg) {\n    if (!this._throttledSend) {\n      this._throttledSend = throttle(message => this.send(message), 500);\n    }\n\n    return this._throttledSend(msg);\n  }\n};\n/* eslint-enable max-lines */\n","import Logger from '../Logger';\n\nclass GiphyApi {\n  constructor(roomUrl) {\n    this.roomUrl = roomUrl;\n  }\n\n  search(query) {\n    return this.request(`${this.roomUrl}/search?q=${query}`).then(\n      ({ data }) => data\n    );\n  }\n\n  random() {\n    return this.request(`${this.roomUrl}/random`).then(({ data }) => data);\n  }\n\n  trending() {\n    return this.request(`${this.roomUrl}/trending?limit=9`).then(({ data }) =>\n      this.staff().then(staffGifs => [...data, ...staffGifs])\n    );\n  }\n\n  staff() {\n    return this.request(`${this.roomUrl}/staff`).then(({ data }) => data);\n  }\n\n  randomForQuery(query) {\n    return new Promise((res, rej) => {\n      this.search(query)\n        .then(data => {\n          return data.filter(img => img.images.original_mp4.mp4_size >= 40000);\n        })\n        .then(largerGifs => {\n          res(largerGifs[Math.floor(Math.random() * largerGifs.length)]);\n        })\n        .catch(rej);\n    });\n  }\n\n  request(url) {\n    return fetch(new Request(url))\n      .then(response => response.json())\n      .catch(error => {\n        Logger.warn('GiphyApi', url, error);\n        return { data: [] };\n      });\n  }\n}\n\nexport default GiphyApi;\n","/* eslint-disable max-lines */\n/* global gapi */\nimport Logger from '../Logger';\n\nconst API_URL = 'https://www.googleapis.com/youtube/v3';\n\n/**\n * YouTube API Helper.\n *\n * Documenation is available at:\n * - https://developers.google.com/youtube/v3/live/life-of-a-broadcast\n * - https://developers.google.com/youtube/v3/live/docs/liveBroadcasts\n *\n **/\nclass YouTubeApi {\n  /* eslint-disable max-statements */\n  constructor(eyeson) {\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.youtube.key;\n    this.clientId = eyeson.config.youtube.client;\n    this.activated = null;\n\n    if (!this.apiKey || !this.clientId) {\n      return;\n    }\n\n    // keep track of broadcastId for deactivation and error\n    this.broadcastId = null;\n\n    this.activate = this.activate.bind(this);\n    this.getStream = this.getStream.bind(this);\n    this.deactivate = this.deactivate.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.insertStream = this.insertStream.bind(this);\n    this.clearInterval = this.clearInterval.bind(this);\n    this.insertBroadcast = this.insertBroadcast.bind(this);\n    this.createLiveStream = this.createLiveStream.bind(this);\n    this.cleanupBroadcast = this.cleanupBroadcast.bind(this);\n\n    this.initGoogleApi();\n  }\n  /* eslint-enable max-statements */\n\n  initGoogleApi() {\n    if (typeof gapi !== 'undefined') {\n      return;\n    }\n\n    const ga = document.createElement('script');\n    ga.type = 'text/javascript';\n    ga.async = true;\n    ga.onload = this.handleClientLoad.bind(this);\n    ga.src = '//apis.google.com/js/api.js';\n    document.body.appendChild(ga);\n  }\n\n  handleClientLoad() {\n    gapi.load('client:auth2', this.initClient.bind(this));\n  }\n\n  initClient() {\n    gapi.client.init({\n      apiKey: this.apiKey,\n      clientId: this.clientId,\n      scope: 'https://www.googleapis.com/auth/youtube.force-ssl'\n    });\n\n    if (this.activated) {\n      this.activate();\n    }\n  }\n\n  activate() {\n    try {\n      gapi.auth2\n        .getAuthInstance()\n        .signIn({ prompt: 'select_account' })\n        .then(this.createLiveStream, this.handleError);\n    } catch (error) {\n      this.activated = true;\n      this.handleError();\n    }\n  }\n\n  deactivate() {\n    Logger.warn('YouTubeApi::deactivate');\n    this.clearInterval();\n    this.cleanupBroadcast();\n\n    // make sure we always stop the stream on our side at least.\n    this.eyeson.send({ type: 'stop_youtube' });\n  }\n\n  getDefaultTitle() {\n    return `Live Stream ${new Date().toDateString()}`;\n  }\n\n  // Valid privacy settings are:\n  // unlisted, public, private\n  insertBroadcast() {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'POST',\n      params: {\n        part: 'snippet,status'\n      },\n      body: {\n        snippet: {\n          title: this.getDefaultTitle(),\n          scheduledStartTime: new Date().toISOString()\n        },\n        status: {\n          privacyStatus: 'public'\n        }\n      }\n    });\n  }\n\n  listBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'GET',\n      params: {\n        id: broadcastId,\n        part: 'id,contentDetails,status'\n      }\n    });\n  }\n\n  insertStream() {\n    return gapi.client.request({\n      path: API_URL + '/liveStreams',\n      method: 'POST',\n      params: {\n        part: 'snippet,cdn'\n      },\n      body: {\n        snippet: {\n          title: this.getDefaultTitle()\n        },\n        cdn: {\n          resolution: 'variable',\n          frameRate: 'variable',\n          ingestionType: 'rtmp'\n        }\n      }\n    });\n  }\n\n  bindBroadcast(broadcastId, streamId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts/bind',\n      method: 'POST',\n      params: {\n        id: broadcastId,\n        streamId: streamId,\n        part: 'id,contentDetails'\n      }\n    });\n  }\n\n  // After you call the liveBroadcasts.transition method, it may take several\n  // seconds, or even up to a minute, for that transition to complete. During\n  // that time, you should poll the API to check the broadcast's status. Until\n  // the transition is complete, the broadcast's status will be testingStarting.\n  transitionBroadcast(broadcastId, status) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts/transition',\n      method: 'POST',\n      params: {\n        id: broadcastId,\n        part: 'id,contentDetails',\n        broadcastStatus: status\n      }\n    });\n  }\n\n  deleteBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      method: 'DELETE',\n      params: {\n        id: broadcastId\n      }\n    });\n  }\n\n  // This is quite the process, but the calls here mirror what the guide says.\n  // See here: https://developers.google.com/youtube/v3/live/life-of-a-broadcast\n  // and https://stackoverflow.com/a/35083880/980524\n  createLiveStream() {\n    let broadcastId = null;\n    let streamId = null;\n\n    this.insertBroadcast()\n      .then(resp => {\n        broadcastId = JSON.parse(resp.body).id;\n        // keep track of broadcastId for deactivate()\n        this.broadcastId = broadcastId;\n        return this.insertStream();\n      })\n      .then(resp => {\n        streamId = JSON.parse(resp.body).id;\n        return this.bindBroadcast(broadcastId, streamId);\n      })\n      .then(() => this.getStream(streamId))\n      .then(resp => this.startStream(broadcastId, JSON.parse(resp.body)))\n      .then(() => this.waitForStatus(() => this.getStream(streamId), 'active'))\n      .then(() => this.transitionBroadcast(broadcastId, 'testing'))\n      .then(() => {\n        return this.waitForStatus(\n          () => this.getBroadcast(broadcastId),\n          'testing'\n        );\n      })\n      .then(() => this.transitionBroadcast(broadcastId, 'live'))\n      .then(() =>\n        this.eyeson.send({ type: 'status_update_youtube', status: 'live' })\n      )\n      .catch(this.handleError);\n  }\n\n  getStream(streamId) {\n    return gapi.client.request({\n      path: API_URL + '/liveStreams',\n      params: {\n        part: 'cdn,status',\n        id: streamId\n      }\n    });\n  }\n\n  getBroadcast(broadcastId) {\n    return gapi.client.request({\n      path: API_URL + '/liveBroadcasts',\n      params: {\n        part: 'id,status',\n        id: broadcastId\n      }\n    });\n  }\n\n  getViewersCount(broadcastId) {\n    return gapi.client\n      .request({\n        path: API_URL + '/videos',\n        params: {\n          id: broadcastId,\n          part: 'liveStreamingDetails'\n        }\n      })\n      .then(response => {\n        const [video] = response.result.items;\n        if (!video) {\n          return null;\n        }\n        return video.liveStreamingDetails.concurrentViewers;\n      });\n  }\n\n  startStream(broadcastId, responseBody) {\n    const {\n      items: [\n        {\n          cdn: {\n            ingestionInfo: { ingestionAddress, streamName }\n          }\n        }\n      ]\n    } = responseBody;\n\n    this.eyeson.send({\n      type: 'start_youtube',\n      playerUrl: `https://youtu.be/${broadcastId}`,\n      streamUrl: `${ingestionAddress}/${streamName}`\n    });\n  }\n\n  // There are a couple of state changes we have to wait for and the YouTube API\n  // explicitly states we should poll the API... `source` specifies the way to\n  // get data, and `desiredStatus` is the status we're watiting for.\n  waitForStatus(source, desiredStatus) {\n    let intervalCnt = 0;\n    // 5 minutes\n    const maxIntervals = 150;\n\n    return new Promise((resolve, reject) => {\n      this.interval = window.setInterval(() => {\n        Logger.debug('YouTubeApi::waitForStatus', desiredStatus);\n        if (intervalCnt > maxIntervals) {\n          this.clearInterval();\n          let error = new Error('YouTube stream not ', desiredStatus);\n          error.error = 'timeout';\n          reject(error);\n        }\n        intervalCnt += 1;\n\n        source().then(response => {\n          const json = JSON.parse(response.body);\n          const statusObj = json.items[0].status;\n          // statusObj can be either from live stream or broadcast, and those\n          // two have different status we need to look for.\n          const status = statusObj.streamStatus || statusObj.lifeCycleStatus;\n\n          this.eyeson.send({\n            type: 'status_update_youtube',\n            status: status,\n            health: statusObj.healthStatus || {}\n          });\n\n          if (status === desiredStatus) {\n            this.clearInterval();\n            resolve();\n          } else {\n            Logger.warn('YouTubeApi::waitForStatus: ', status);\n          }\n        });\n      }, 2000);\n    });\n  }\n\n  handleError(response) {\n    let error = { reason: 'account_setup' };\n    try {\n      this.clearInterval();\n      this.cleanupBroadcast();\n\n      error = response.error\n        ? { reason: response.error }\n        : JSON.parse(response.body).error.errors[0];\n    } catch (err) {\n      Logger.error('YouTubeApi::handleError', err);\n    }\n\n    this.eyeson.send({\n      type: 'handle_youtube_error',\n      error: Object.assign({}, { name: `youtube_${error.reason}` }, error)\n    });\n  }\n\n  clearInterval() {\n    window.clearInterval(this.interval);\n  }\n\n  // If the broadcast is either\n  // - 'ready'\n  // - 'created'\n  // - 'testing'\n  // - 'testStarting'\n  // (it shows up as \"upcoming\" on YouTube) we delete it so we don't pollute\n  // YouTube with a bunch of \"upcoming\" broadcasts that'll never happen.\n  cleanupBroadcast() {\n    if (!this.broadcastId) {\n      return;\n    }\n\n    const deleteableBroadcastStates = [\n      'ready',\n      'created',\n      'testing',\n      'testStarting'\n    ];\n\n    this.listBroadcast(this.broadcastId)\n      .then(response => {\n        const [broadcast] = response.result.items;\n        const {\n          status: { lifeCycleStatus }\n        } = broadcast;\n\n        if (deleteableBroadcastStates.includes(lifeCycleStatus)) {\n          this.deleteBroadcast(this.broadcastId).then(() => {\n            Logger.debug('YouTubeApi::deleted: ', this.broadcastId);\n          });\n        } else {\n          this.transitionBroadcast(this.broadcastId, 'complete').then(() => {\n            Logger.debug('YouTubeApi::completed: ', this.broadcastId);\n          });\n        }\n        this.broadcastId = null;\n      })\n      .catch(error => {\n        Logger.error('YouTubeApi::cleanupBroadcast', error);\n      });\n  }\n}\n\nexport default YouTubeApi;\n/* eslint-enable max-lines */\n","/* global FB */\n\nconst LOAD_ERRORS = ['FB is not defined', 'FB.login is not a function'];\n\n/**\n * Facebook API.\n **/\nclass FacebookApi {\n  /* eslint-disable max-statements */\n  constructor(eyeson) {\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.facebook.key;\n    this.stream = null;\n    this.permalLinkUrl = 'default-permalink-url';\n\n    if (!this.apiKey) {\n      return;\n    }\n\n    this.sendStop = this.sendStop.bind(this);\n    this.loggedIn = this.loggedIn.bind(this);\n    this.fetchLink = this.fetchLink.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.streamPublished = this.streamPublished.bind(this);\n\n    this.initFacebookApi();\n  }\n  /* eslint-enable max-statements */\n\n  initFacebookApi() {\n    if (typeof FB !== 'undefined') {\n      return;\n    }\n\n    window.fbAsyncInit = () => {\n      FB.init({\n        appId: this.apiKey,\n        xfbml: true,\n        version: 'v2.9',\n        autoLogAppEvents: true\n      });\n      FB.AppEvents.logPageView();\n    };\n\n    /* eslint-disable */\n    (function(d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = '//connect.facebook.net/en_US/sdk.js';\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n    /* eslint-enable */\n  }\n\n  /**\n   * Start live stream process here.\n   **/\n  activate() {\n    FB.ui(\n      {\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'create'\n      },\n      this.startStream\n    );\n  }\n\n  /**\n   * Inovked _after_ activation.\n   **/\n  publish() {\n    FB.ui(\n      {\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'publish',\n        broadcast_data: this.stream // eslint-disable-line camelcase\n      },\n      this.streamPublished\n    );\n  }\n\n  /**\n   * Inovked _after_ publish.\n   **/\n  login() {\n    try {\n      FB.login(this.loggedIn, { scope: 'user_videos' });\n    } catch (error) {\n      this.handleError(this.getError(error));\n    }\n  }\n\n  /**\n   * Deactivate the stream.\n   **/\n  deactivate() {\n    this.stream = null;\n    this.sendStop();\n  }\n\n  /**\n   * Wrapper, only send stop when we have a stream.\n   **/\n  sendStop() {\n    return this.stream ? this.eyeson.send({ type: 'stop_facebook' }) : null;\n  }\n\n  getError(response) {\n    let error = { result: { error: { message: 'user closed popup' } } };\n    if (response && response.error_message) {\n      error.result.error.message = response.error_message;\n      return error;\n    }\n    if (\n      response &&\n      (!response.message || LOAD_ERRORS.includes(response.message))\n    ) {\n      error.result.error = {\n        name: 'facebook:not_loaded',\n        message: 'facebook api did not load'\n      };\n    }\n    return error;\n  }\n\n  startStream(stream) {\n    if (!stream || stream.error_message) {\n      this.handleError(this.getError(stream));\n      return;\n    }\n    this.stream = stream;\n    this.eyeson.send({\n      type: 'start_facebook',\n      streamUrl: stream.secure_stream_url\n    });\n  }\n\n  streamPublished(response) {\n    if (!response || response.error_message) {\n      this.handleError(this.getError(response));\n      return;\n    }\n    this.fetchLink();\n    this.eyeson.send({ type: 'facebook_published' });\n  }\n\n  loggedIn(response) {\n    // If someone closes the popup or cancels we actually get undefined for\n    // authResponse & status\n    if (!response.authResponse && !response.status) {\n      this.handleError(this.getError(response));\n      return;\n    }\n\n    this.permalLinkUrl = `https://facebook.com/${response.authResponse.userID}`;\n    this.eyeson.send({ type: 'facebook_logged_in' });\n  }\n\n  fetchLink() {\n    FB.api(`/${this.stream.id}?fields=permalink_url`, response => {\n      // fallback to the users profile page, in case we don't get a\n      // permalink_url\n      if (!response.permalink_url || response.error_message) {\n        response.permalink_url = this.permalLinkUrl; // eslint-disable-line camelcase\n      }\n\n      let playerUrl = response.permalink_url.includes('https://facebook.com')\n        ? response.permalink_url\n        : `https://facebook.com${response.permalink_url}`;\n\n      this.eyeson.send({\n        type: 'publish_broadcast',\n        playerUrl: playerUrl\n      });\n    });\n  }\n\n  handleError(response) {\n    if (!response.result.error.name) {\n      response.result.error.name = 'facebook:closed';\n    }\n    this.sendStop();\n    this.eyeson.send({\n      type: 'handle_facebook_error',\n      error: response.result.error\n    });\n  }\n}\n\nexport default FacebookApi;\n","import Logger from './Logger';\nimport debounce from './utils/debounce';\n\n/**\n * Sound Meter that generates a number correlated to audio volume. The meter\n * itself displays nothing, but it makes the instantaneous and time-decaying\n * volumes available for inspection. It also reports on the fraction of samples\n * that were at or near the top of the measurement range.\n **/\nclass SoundMeter {\n  constructor() {\n    this.level = 0;\n    this.instant = 0.0;\n    this.intervalCounter = 0;\n    this.silenceDuration = 0;\n    this.init();\n    this.offUpdate = this.offUpdate.bind(this);\n  }\n\n  /**\n   * Initialize audio context and prepare script processor to read input\n   * channel data.\n   **/\n  init() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (typeof AudioContext === 'undefined') {\n      Logger.error(\n        'AudioContext is not available. Probably the current' +\n          ' user agent does not support this feature. Use the feature detector' +\n          ' to hide not supported elements. Any call on onUpdate will not' +\n          ' send values.'\n      );\n      return;\n    }\n\n    this.context = new AudioContext();\n\n    this.context.onstatechange = () => {\n      if (this.context.state === 'suspended') {\n        Logger.error('SoundMeter::init AudioContext: ', this.context.state);\n      }\n    };\n\n    this.script = this.context.createScriptProcessor(2048, 1, 1);\n    this.script.onaudioprocess = event => {\n      const input = event.inputBuffer.getChannelData(0);\n      const sum = input.reduce((prev, current) => {\n        return prev + (current * current);\n      }, 0);\n      this.instant = Math.sqrt(sum / input.length) * 100;\n    };\n  }\n\n  /**\n   * Connect to a media stream.\n   **/\n  connectToSource(stream) {\n    if (!this.context || stream.getAudioTracks().length < 1) {\n      return this;\n    }\n    Logger.debug('SoundMeter::connectToSource', stream);\n    this.mic = this.context.createMediaStreamSource(stream);\n    this.mic.connect(this.script);\n    this.script.connect(this.context.destination);\n    return this;\n  }\n\n  /**\n   * Stop read interval and disconnect from stream.\n   **/\n  stop() {\n    if (!this.context) {\n      return;\n    }\n\n    this.offUpdate();\n    if (this.mic) {\n      this.mic.disconnect();\n    }\n    this.script.disconnect();\n    if (this.context.close) {\n      this.context.close();\n    }\n  }\n\n  offUpdate() {\n    window.clearInterval(this.audioMeterInterval);\n    window.clearInterval(this.readInterval);\n  }\n\n  onUpdate(listener) {\n    if (!this.context) {\n      return;\n    }\n\n    if (this.audioMeterInterval) {\n      clearInterval(this.audioMeterInterval);\n    }\n    this.readInterval = setInterval(\n      this.readAudioLevel.bind(this, listener),\n      SoundMeter.updateInterval\n    );\n  }\n\n  /**\n   * Read audio level. Avoids triggering a re-render of the device-dialog\n   * when the change is below 1% which wouldn't be noticable anyways.\n   *\n   * NOTE: When an USB Microphone is abruptly disconnected. The\n   * intervalCounter reacts: when switching to a different mic, it seems to\n   * take a bit to not return 0.00 for the audio level.\n   **/\n  /* eslint-disable max-statements */\n  readAudioLevel(update) {\n    let audioLevel = this.level;\n\n    // Handle microphone disconnect\n    if (audioLevel === 0 && this.instant === 0 && this.intervalCounter > 5) {\n      this.silenceDuration++;\n      if (this.silenceDuration > 25) {\n        debounce(() => {\n          update({ error: 'EyesonMicrophoneError' });\n        }, 1000);\n      }\n    }\n\n    // Clear a MicrophoneError once we get a signal, intervalCounter might be\n    // too low sometimes.\n    if (this.level !== this.instant) {\n      this.silenceDuration = 0;\n      let diff = Math.abs(audioLevel - this.instant);\n      audioLevel = this.instant;\n\n      if (audioLevel > 0.7 || diff > 1) {\n        this.level = this.instant;\n        update({ value: this.level });\n      }\n    }\n\n    this.intervalCounter++;\n  }\n  /* eslint-enable max-statements */\n}\n\nSoundMeter.updateInterval = 100;\n\nexport default SoundMeter;\n","import eyeson from './src/eyeson';\n\nimport Logger from './src/Logger';\nimport GiphyApi from './src/utils/GiphyApi';\nimport debounce from './src/utils/debounce';\nimport throttle from './src/utils/throttle';\nimport YouTubeApi from './src/utils/YouTubeApi';\nimport FacebookApi from './src/utils/FacebookApi';\nimport SoundMeter from './src/SoundMeter';\nimport LocalStorage from './src/LocalStorage';\nimport DeviceManager from './src/DeviceManager';\nimport FeatureDetector from './src/FeatureDetector';\nimport FullscreenHelper from './src/FullscreenHelper';\nimport MediaStreamBuilder from './src/MediaStreamBuilder';\nimport * as StreamHelpers from './src/utils/StreamHelpers';\n\nexport {\n  Logger,\n  GiphyApi,\n  throttle,\n  debounce,\n  YouTubeApi,\n  SoundMeter,\n  FacebookApi,\n  LocalStorage,\n  StreamHelpers,\n  DeviceManager,\n  FeatureDetector,\n  FullscreenHelper,\n  MediaStreamBuilder\n};\n\nexport default eyeson;\n"],"sourceRoot":""}